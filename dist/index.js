function We(){const e=document.querySelectorAll(".nav-link"),t=window.location.pathname;e.forEach(r=>{const n=r.getAttribute("href");t===n||t==="/"&&n==="/"?(r.setAttribute("aria-current","page"),r.classList.add("current","w--current")):(r.removeAttribute("aria-current"),r.classList.remove("current","w--current"))})}function De(e){e.startsWith("work")&&window.photoModalCleanup&&window.photoModalCleanup(),e.startsWith("work")&&window.cleanupWorkPage&&window.cleanupWorkPage(),ScrollTrigger.getAll().forEach(r=>{r.kill()}),document.querySelectorAll(".split-type").forEach(r=>{r.splitType&&r.splitType.revert()})}function ee(e){var t,r,n,o,a,s,E,g,h;switch(e){case"home":(t=window.initHero)==null||t.call(window),(r=window.initAboutSection)==null||r.call(window),(n=window.initHighlights)==null||n.call(window),(o=window.initCategories)==null||o.call(window);break;case"work":case"work-abstract":case"work-nature":case"work-people":case"work-products":case"work-architecture":(a=window.initWork)==null||a.call(window),(s=window.initCategoryTitleAnimation)==null||s.call(window),(E=window.initWorkCategoriesReveal)==null||E.call(window),(g=window.initPhotoModal)==null||g.call(window);break;case"about":(h=window.initAbout)==null||h.call(window);break;default:console.warn(`âš ï¸ Nepoznati namespace: ${e}`)}}function Fe(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),barba.hooks.beforeEnter(()=>{localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"))}),barba.init({transitions:[{name:"fade",leave(e){return window.lenis&&window.lenis.stop(),We(),De(e.current.namespace),localStorage.getItem("dark-mode")==="enabled"&&(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")),gsap.to(e.current.container,{opacity:0,duration:.15})},beforeEnter(e){var r,n,o,a;localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"));const t=(n=(r=e.next.container).querySelector)==null?void 0:n.call(r,".category-title");if(t){t.style.opacity="0",t.style.visibility="hidden";const s=(a=(o=e.next.container).querySelector)==null?void 0:a.call(o,".work-categories-wrapper");s&&(s.style.opacity="0",s.style.visibility="hidden")}window.lenis?window.lenis.scrollTo(0,{immediate:!0,force:!0}):window.scrollTo(0,0)},enter(e){return gsap.to(e.next.container,{opacity:1,duration:.15})},after(e){ee(e.next.namespace),requestAnimationFrame(()=>{window.lenis&&window.lenis.start(),ScrollTrigger.refresh(!0)})}}],views:[{namespace:"home"},{namespace:"work"},{namespace:"about"},{namespace:"work-abstract"},{namespace:"work-nature"},{namespace:"work-people"},{namespace:"work-products"},{namespace:"work-architecture"}]})}window.addEventListener("beforeunload",()=>{window.scrollTo(0,0)});Fe();var he;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{var t;const e=(t=document.querySelector('[data-barba="container"]'))==null?void 0:t.getAttribute("data-barba-namespace");e&&ee(e)});else{const e=(he=document.querySelector('[data-barba="container"]'))==null?void 0:he.getAttribute("data-barba-namespace");e&&ee(e)}function we(){const e=new Lenis({lerp:.1,wheelMultiplier:1,smoothWheel:!0,smoothTouch:!1,infinite:!1});window.lenis=e,ScrollTrigger.scrollerProxy(document.body,{scrollTop(t){return arguments.length&&e.scrollTo(t,{immediate:!0}),e.scroll},getBoundingClientRect(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},pinType:document.body.style.transform?"transform":"fixed"}),e.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{e.raf(t*1e3)}),gsap.ticker.lagSmoothing(0)}window.initLenis=we;we();function ye(){const e=document.body,t=document.querySelector(".nav-theme-switcher");localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode")),t&&t.addEventListener("click",()=>{e.classList.contains("ui-dark-mode")?(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode"),console.log("Removed .ui-dark-mode from html and body"),localStorage.setItem("dark-mode","disabled")):(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode"),console.log("Added .ui-dark-mode to html and body"),localStorage.setItem("dark-mode","enabled"))})}window.initDarkMode=ye;ye();function ve(){const e=document.querySelector(".section.footer"),t=e==null?void 0:e.previousElementSibling;gsap.registerPlugin(ScrollTrigger),t&&(gsap.to(t,{scrollTrigger:{trigger:t,start:"top top",end:()=>`+=${window.innerHeight*.5}`,pin:!1,scrub:!0,id:"footer-prev-section"}}),gsap.to(e,{scrollTrigger:{trigger:t,start:()=>`bottom+=${window.innerHeight*.5} bottom`,end:"bottom bottom",scrub:!0,id:"footer-main"}}),gsap.set(t,{zIndex:1}))}window.initFooter=ve;ve();function Se(e,t=!0){e.dataset.originalText||(e.dataset.originalText=e.textContent);const r=e.dataset.originalText;e.style.position="relative",e.style.zIndex="100000";let n;e.querySelector(".shuffle-text")?n=e.querySelector(".shuffle-text"):(n=document.createElement("span"),n.className="shuffle-text",n.textContent=r,e.textContent="",e.appendChild(n)),n.style.pointerEvents="none";let o=!1,a;const s=h=>{const p=h.split("");for(let C=p.length-1;C>0;C--){const L=Math.floor(Math.random()*(C+1));[p[C],p[L]]=[p[L],p[C]]}return p.join("")},E=()=>{a&&(clearInterval(a),a=null),n.textContent=r,o=!1},g=()=>{if("ontouchstart"in window||navigator.maxTouchPoints>0||o)return;o=!0;let h=0;a&&clearInterval(a),a=setInterval(()=>{h<3?(n.textContent=s(r),h++):(n.textContent=r,clearInterval(a),a=null,o=!1)},100)};return t&&("ontouchstart"in window||navigator.maxTouchPoints>0||e.addEventListener("mouseenter",g),e.addEventListener("click",function(p){E()})),g}function be(){document.querySelectorAll(".link, .cta").forEach(e=>{Se(e,!0)})}window.createShuffleEffect=Se;window.initLinksHover=be;be();function Ee(){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)&&!e.match(/FxiOS/i)}function _e(){if(!Ee())return;document.body.addEventListener("click",function(n){const o=n.target.closest("a, button");o&&(o.style.transition="opacity 0.2s ease-out",o.style.opacity="0.5",setTimeout(()=>{o.style.opacity="1"},300))});function e(n){var o=n.tagName.toLowerCase(),a=n.dataset.bind,s=a&&a.indexOf("click")>-1||o=="a"||o=="button";return s}var t={touchend:function(n,o){o.dataset._clicked_="",o.dataset._mousemove_="0",o.dataset._timeOutId_=""},mouseover:function(n){n.preventDefault()},mousemove:function(n,o){n.preventDefault();var a=+(o.dataset._mousemove_||"0");if(a=a+1,console.log("mousemoves: "+a),o.dataset._mousemove_=a,a>1&&!o.dataset._timeOutId_){var s=setTimeout(function(){console.log("double mousemove click fired"),o.click()},80);o.dataset._timeOutId_=s}},click:function(n,o){if(o.dataset._clicked_){n.isTrusted&&(console.log("prevented doubleclick"),n.preventDefault());return}o.dataset._timeOutId_&&(console.log("cleared timeout"),clearTimeout(+o.dataset._timeOutId_)),o.dataset._clicked_="true"}};function r(n){var o=n.target;if(o&&o.click&&o.tagName&&o.dataset&&e(o)){var a=n.type;console.log(a,o),t[a]&&t[a](n,o)}}document.addEventListener("touchend",r,!0),document.addEventListener("mouseover",r,!0),document.addEventListener("mousemove",r,!0),document.addEventListener("click",r,!0)}function ke(){Ee()&&_e()}window.initIosSafariFix=ke;ke();const X={enabled:!1,logs:[],lastScrollY:0,lastTimestamp:0,freezeThreshold:100,init(){this.enabled&&(console.log("ðŸ” ScrollDebugger aktiviran"),window.lenis&&window.lenis.on("scroll",e=>{this.logScroll("LENIS",e)}),window.ScrollTrigger&&(ScrollTrigger.addEventListener("refresh",()=>{console.log("ðŸ”„ ScrollTrigger REFRESH event")}),ScrollTrigger.addEventListener("scrollStart",()=>{console.log("â–¶ï¸ ScrollTrigger SCROLL START")}),ScrollTrigger.addEventListener("scrollEnd",()=>{console.log("â¸ï¸ ScrollTrigger SCROLL END")})),this.startRAFMonitoring(),this.trackScrollDirection(),console.log("âœ… ScrollDebugger setup complete"))},logScroll(e,t){var s;const r=performance.now(),n=r-this.lastTimestamp,o=t.scroll-this.lastScrollY,a=o>0?"â¬‡ï¸ DOWN":"â¬†ï¸ UP";n>this.freezeThreshold&&this.lastTimestamp>0&&console.warn(`ðŸš¨ FREEZE DETECTED! ${n.toFixed(2)}ms gap`,{scrollPosition:t.scroll,direction:a,gap:`${n.toFixed(2)}ms`,scrollDelta:o}),Math.abs(o)>1&&console.log(`ðŸ“œ ${e} ${a}`,{scroll:t.scroll.toFixed(2),velocity:((s=t.velocity)==null?void 0:s.toFixed(2))||"N/A",delta:o.toFixed(2),time:n.toFixed(2)+"ms"}),this.lastScrollY=t.scroll,this.lastTimestamp=r},startRAFMonitoring(){let e=performance.now(),t=0;const r=n=>{var a;const o=n-e;o>32&&console.warn(`â±ï¸ SLOW FRAME: ${o.toFixed(2)}ms (${(1e3/o).toFixed(1)}fps)`,{framesSinceLastLog:t,scrollY:((a=window.lenis)==null?void 0:a.scroll)||window.scrollY}),t++,e=n,requestAnimationFrame(r)};requestAnimationFrame(r)},trackScrollDirection(){let e=null;const t=()=>{var o;const r=((o=window.lenis)==null?void 0:o.scroll)||window.scrollY,n=r>this.lastScrollY?"down":"up";n!==e&&e!==null&&console.log(`ðŸ”„ DIRECTION CHANGE: ${e} â†’ ${n}`,{scrollY:r.toFixed(2),activeScrollTriggers:ScrollTrigger.getAll().length}),e=n,requestAnimationFrame(t)};requestAnimationFrame(t)},logScrollTriggers(){const e=ScrollTrigger.getAll();console.log(`ðŸ“Š Active ScrollTriggers: ${e.length}`),e.forEach(t=>{console.log(`  - ${t.vars.id||"unnamed"}`,{start:t.start,end:t.end,progress:t.progress.toFixed(2),isActive:t.isActive})})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>X.init()):X.init();window.ScrollDebugger=X;document.addEventListener("keydown",e=>{var t,r,n;(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(console.log("ðŸ” === SCROLL DEBUG DUMP ==="),X.logScrollTriggers(),console.log("Lenis state:",{scroll:(t=window.lenis)==null?void 0:t.scroll,velocity:(r=window.lenis)==null?void 0:r.velocity,direction:(n=window.lenis)==null?void 0:n.direction}),console.log("========================="))});function ze(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){console.log("ðŸ–±ï¸ Touch device detektiran - custom cursor onemoguÄ‡en");return}const t=document.createElement("div");t.id="custom-cursor",t.style.cssText=`
    position: fixed;
    width: 56px;
    height: 32px;
    border-radius: 999px;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
    background-color: #ffffff;
    mix-blend-mode: difference;
    opacity: 0;
    display: none;
  `,document.body.appendChild(t);let r=window.innerWidth/2,n=window.innerHeight/2;const o=g=>{r=g.clientX,n=g.clientY,t.style.left=`${r}px`,t.style.top=`${n}px`},a=()=>{t.style.display="block",setTimeout(()=>{t.style.opacity="1"},10)},s=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},200)};window.addEventListener("hero:drag:start",a),window.addEventListener("hero:drag:end",s);const E=g=>{o(g)};return window.addEventListener("mousemove",E),()=>{t.remove(),window.removeEventListener("mousemove",E),window.removeEventListener("hero:drag:start",a),window.removeEventListener("hero:drag:end",s)}}function Te(){const e=document.querySelector(".section.hero"),t=document.querySelector(".hero-title"),r=document.querySelectorAll(".hero-footer");if(!e){console.error("âŒ Hero sekcija nije pronaÄ‘ena!");return}r.forEach(u=>{u.style.position="relative",u.style.zIndex="10",u.style.pointerEvents="auto",u.querySelectorAll('a, button, [role="button"]').forEach(x=>{x.style.position="relative",x.style.zIndex="11",x.style.pointerEvents="auto"})});const n=document.querySelector(".hero-images-wrapper");if(!n){console.warn("Hero wrapper nije pronaÄ‘en!");return}const o=Array.from(document.querySelectorAll(".hero-image")),a=o.length;if(a===0){console.warn("âš ï¸ Nema slika za prikaz!");return}const s=document.querySelector(".hero-images-container");if(typeof THREE>"u"){console.error("âŒ Three.js nije uÄitan! Provjerite Webflow Footer Code.");return}o.forEach(u=>{u.style.display="none"}),n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.pointerEvents="auto",s.innerHTML="",s.style.position="relative",s.style.width="100%",s.style.height="100%",s.style.overflow="hidden",s.style.pointerEvents="auto";const E=new THREE.Scene,g=new THREE.PerspectiveCamera(40,s.offsetWidth/s.offsetHeight,.1,3e3);g.position.z=900;const h=window.innerWidth<=768;g.position.y=h?-50:0;const p=new THREE.WebGLRenderer({alpha:!0,antialias:!0});p.setSize(s.offsetWidth,s.offsetHeight),p.setPixelRatio(Math.min(window.devicePixelRatio,2)),p.setClearColor(0,0),p.domElement.style.position="absolute",p.domElement.style.top="0",p.domElement.style.left="0",p.domElement.style.width="100%",p.domElement.style.height="100%",p.domElement.style.zIndex="1",s.appendChild(p.domElement);const C=new THREE.AmbientLight(16777215,.6);E.add(C);const L=new THREE.DirectionalLight(16777215,.4);L.position.set(0,500,800),E.add(L);const M=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // Å alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,w=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    uniform vec2 uImageAspect;  // (width/height, 1.0)
    uniform vec2 uPlaneAspect;  // (width/height, 1.0)
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      // Background cover: scale to cover, maintain aspect ratio, crop center
      float imageAspect = uImageAspect.x;
      float planeAspect = uPlaneAspect.x;
      
      vec2 uv = vUv;
      
      if (imageAspect > planeAspect) {
        // Image is wider - crop left/right, zoom X
        float scale = imageAspect / planeAspect;
        uv.x = (uv.x - 0.5) / scale + 0.5;
      } else {
        // Image is taller - crop top/bottom, zoom Y
        float scale = planeAspect / imageAspect;
        uv.y = (uv.y - 0.5) / scale + 0.5;
      }
      
      vec4 texColor = texture2D(uTexture, uv);
      
      // Shadow na rubovima za naglaÅ¡avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `,A=new THREE.TextureLoader,c=[],d=new THREE.Group;E.add(d);const S=Math.random()*.4-.2,k=Math.random()*.4-.2;d.rotation.x=S,d.rotation.z=k;const q=280,P=165,i=220,v=2*Math.PI/a;let m=0;const l=new Array(a);o.forEach((u,b)=>{A.load(u.src,x=>{const K=x.image?x.image.width:u.naturalWidth||u.width,_=x.image?x.image.height:u.naturalHeight||u.height,z=K/_,J=P/i,B=new THREE.PlaneGeometry(P,i,64,1),Me=new THREE.ShaderMaterial({uniforms:{uTexture:{value:x},uBend:{value:.0015},uOpacity:{value:0},uImageAspect:{value:new THREE.Vector2(z,1)},uPlaneAspect:{value:new THREE.Vector2(J,1)}},vertexShader:M,fragmentShader:w,transparent:!0,side:THREE.DoubleSide}),I=new THREE.Mesh(B,Me),Q=-v*b+Math.PI,He=Math.sin(Q)*q,Re=Math.cos(Q)*q;I.position.set(He,30,Re),I.rotation.y=Q,I.material.uniforms.uOpacity.value=0,I.scale.set(.7,.7,.7),d.add(I),l[b]=I,m++,m===a&&(l.forEach(Ie=>c.push(Ie)),T())},void 0,x=>{console.error(`âŒ GreÅ¡ka pri uÄitavanju slike ${b}:`,x)})});function f(u){if(u){const b=u.textContent.trim();u.innerHTML=b.split("").map(x=>`<span style="display: inline-block;">${x===" "?"&nbsp;":x}</span>`).join("")}}f(t);const y=t?t.querySelectorAll("span"):[];gsap.set(r,{y:20,opacity:0}),gsap.set(y,{y:200,opacity:0});function T(){const u=gsap.timeline();Oe(.008),c.forEach((z,J)=>{const B=.2+J*.15;u.to(z.material.uniforms.uOpacity,{value:1,duration:.6,ease:"power1.out"},B),u.to(z.scale,{x:1,y:1,z:1,duration:.6,ease:"back.out(1.2)"},B)});const b=.2+(c.length-1)*.15+.6,x=b-1.2;u.to(y,{y:0,opacity:1,duration:.6,stagger:.04,ease:"power2.inOut"},x),u.to(r,{y:0,opacity:1,duration:.6,stagger:.12,ease:"power2.inOut"},x+.3);const K=b,_={value:.008};u.to(_,{value:D,duration:2,ease:"power2.out",onUpdate:()=>{H=_.value},onComplete:()=>{O()}},K)}function O(){const u=d.rotation.x,b=d.rotation.z;gsap.to(d.rotation,{x:u+.03,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1}),gsap.to(d.rotation,{z:b+.025,duration:5.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}let D=.001,N=0,H=D,qe=.015;function Oe(u){H=u}let ae=0,se=0,R=!1,F=0,U=0,$=0,j=!1,Y=0;const le=u=>{R=!0,u.clientX,F=u.clientX,$=u.clientX,U=0,gsap.killTweensOf(d.rotation),Y=H,H=0,j=!0,window.dispatchEvent(new CustomEvent("hero:drag:start")),p.domElement.style.cursor="grabbing"},ce=u=>{if(!R)return;u.preventDefault(),F=u.clientX;const b=F-$;d.rotation.y+=b*9e-4,U=b*9e-4,$=F},de=()=>{if(!R)return;R=!1,p.domElement.style.cursor="grab",window.dispatchEvent(new CustomEvent("hero:drag:end"));const u=U*80;gsap.to(d.rotation,{y:d.rotation.y+u,duration:3,ease:"power2.out"}),setTimeout(()=>{R||gsap.to({speed:0},{speed:Y,duration:1,ease:"power2.inOut",onUpdate:function(){H=this.targets()[0].speed},onComplete:()=>{H=Y,j=!1}})},2500)};p.domElement.addEventListener("mousedown",le),window.addEventListener("mousemove",ce),window.addEventListener("mouseup",de),p.domElement.style.cursor="grab",p.domElement.style.userSelect="none",p.domElement.style.webkitUserSelect="none",p.domElement.style.touchAction="auto";let ue=!0;const G=new IntersectionObserver(u=>{u.forEach(b=>{ue=b.isIntersecting})},{threshold:0,rootMargin:"100px"});G.observe(e);const pe=()=>{ue&&(N+=(H-N)*.15,d.rotation.y+=N,p.render(E,g))};gsap.ticker.add(pe);function me(){const u=s.offsetWidth,b=s.offsetHeight;g.aspect=u/b,g.updateProjectionMatrix(),p.setSize(u,b)}window.addEventListener("resize",me);let V=!1;const Z=()=>{R||j||V||(V=!0,requestAnimationFrame(()=>{const u=window.pageYOffset||document.documentElement.scrollTop,b=Math.abs(u-ae);se=Math.min(b*8e-4,qe),b>.5?(gsap.killTweensOf(d.rotation),H=D+se):H=D,ae=u,V=!1}))};window.removeEventListener("scroll",Z),window.addEventListener("scroll",Z,{passive:!0}),window.addEventListener("barba:before-leave",()=>{gsap.ticker.remove(pe),gsap.killTweensOf(d.rotation),G&&G.disconnect(),p.domElement.removeEventListener("mousedown",le),window.removeEventListener("mousemove",ce),window.removeEventListener("mouseup",de),c.forEach(u=>{u.geometry&&u.geometry.dispose(),u.material&&(u.material.uniforms.uTexture.value&&u.material.uniforms.uTexture.value.dispose(),u.material.dispose())}),p.dispose(),window.removeEventListener("resize",me),window.removeEventListener("scroll",Z)})}window.initHero=Te;document.querySelector(".hero-images-container")&&Te();function te(){if(!document.querySelector('[data-barba-namespace="home"]'))return;const t=document.querySelector(".section.about"),r=document.querySelector(".home-about-title"),n=document.querySelector(".about-scroll");if(!n||!t||!r){console.error("âŒ About Section elementi nisu kompletni");return}gsap.registerPlugin(ScrollTrigger);const o=new SplitType(r,{types:"words,chars"}),a=new SplitType(n,{types:"words,chars"});o.words&&o.words.forEach(w=>{gsap.set(w,{display:"inline-block",whiteSpace:"nowrap"})}),a.words&&a.words.forEach(w=>{gsap.set(w,{display:"inline-block",whiteSpace:"nowrap"})}),o.chars.forEach(w=>{gsap.set(w,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),a.chars.forEach(w=>{gsap.set(w,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})});const s=w=>{w.forEach(A=>{const c=A.textContent,d=document.createElement("span");d.style.display="inline-block",d.textContent=c,A.textContent="",A.appendChild(d),gsap.set(d,{y:"100%",opacity:0})})};s(o.chars),s(a.chars);const E=window.innerWidth<=767,g=o.chars.map(w=>w.querySelector("span")),h=1,p=.015,L=h+(g.length-1)*p-.1,M=gsap.timeline({scrollTrigger:{trigger:t,start:E?"top 60%":"top 85%",end:"top 15%",scrub:1,id:"about-section-reveal"}});M.to(g,{y:0,opacity:1,duration:h,stagger:p,ease:"power2.out"},0),M.to(a.chars.map(w=>w.querySelector("span")),{y:0,opacity:1,duration:1,stagger:.015,ease:"power2.out"},L)}window.initAboutSection=te;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",te):te();function xe(){const e=document.querySelector(".section.highlights"),t=document.querySelector(".highlights-wrapper");if(!e||!t)return;gsap.registerPlugin(ScrollTrigger);const r=t.scrollWidth-e.offsetWidth;gsap.to(t,{x:-r,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:`+=${r}`,scrub:1,pin:!0,anticipatePin:1,invalidateOnRefresh:!0,id:"highlights-horizontal"}});const n=document.querySelectorAll(".highlights-card"),o=window.innerWidth<=767;gsap.set(n,{opacity:0,y:50}),gsap.to(n,{opacity:1,y:0,duration:.6,ease:"power1.inOut",stagger:.2,delay:.1,scrollTrigger:{trigger:".highlights-wrapper",start:"top 80%",toggleActions:"play none none none",id:"highlights-cards"}})}window.initHighlights=xe;xe();function oe(){const e=document.querySelectorAll(".categories-row");if(!document.querySelector(".section.categories")){console.warn("Element .section.categories nije pronaÄ‘en na stranici");return}e.forEach(r=>{r.addEventListener("mouseenter",()=>{gsap.to(e,{opacity:.1,duration:.3,ease:"power2.out"}),gsap.to(r,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(E=>{const g=E.querySelector(".categories-photo");E!==r&&gsap.to(g,{opacity:0,duration:.3,ease:"power2.out"})});const n=r.querySelector(".categories-photo");gsap.to(n,{opacity:1,height:300,duration:.3,ease:"power1.out"});const o=r.querySelector(".cta");gsap.to(o,{opacity:1,duration:.3,ease:"power1.out"});const a=r.querySelector(".title-l"),s=r.querySelector(".cta");a&&createShuffleEffect(a,!1)(),s&&createShuffleEffect(s,!1)()}),r.addEventListener("mouseleave",()=>{gsap.to(e,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(o=>{const a=o.querySelector(".categories-photo");gsap.to(a,{opacity:0,height:0,duration:.3,ease:"power1.out"})});const n=r.querySelector(".cta");gsap.to(n,{opacity:0,duration:.3,ease:"power1.out"})})})}window.initCategories=oe;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.querySelector('[data-barba-namespace="home"]')&&oe()}):document.querySelector('[data-barba-namespace="home"]')&&oe();let W=!1;function ge(){const e=document.querySelector(".category-title");if(e){e.style.opacity="0",e.style.visibility="hidden";const t=document.querySelector(".work-categories-wrapper");t&&(t.style.opacity="0",t.style.visibility="hidden")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ge):ge();async function Ce(){if(W)return;if(W=!0,!document.querySelectorAll(".photo-container").length){W=!1;return}try{let h=function(){const c=window.innerWidth;return c<768?g.mobile:c<992?g.tablet:g.desktop},p=function(c=!1){const d=h();let S=!0,k=1,q=null,P=null;window.shuffledPhotos.forEach((i,v)=>{const m=i.querySelector(".photo");let l=!1,f=d.verticalSpan;m.naturalWidth>0&&m.naturalHeight>0?(l=m.naturalWidth>m.naturalHeight,f=l?d.horizontalSpan:d.verticalSpan):c&&(d.columns,f=d.verticalSpan);let y;if(d.columns===1)y=1;else if(S){do y=d.left[Math.floor(Math.random()*d.left.length)];while(y===q);q=y}else{do y=d.right[Math.floor(Math.random()*d.right.length)];while(y===P);P=y}if(i.style.display="block",i.style.gridColumnStart=y,i.style.gridColumnEnd=y+f,i.style.gridRowStart=k,d.columns===1&&c&&m.naturalHeight===0){const O=(i.offsetWidth||window.innerWidth)*1.33;i.style.minHeight=`${O}px`}S=!S,k++})};var t=h,r=p;const o=Array.from(document.querySelectorAll(".photo-container"));o.forEach(c=>{c.style.opacity="0"}),document.querySelectorAll(".photo").forEach(c=>{c.originalParent=c.parentElement}),o.forEach(c=>{c.style.display="",c.style.gridColumn="",c.style.gridColumnStart="",c.style.gridColumnEnd="",c.style.gridRowStart="",c.style.transform=""});const s=o.slice(0,30);o.slice(30).forEach(c=>{c.style.display="none"}),window.shuffledPhotos=s.sort(()=>Math.random()-.5),window.lastPath=window.location.pathname;const E=5;window.shuffledPhotos.forEach((c,d)=>{const S=c.querySelector(".photo");S&&(d<E?(S.setAttribute("loading","eager"),S.setAttribute("fetchpriority","high")):S.setAttribute("loading","lazy"),S.setAttribute("decoding","async"))});const g={desktop:{columns:12,left:[2,3],right:[8,9],horizontalSpan:3,verticalSpan:2},tablet:{columns:8,left:[2,3],right:[5,6],horizontalSpan:3,verticalSpan:2},mobile:{columns:1,left:[1],right:[1],horizontalSpan:1,verticalSpan:1}};window.isSettingUpGrid||(window.isSettingUpGrid=!0,p(!0),window.isSettingUpGrid=!1);const C=5,L=window.shuffledPhotos.slice(0,C),w=L.map(c=>c.querySelector(".photo")).map(c=>c.complete&&c.naturalWidth>0?Promise.resolve():new Promise(d=>{c.onload=()=>d(),c.onerror=()=>d()}));await Promise.all(w),window.isSettingUpGrid||(window.isSettingUpGrid=!0,p(!1),window.isSettingUpGrid=!1),h().columns===1&&L.forEach(c=>{const d=c.querySelector(".photo");d&&d.naturalHeight>0&&(c.style.minHeight="")});const A=window.shuffledPhotos.slice(C);if(gsap.fromTo(L,{opacity:0,scale:.9,y:50},{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out",stagger:.12,delay:.3}),A.length>0){const c={root:null,rootMargin:"0px",threshold:.2},d=new IntersectionObserver(S=>{S.forEach(k=>{k.isIntersecting&&(gsap.to(k.target,{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out"}),d.unobserve(k.target))})},c);A.forEach(S=>{gsap.set(S,{opacity:0,scale:.9,y:50}),d.observe(S)}),window.workPhotoObserver=d}}finally{W=!1}setTimeout(()=>{re()},100)}let ne=!1;function re(){const e=document.querySelector(".category-title");if(!e||ne)return;ne=!0,gsap.registerPlugin(ScrollTrigger),gsap.set(e,{opacity:0,visibility:"hidden"});const t=new SplitType(e,{types:"chars"});t.chars.forEach(o=>{gsap.set(o,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),t.chars.forEach(o=>{const a=o.textContent,s=document.createElement("span");s.style.display="inline-block",s.textContent=a,o.textContent="",o.appendChild(s),gsap.set(s,{y:"100%",opacity:0})});const r=document.querySelector(".work-categories-wrapper");r&&gsap.set(r,{opacity:0,visibility:"hidden"}),gsap.to(e,{opacity:1,visibility:"visible",duration:0});const n=gsap.timeline();if(n.to(t.chars.map(o=>o.querySelector("span")),{y:0,opacity:1,duration:.8,stagger:.03,ease:"power2.out",delay:.3}),r){const o=Array.from(r.querySelectorAll(".category-link"));o.length>0?(o.forEach(a=>{gsap.set(a,{opacity:0,y:20})}),n.to(r,{opacity:1,visibility:"visible",duration:0},.4),n.fromTo(o,{opacity:0,y:20},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"},.4)):n.to(r,{opacity:1,visibility:"visible",duration:.6,ease:"power2.out"},.4)}}function Le(){const e=document.querySelectorAll(".work-categories-title-wrapper, .work-categories-top-margin");e&&gsap.matchMedia().add("(max-width: 767px)",()=>{gsap.to(e,{scale:.7,opacity:0,scrollTrigger:{trigger:e,start:"top top",end:"+=200",scrub:.5,invalidateOnRefresh:!0}})})}function Ae(){const e=document.querySelector(".section.categories");if(!e)return;gsap.set(e,{opacity:0,y:60});const t=new IntersectionObserver(r=>{r.forEach(n=>{n.isIntersecting&&(gsap.to(e,{opacity:1,y:0,duration:1,ease:"power2.out"}),window.initCategories&&window.initCategories(),t.unobserve(n.target))})},{rootMargin:"-100px",threshold:.1});t.observe(e),window.workCategoriesObserver=t}function Be(){window.workPhotoObserver&&(window.workPhotoObserver.disconnect(),window.workPhotoObserver=null),window.workCategoriesObserver&&(window.workCategoriesObserver.disconnect(),window.workCategoriesObserver=null),ne=!1}window.initWork=Ce;window.initCategoryTitleReveal=re;window.initCategoryTitleAnimation=Le;window.initWorkCategoriesReveal=Ae;window.cleanupWorkPage=Be;function fe(){if(document.querySelector('[data-barba-namespace^="work"]')&&document.querySelectorAll(".photo-container").length>0&&!W){Ce(),re(),Le(),Ae();const t=()=>{window.initPhotoModal?window.initPhotoModal():setTimeout(t,50)};setTimeout(t,100)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",fe):fe();window.photoModalCleanup=null;function Pe(){window.photoModalCleanup&&(window.photoModalCleanup(),window.photoModalCleanup=null);const e=document.querySelector(".modal-photo");if(!e)return;const t=e.querySelector(".modal-photo-container"),r=e.querySelector(".modal-title"),n=e.querySelector(".modal-exif"),o=e.querySelector(".modal-close"),a=e.querySelector('[data-photo-nav="previous"]'),s=e.querySelector('[data-photo-nav="next"]'),E=document.querySelectorAll(".photo");gsap.registerPlugin(Flip);let g=0,h=[],p=null,C=[];function L(i){const m=i.getBoundingClientRect(),l=window.scrollY||document.documentElement.scrollTop,f=m.top+l-100;window.scrollTo({top:f,behavior:"auto"})}E.forEach((i,v)=>{const m=window.shuffledPhotos.find(y=>y.querySelector(".photo")===i),l=window.shuffledPhotos.indexOf(m);h[l]={src:i.getAttribute("src"),title:i.getAttribute("data-title"),exif:i.getAttribute("data-exif"),category:i.getAttribute("data-category"),element:i,placeholder:null};const f=()=>{g=l,p=i,M(h[g])};i.addEventListener("click",f),C.push({element:i,handler:f})});function M(i){window.lenis&&window.lenis.stop(),document.body.style.overflow="hidden";const v=Flip.getState(i.element,{props:"all"}),m=i.element.originalParent,l=document.createElement("div");l.classList.add("photo-placeholder"),l.style.width=i.element.offsetWidth+"px",l.style.height=i.element.offsetHeight+"px",m.insertBefore(l,i.element),i.placeholder=l;const f=Array.from(document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title")).filter(y=>y!==i.element);gsap.to(f,{opacity:0,duration:.3,ease:"power2.inOut"}),t.appendChild(i.element),gsap.set(i.element,{opacity:1}),e.style.display="grid",e.classList.add("active"),e.style.backgroundColor="transparent",r.textContent=i.title,n.textContent=i.exif,gsap.set([r,n,o,a,s],{opacity:0,y:20}),Flip.from(v,{duration:.8,ease:"power2.inOut",absolute:!0,onComplete:()=>{e.classList.contains("active")&&gsap.to(e,{backgroundColor:"var(--_colors---off-white)",duration:.4,ease:"power2.out"}),gsap.to([r,n,o,a,s],{opacity:1,y:0,duration:.4,stagger:.1,ease:"power2.out"})}})}function w(){if(!p)return;gsap.killTweensOf([e,r,n,o,a,s]),gsap.killTweensOf(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title"),window.lenis&&window.lenis.start(),document.body.style.overflow="";const i=h[g],v=i.element,m=document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title");gsap.set(e,{backgroundColor:"transparent"}),gsap.to([r,n,o,a,s],{opacity:0,y:20,duration:.3,ease:"power2.in"});const l=v.originalParent,f=l.getBoundingClientRect(),y=window.scrollY||document.documentElement.scrollTop,T=f.top+y-window.innerHeight/2+f.height/2;window.scrollTo({top:T,behavior:"auto"});const O=Flip.getState(v,{props:"all"});i.placeholder&&l&&(l.insertBefore(v,i.placeholder),i.placeholder.remove(),i.placeholder=null),Flip.from(O,{duration:.8,ease:"power2.inOut",onUpdate:function(){this.progress()>.7&&gsap.to(m,{opacity:1,duration:.3,ease:"power2.out"})},onComplete:()=>{e.classList.remove("active"),e.style.display="none",p=null}})}function A(){const i=document.querySelectorAll(".photo");gsap.killTweensOf(i);let v=g<h.length-1?g+1:0;const m=h[g],l=h[v];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const f=Array.from(document.querySelectorAll(".photo")).filter(O=>O!==l.element);gsap.set(f,{opacity:0});const y=l.element.originalParent,T=document.createElement("div");T.classList.add("photo-placeholder"),T.style.width=l.element.offsetWidth+"px",T.style.height=l.element.offsetHeight+"px",y.insertBefore(T,l.element),l.placeholder=T,L(l.element),t.innerHTML="",t.appendChild(l.element),gsap.set(l.element,{opacity:1,x:"100%",scale:.95,rotation:3}),gsap.to(l.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=l.title,n.textContent=l.exif,p=l.element,g=v}function c(){const i=document.querySelectorAll(".photo");gsap.killTweensOf(i);let v=g>0?g-1:h.length-1;const m=h[g],l=h[v];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const f=Array.from(document.querySelectorAll(".photo")).filter(O=>O!==l.element);gsap.set(f,{opacity:0});const y=l.element.originalParent,T=document.createElement("div");T.classList.add("photo-placeholder"),T.style.width=l.element.offsetWidth+"px",T.style.height=l.element.offsetHeight+"px",y.insertBefore(T,l.element),l.placeholder=T,L(l.element),t.innerHTML="",t.appendChild(l.element),gsap.set(l.element,{opacity:1,x:"-100%",scale:.95,rotation:-3}),gsap.to(l.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=l.title,n.textContent=l.exif,p=l.element,g=v}const d=i=>{e.classList.contains("active")&&(i.key==="Escape"&&w(),i.key==="ArrowRight"&&A(),i.key==="ArrowLeft"&&c())},S=i=>{i.target===e&&w()};document.addEventListener("keydown",d),e.addEventListener("click",S),o.addEventListener("click",w),a.addEventListener("click",c),s.addEventListener("click",A);const k=new Hammer(t);k.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});let q=!1,P=0;k.on("panstart",function(i){q=!0,P=i.center.x,gsap.killTweensOf(p)}),k.on("pan",function(i){if(!q||!p)return;const m=(i.center.x-P)/window.innerWidth*100,f=Math.min(Math.max(m*.5,-50),50),y=Math.abs(f),T=gsap.utils.mapRange(0,50,1,.3)(y),O=gsap.utils.mapRange(0,50,1,0)(y);gsap.set(p,{x:f+"%",rotation:f*.05,scale:T,opacity:O})}),k.on("panend",function(i){if(!q||!p)return;q=!1;const v=Math.abs(i.velocity),m=i.deltaX,l=window.innerWidth*.2;Math.abs(m)>l||v>.5?m<0?A():c():gsap.to(p,{x:"0%",rotation:0,scale:1,opacity:1,duration:.3,ease:"power2.out"})}),window.photoModalCleanup=()=>{C.forEach(({element:i,handler:v})=>{i.removeEventListener("click",v)}),document.removeEventListener("keydown",d),e.removeEventListener("click",S),o.removeEventListener("click",w),a.removeEventListener("click",c),s.removeEventListener("click",A),k&&k.destroy(),e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="none",window.lenis&&window.lenis.start(),document.body.style.overflow="")}}window.initPhotoModal=Pe;function ie(){if(!document.querySelector(".section.about-page"))return;gsap.registerPlugin(ScrollTrigger);const t=document.createElement("style");t.textContent=`
    .about-page-title {
      overflow: visible;
    }
    
    .about-page-title .line {
      display: block;
      opacity: 0;
    }
  `,document.head.appendChild(t);const r=document.querySelector(".about-page-mobile-img"),n=document.querySelector(".about-page-title");document.querySelector(".about-page-paragraph");const o=document.querySelector("#w-node-_5cfb6280-6a33-c948-6914-d1d14a02033e-e0820647"),a=document.querySelector("#w-node-_8ff28dca-4908-092a-a93e-64674276b761-e0820647"),s=document.querySelector("#w-node-d37b0f9a-3049-7721-1f0b-b2dfa6b25604-e0820647"),E=document.querySelector("#w-node-a792f731-c023-e6a4-a3a2-3b0f75706c28-e0820647"),g=document.querySelector("#w-node-_38752304-f930-7aec-55b4-e5bb69d7261b-e0820647"),h=document.querySelector("#w-node-af8686f0-0eff-8a7c-0ed7-beca4d3b4ae5-e0820647"),p=document.querySelector("#w-node-f5866f73-1277-b3c6-9637-905ed2896c1d-e0820647"),C=document.querySelector("#w-node-_26bcf290-3970-d3ae-4c5a-8a87562b3b8f-e0820647"),L=document.querySelector("#w-node-_959dd736-48e6-8ca1-a499-ecdb1597fdfc-e0820647"),M=document.querySelector("#w-node-_81d87156-36a4-f557-ac99-5a50eaa2aede-e0820647"),w=document.querySelectorAll(".divider"),A=[],c=gsap.timeline();r&&(gsap.set(r,{clipPath:"inset(0% 0% 100% 0%)"}),c.to(r,{clipPath:"inset(0% 0% 0% 0%)",duration:1.2,ease:"expo.inOut"},0));let d=0,S=.6,k=0;if(n){const i=new SplitType(n,{types:"lines"});if(A.push(i),i.lines&&i.lines.length>0){const v=i.lines;gsap.set(v,{opacity:0,y:20}),v.forEach((l,f)=>{c.to(l,{opacity:1,y:0,duration:.4,ease:"power2.out"},S+f*.15)}),d=S+(v.length-1)*.15+.4;const m=d-S;k=S+m*.7-.15,c.call(()=>{},null,d)}}const q=[{divider:w[0],title:o,content:g},{divider:w[1],title:a,content:h},{divider:w[2],title:s,content:p},{divider:w[3],title:E,content:C},{divider:w[4],title:L,content:M}];let P=k;q.forEach((i,v)=>{if(!i.divider)return;if(gsap.set(i.divider,{width:0,opacity:0}),i.title&&gsap.set(i.title,{opacity:0,y:20}),i.content&&gsap.set(i.content,{opacity:0,y:20}),i.divider.getBoundingClientRect().top<window.innerHeight){c.to(i.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},P),i.title&&c.to(i.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},P+.15),i.content&&c.to(i.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},P+.25);const y=P+.25+.6-P;P=P+y*.7}else ScrollTrigger.create({trigger:i.divider,start:"top 92%",once:!0,onEnter:()=>{const f=gsap.timeline();f.to(i.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},0),i.title&&f.to(i.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},.15),i.content&&f.to(i.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},.25)}})}),typeof barba<"u"&&barba.hooks.beforeLeave(()=>{A.forEach(i=>{i&&i.revert&&i.revert()}),ScrollTrigger.getAll().forEach(i=>i.kill()),t&&t.parentNode&&t.parentNode.removeChild(t)})}window.initAbout=ie;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ie):ie();ze();window.initPhotoModal=Pe;
