function Le(){console.log("üìç A≈æuriranje navigacije s trenutaƒçnim href-om");const e=document.querySelectorAll(".nav-link"),o=window.location.pathname;console.log(`üîç Trenutni URL path: ${o}`),e.forEach(a=>{const n=a.getAttribute("href");console.log(`üìå Provjeravam link: ${n}`),o===n||o==="/"&&n==="/"?(console.log(`‚úÖ Link postavljen kao aktivan: ${n}`),a.setAttribute("aria-current","page"),a.classList.add("current","w--current")):(a.removeAttribute("aria-current"),a.classList.remove("current","w--current"))}),console.log("‚úÖ Navigacija uspje≈°no a≈æurirana")}function Ce(e){console.log(`üßπ Zapoƒçinjem ƒçi≈°ƒáenje za namespace: ${e}`),e.startsWith("work")&&window.photoModalCleanup&&(console.log("üñºÔ∏è Pozivam Photo Modal cleanup"),window.photoModalCleanup()),console.log("üîÑ Uklanjam ScrollTrigger instance"),ScrollTrigger.getAll().forEach(a=>{console.log(`  - Uklanjam trigger: ${a.vars.id||"bez ID-a"}`),a.kill()}),console.log("üîÑ Vraƒáam SplitType instance u poƒçetno stanje");const o=document.querySelectorAll(".split-type");console.log(`  - Pronaƒëeno ${o.length} SplitType elemenata`),o.forEach(a=>{a.splitType&&(console.log(`  - Vraƒáam SplitType u poƒçetno stanje za: ${a.className}`),a.splitType.revert())}),console.log(`‚úÖ ƒåi≈°ƒáenje za ${e} uspje≈°no zavr≈°eno`)}function J(e){var o,a,n,i,r,m,y,g;switch(console.log(`üèóÔ∏è Inicijalizacija specifiƒçnih funkcija za stranicu: ${e}`),e){case"home":console.log("üè† Uƒçitavanje HOME komponenti:"),console.log("  - Inicijalizacija Hero sekcije"),(o=window.initHero)==null||o.call(window),console.log("  - Inicijalizacija About sekcije"),(a=window.initAboutSection)==null||a.call(window),console.log("  - Inicijalizacija Highlights sekcije"),(n=window.initHighlights)==null||n.call(window),console.log("  - Inicijalizacija Categories sekcije"),(i=window.initCategories)==null||i.call(window);break;case"work":case"work-abstract":case"work-nature":case"work-people":case"work-products":case"work-architecture":console.log("üíº Uƒçitavanje WORK komponenti:"),console.log("  - Inicijalizacija Work sekcije"),(r=window.initWork)==null||r.call(window),console.log("  - Inicijalizacija animacije naslova kategorije"),(m=window.initCategoryTitleAnimation)==null||m.call(window),console.log("  - Inicijalizacija Photo modala"),console.log("üîç DEBUG: typeof window.initPhotoModal =",typeof window.initPhotoModal),console.log("üîç DEBUG: window.initPhotoModal =",window.initPhotoModal),(y=window.initPhotoModal)==null||y.call(window),console.log("‚úÖ initPhotoModal?.() pozvan");break;case"about":console.log("üë§ Uƒçitavanje ABOUT komponenti:"),console.log("  - Inicijalizacija About sekcije"),console.log("üîç DEBUG: typeof window.initAbout =",typeof window.initAbout),console.log("üîç DEBUG: window.initAbout =",window.initAbout),console.log("üîç DEBUG: Pozivam window.initAbout?.()..."),(g=window.initAbout)==null||g.call(window),console.log("üîç DEBUG: window.initAbout?.() zavr≈°en");break;default:console.log(`‚ö†Ô∏è Nepoznati namespace: ${e}, ne inicijaliziram specifiƒçne funkcije`)}console.log(`‚úÖ Inicijalizacija stranice ${e} zavr≈°ena`)}function Ae(){console.log("üîÑ Zapoƒçinjem inicijalizaciju Barba.js"),console.log("üìã Postavljam history.scrollRestoration na 'manual'"),"scrollRestoration"in history&&(history.scrollRestoration="manual"),console.log("‚öôÔ∏è Konfiguriram Barba.js tranzicije i namespace-ove"),barba.hooks.beforeEnter(()=>{console.log("üåì [Global Hook] Primjena Dark Mode prije svake tranzicije"),localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"))}),barba.init({transitions:[{name:"fade",leave(e){return console.log(`üö™ LEAVE: Napu≈°tam stranicu ${e.current.namespace}`),console.log(`  - URL: ${e.current.url.path}`),window.lenis&&window.lenis.stop(),console.log("üßπ ƒåi≈°ƒáenje page-specific funkcija"),Ce(e.current.namespace),console.log("üåì Odr≈æavam Dark Mode postavke tijekom izlazne tranzicije"),localStorage.getItem("dark-mode")==="enabled"&&(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")),console.log("  - Primjenjujem izlaznu animaciju (opacity: 0)"),gsap.to(e.current.container,{opacity:0,duration:.3})},beforeEnter(e){console.log(`üîë BEFORE ENTER: Pripremam ulazak na stranicu ${e.next.namespace}`),console.log(`  - URL: ${e.next.url.path}`),console.log("üåì Primjena Dark Mode postavki iz localStorage-a (PRIJE prikaza)"),localStorage.getItem("dark-mode")==="enabled"?(console.log("  - Dark Mode aktivan - dodajem ui-dark-mode klasu na html i body"),document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(console.log("  - Dark Mode neaktivan - uklanjam ui-dark-mode klasu"),document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode")),window.lenis?window.lenis.scrollTo(0,{immediate:!0,force:!0}):window.scrollTo(0,0)},enter(e){return console.log(`üö™ ENTER: Ulazim na stranicu ${e.next.namespace}`),console.log(`  - URL: ${e.next.url.path}`),console.log("  - Primjenjujem ulaznu animaciju (opacity: 1)"),gsap.to(e.next.container,{opacity:1,duration:.3})},after(e){console.log(`üé≠ AFTER: Tranzicija na ${e.next.namespace} zavr≈°ena`),console.log(`  - Pozivam inicijalizaciju specifiƒçnih funkcija za ${e.next.namespace}`),J(e.next.namespace),console.log("  - A≈æuriram status navigacije"),Le(),requestAnimationFrame(()=>{window.lenis&&window.lenis.start(),ScrollTrigger.refresh(!0)})}}],views:[{namespace:"home"},{namespace:"work"},{namespace:"about"},{namespace:"work-abstract"},{namespace:"work-nature"},{namespace:"work-people"},{namespace:"work-products"},{namespace:"work-architecture"}]}),console.log("‚úÖ Barba.js uspje≈°no inicijaliziran")}window.addEventListener("beforeunload",()=>{console.log("üîÑ beforeunload: Resetiram scroll prije napu≈°tanja stranice"),window.scrollTo(0,0)});console.log("üöÄ Pokreƒáem Barba.js inicijalizaciju");Ae();console.log("‚úÖ Barba.js konfiguracija kompletna");var ce;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{var o;const e=(o=document.querySelector('[data-barba="container"]'))==null?void 0:o.getAttribute("data-barba-namespace");e&&(console.log(`üèÅ Prvi load - inicijaliziram ${e} stranicu`),J(e))});else{const e=(ce=document.querySelector('[data-barba="container"]'))==null?void 0:ce.getAttribute("data-barba-namespace");e&&(console.log(`üèÅ Prvi load - inicijaliziram ${e} stranicu`),J(e))}function de(){const e=new Lenis({lerp:.1,wheelMultiplier:1,smoothWheel:!0,smoothTouch:!1,infinite:!1});window.lenis=e,e.on("scroll",ScrollTrigger.update),gsap.ticker.add(o=>{e.raf(o*1e3)}),gsap.ticker.lagSmoothing(0)}window.initLenis=de;de();function ue(){const e=document.body,o=document.querySelector(".nav-theme-switcher");localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode")),o&&o.addEventListener("click",()=>{e.classList.contains("ui-dark-mode")?(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode"),console.log("Removed .ui-dark-mode from html and body"),localStorage.setItem("dark-mode","disabled")):(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode"),console.log("Added .ui-dark-mode to html and body"),localStorage.setItem("dark-mode","enabled"))})}window.initDarkMode=ue;ue();function me(){const e=document.querySelector(".section.footer"),o=e==null?void 0:e.previousElementSibling;gsap.registerPlugin(ScrollTrigger),o&&(gsap.to(o,{scrollTrigger:{trigger:o,start:"top top",end:()=>`+=${window.innerHeight*.5}`,pin:!1,scrub:!0,id:"footer-prev-section"}}),gsap.to(e,{scrollTrigger:{trigger:o,start:()=>`bottom+=${window.innerHeight*.5} bottom`,end:"bottom bottom",scrub:!0,id:"footer-main"}}),gsap.set(o,{zIndex:1}))}window.initFooter=me;me();function ge(e,o=!0){e.dataset.originalText||(e.dataset.originalText=e.textContent);const a=e.dataset.originalText;e.style.position="relative",e.style.zIndex="100000";let n;e.querySelector(".shuffle-text")?n=e.querySelector(".shuffle-text"):(n=document.createElement("span"),n.className="shuffle-text",n.textContent=a,e.textContent="",e.appendChild(n)),n.style.pointerEvents="none";let i=!1,r;const m=S=>{const u=S.split("");for(let x=u.length-1;x>0;x--){const P=Math.floor(Math.random()*(x+1));[u[x],u[P]]=[u[P],u[x]]}return u.join("")},y=()=>{r&&(clearInterval(r),r=null),n.textContent=a,i=!1},g=()=>{if("ontouchstart"in window||navigator.maxTouchPoints>0||i)return;i=!0;let S=0;r&&clearInterval(r),r=setInterval(()=>{S<3?(n.textContent=m(a),S++):(n.textContent=a,clearInterval(r),r=null,i=!1)},100)};return o&&("ontouchstart"in window||navigator.maxTouchPoints>0||e.addEventListener("mouseenter",g),e.addEventListener("click",function(u){y()})),g}function pe(){document.querySelectorAll(".link, .cta").forEach(e=>{ge(e,!0)})}window.createShuffleEffect=ge;window.initLinksHover=pe;pe();function fe(){const e=window.navigator.userAgent,o=!!e.match(/iPad/i)||!!e.match(/iPhone/i),a=!!e.match(/WebKit/i);return o&&a&&!e.match(/CriOS/i)&&!e.match(/FxiOS/i)}function ze(){if(!fe())return;document.body.addEventListener("click",function(n){const i=n.target.closest("a, button");i&&(i.style.transition="opacity 0.2s ease-out",i.style.opacity="0.5",setTimeout(()=>{i.style.opacity="1"},300))});function e(n){var i=n.tagName.toLowerCase(),r=n.dataset.bind,m=r&&r.indexOf("click")>-1||i=="a"||i=="button";return m}var o={touchend:function(n,i){i.dataset._clicked_="",i.dataset._mousemove_="0",i.dataset._timeOutId_=""},mouseover:function(n){n.preventDefault()},mousemove:function(n,i){n.preventDefault();var r=+(i.dataset._mousemove_||"0");if(r=r+1,console.log("mousemoves: "+r),i.dataset._mousemove_=r,r>1&&!i.dataset._timeOutId_){var m=setTimeout(function(){console.log("double mousemove click fired"),i.click()},80);i.dataset._timeOutId_=m}},click:function(n,i){if(i.dataset._clicked_){n.isTrusted&&(console.log("prevented doubleclick"),n.preventDefault());return}i.dataset._timeOutId_&&(console.log("cleared timeout"),clearTimeout(+i.dataset._timeOutId_)),i.dataset._clicked_="true"}};function a(n){var i=n.target;if(i&&i.click&&i.tagName&&i.dataset&&e(i)){var r=n.type;console.log(r,i),o[r]&&o[r](n,i)}}document.addEventListener("touchend",a,!0),document.addEventListener("mouseover",a,!0),document.addEventListener("mousemove",a,!0),document.addEventListener("click",a,!0)}function he(){fe()&&ze()}window.initIosSafariFix=he;he();const W={enabled:!1,logs:[],lastScrollY:0,lastTimestamp:0,freezeThreshold:100,init(){this.enabled&&(console.log("üîç ScrollDebugger aktiviran"),window.lenis&&window.lenis.on("scroll",e=>{this.logScroll("LENIS",e)}),window.ScrollTrigger&&(ScrollTrigger.addEventListener("refresh",()=>{console.log("üîÑ ScrollTrigger REFRESH event")}),ScrollTrigger.addEventListener("scrollStart",()=>{console.log("‚ñ∂Ô∏è ScrollTrigger SCROLL START")}),ScrollTrigger.addEventListener("scrollEnd",()=>{console.log("‚è∏Ô∏è ScrollTrigger SCROLL END")})),this.startRAFMonitoring(),this.trackScrollDirection(),console.log("‚úÖ ScrollDebugger setup complete"))},logScroll(e,o){var m;const a=performance.now(),n=a-this.lastTimestamp,i=o.scroll-this.lastScrollY,r=i>0?"‚¨áÔ∏è DOWN":"‚¨ÜÔ∏è UP";n>this.freezeThreshold&&this.lastTimestamp>0&&console.warn(`üö® FREEZE DETECTED! ${n.toFixed(2)}ms gap`,{scrollPosition:o.scroll,direction:r,gap:`${n.toFixed(2)}ms`,scrollDelta:i}),Math.abs(i)>1&&console.log(`üìú ${e} ${r}`,{scroll:o.scroll.toFixed(2),velocity:((m=o.velocity)==null?void 0:m.toFixed(2))||"N/A",delta:i.toFixed(2),time:n.toFixed(2)+"ms"}),this.lastScrollY=o.scroll,this.lastTimestamp=a},startRAFMonitoring(){let e=performance.now(),o=0;const a=n=>{var r;const i=n-e;i>32&&console.warn(`‚è±Ô∏è SLOW FRAME: ${i.toFixed(2)}ms (${(1e3/i).toFixed(1)}fps)`,{framesSinceLastLog:o,scrollY:((r=window.lenis)==null?void 0:r.scroll)||window.scrollY}),o++,e=n,requestAnimationFrame(a)};requestAnimationFrame(a)},trackScrollDirection(){let e=null;const o=()=>{var i;const a=((i=window.lenis)==null?void 0:i.scroll)||window.scrollY,n=a>this.lastScrollY?"down":"up";n!==e&&e!==null&&console.log(`üîÑ DIRECTION CHANGE: ${e} ‚Üí ${n}`,{scrollY:a.toFixed(2),activeScrollTriggers:ScrollTrigger.getAll().length}),e=n,requestAnimationFrame(o)};requestAnimationFrame(o)},logScrollTriggers(){const e=ScrollTrigger.getAll();console.log(`üìä Active ScrollTriggers: ${e.length}`),e.forEach(o=>{console.log(`  - ${o.vars.id||"unnamed"}`,{start:o.start,end:o.end,progress:o.progress.toFixed(2),isActive:o.isActive})})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>W.init()):W.init();window.ScrollDebugger=W;document.addEventListener("keydown",e=>{var o,a,n;(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(console.log("üîç === SCROLL DEBUG DUMP ==="),W.logScrollTriggers(),console.log("Lenis state:",{scroll:(o=window.lenis)==null?void 0:o.scroll,velocity:(a=window.lenis)==null?void 0:a.velocity,direction:(n=window.lenis)==null?void 0:n.direction}),console.log("========================="))});function Me(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){console.log("üñ±Ô∏è Touch device detektiran - custom cursor onemoguƒáen");return}const o=document.createElement("div");o.id="custom-cursor",o.style.cssText=`
    position: fixed;
    width: 56px;
    height: 32px;
    border-radius: 999px;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
    background-color: #ffffff;
    mix-blend-mode: difference;
    opacity: 0;
    display: none;
  `,document.body.appendChild(o);let a=window.innerWidth/2,n=window.innerHeight/2;const i=g=>{a=g.clientX,n=g.clientY,o.style.left=`${a}px`,o.style.top=`${n}px`},r=()=>{o.style.display="block",setTimeout(()=>{o.style.opacity="1"},10)},m=()=>{o.style.opacity="0",setTimeout(()=>{o.style.display="none"},200)};window.addEventListener("hero:drag:start",r),window.addEventListener("hero:drag:end",m);const y=g=>{i(g)};return window.addEventListener("mousemove",y),()=>{o.remove(),window.removeEventListener("mousemove",y),window.removeEventListener("hero:drag:start",r),window.removeEventListener("hero:drag:end",m)}}function we(){console.log("üé® HERO.JS ENABLED - testiranje sa optimizacijama");const e=document.querySelector(".section.hero"),o=document.querySelector(".hero-title"),a=document.querySelectorAll(".hero-footer");if(!e){console.error("‚ùå Hero sekcija nije pronaƒëena!");return}a.forEach(s=>{s.style.position="relative",s.style.zIndex="10",s.style.pointerEvents="auto",s.querySelectorAll('a, button, [role="button"]').forEach(A=>{A.style.position="relative",A.style.zIndex="11",A.style.pointerEvents="auto"})});const n=document.querySelector(".hero-images-wrapper");if(!n){console.warn("Hero wrapper nije pronaƒëen!");return}const i=Array.from(document.querySelectorAll(".hero-image")),r=i.length;if(console.log(`‚úÖ Pronaƒëeno ${r} slika u CMS-u (bez duplikata)`),r===0){console.warn("‚ö†Ô∏è Nema slika za prikaz!");return}const m=document.querySelector(".hero-images-container");if(typeof THREE>"u"){console.error("‚ùå Three.js nije uƒçitan! Provjerite Webflow Footer Code.");return}console.log("üé® Pokreƒáem 3D Cylinder Carousel..."),i.forEach(s=>{s.style.display="none"}),n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.pointerEvents="auto",m.innerHTML="",m.style.position="relative",m.style.width="100%",m.style.height="100%",m.style.overflow="hidden",m.style.pointerEvents="auto";const y=new THREE.Scene,g=new THREE.PerspectiveCamera(40,m.offsetWidth/m.offsetHeight,.1,3e3);g.position.z=900;const S=window.innerWidth<=768;g.position.y=S?-50:0;const u=new THREE.WebGLRenderer({alpha:!0,antialias:!0});u.setSize(m.offsetWidth,m.offsetHeight),u.setPixelRatio(Math.min(window.devicePixelRatio,2)),u.setClearColor(0,0),u.domElement.style.position="absolute",u.domElement.style.top="0",u.domElement.style.left="0",u.domElement.style.width="100%",u.domElement.style.height="100%",u.domElement.style.zIndex="1",m.appendChild(u.domElement),console.log("üé® Canvas kreiran i dodan - pointer events OMOGUƒÜENI!");const x=new THREE.AmbientLight(16777215,.6);y.add(x);const P=new THREE.DirectionalLight(16777215,.4);P.position.set(0,500,800),y.add(P);const z=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // ≈†alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,d=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vec4 texColor = texture2D(uTexture, vUv);
      
      // Shadow na rubovima za nagla≈°avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `,k=new THREE.TextureLoader,f=[],v=new THREE.Group;y.add(v);const L=Math.random()*.4-.2,E=Math.random()*.4-.2;v.rotation.x=L,v.rotation.z=E,console.log(`üé≤ Random tilt: X=${(L*180/Math.PI).toFixed(1)}¬∞, Z=${(E*180/Math.PI).toFixed(1)}¬∞`);const C=280,b=165,t=185,p=2*Math.PI/r,c=2*Math.PI*C,l=c/r,h=l-b;console.log(`üìè Obim: ${c.toFixed(0)}px, Prostor: ${l.toFixed(0)}px, Slika: ${b}px, Razmak: ${h.toFixed(0)}px`),console.log(`üì∏ Kreiram 3D cylinder carousel s ${r} slika (PO REDU iz CMS-a)...`);let T=0;const j=new Array(r);i.forEach((s,w)=>{k.load(s.src,A=>{const D=new THREE.PlaneGeometry(b,t,64,1),$=new THREE.ShaderMaterial({uniforms:{uTexture:{value:A},uBend:{value:.0015},uOpacity:{value:0}},vertexShader:z,fragmentShader:d,transparent:!0,side:THREE.DoubleSide}),I=new THREE.Mesh(D,$),K=-p*w+Math.PI,je=Math.sin(K)*C,xe=Math.cos(K)*C;I.position.set(je,30,xe),I.rotation.y=K,I.material.uniforms.uOpacity.value=0,I.scale.set(.7,.7,.7),v.add(I),j[w]=I,T++,console.log(`‚úì Uƒçitana slika ${T}/${r} (index: ${w})`),T===r&&(j.forEach(Pe=>f.push(Pe)),console.log("‚úÖ Sve slike uƒçitane PO REDU iz CMS-a!"),be())},void 0,A=>{console.error(`‚ùå Gre≈°ka pri uƒçitavanju slike ${w}:`,A)})});function M(s){if(s){const w=s.textContent.trim();s.innerHTML=w.split("").map(A=>`<span style="display: inline-block;">${A===" "?"&nbsp;":A}</span>`).join("")}}M(o);const oe=o?o.querySelectorAll("span"):[];gsap.set(a,{y:20,opacity:0}),gsap.set(oe,{y:200,opacity:0});function be(){console.log("üé¨ Pokreƒáem jednostavnu animaciju...");const s=gsap.timeline();s.to(oe,{y:0,opacity:1,duration:.3,stagger:.03,ease:"power3.out"},0),s.to(a,{y:0,opacity:1,duration:.4,stagger:.1,ease:"power3.out"},.2),Te(.008),console.log("üîÑ Carousel rotacija pokrenuta za reveal!"),f.forEach((D,$)=>{const I=.2+$*.15;s.to(D.material.uniforms.uOpacity,{value:1,duration:.6,ease:"power1.out",onComplete:()=>{console.log(`‚úì Slika ${$+1}/${f.length} se pojavila`)}},I),s.to(D.scale,{x:1,y:1,z:1,duration:.6,ease:"back.out(1.2)"},I)});const w=.2+(f.length-1)*.15+.6,A={value:.008};s.to(A,{value:q,duration:2,ease:"power2.out",onUpdate:()=>{R=A.value},onComplete:()=>{console.log("‚ú® Sve fotke stigle! Default brzina: 0.001 (scroll ga ubrzava 1:1, drag radi!)"),ke()}},w)}function ke(){console.log("üåä Pokreƒáem breathing efekt - carousel se lagano ljulja!");const s=v.rotation.x,w=v.rotation.z;gsap.to(v.rotation,{x:s+.03,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1}),gsap.to(v.rotation,{z:w+.025,duration:5.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}let q=.001,U=0,R=q,Ee=.015;function Te(s){const w=s;R=w,console.log(`üîÑ Carousel rotacija postavljena na ${w.toFixed(4)} rad/frame`)}let te=0,ne=0,H=!1,O=0,B=0,N=0,_=!1,G=0;const ie=s=>{H=!0,s.clientX,O=s.clientX,N=s.clientX,B=0,gsap.killTweensOf(v.rotation),G=R,R=0,_=!0,window.dispatchEvent(new CustomEvent("hero:drag:start")),u.domElement.style.cursor="grabbing",console.log("üñ±Ô∏è Drag zapoƒçeo")},ae=s=>{if(!H)return;s.preventDefault(),O=s.clientX;const w=O-N;v.rotation.y+=w*9e-4,B=w*9e-4,N=O},re=()=>{if(!H)return;H=!1,u.domElement.style.cursor="grab",window.dispatchEvent(new CustomEvent("hero:drag:end"));const s=B*80;gsap.to(v.rotation,{y:v.rotation.y+s,duration:3,ease:"power2.out"}),setTimeout(()=>{H||gsap.to({speed:0},{speed:G,duration:1,ease:"power2.inOut",onUpdate:function(){R=this.targets()[0].speed},onComplete:()=>{R=G,_=!1,console.log("üîÑ Automatska rotacija nastavljena")}})},2500),console.log("üñ±Ô∏è Drag zavr≈°io, inertia:",s)};u.domElement.addEventListener("mousedown",ie),window.addEventListener("mousemove",ae),window.addEventListener("mouseup",re),u.domElement.style.cursor="grab",u.domElement.style.userSelect="none",u.domElement.style.webkitUserSelect="none",u.domElement.style.touchAction="auto",console.log("üñ±Ô∏è Mouse drag aktiviran (desktop), touch scroll omoguƒáen (mobitel/tablet)");let X=!0;const V=new IntersectionObserver(s=>{s.forEach(w=>{X=w.isIntersecting,console.log(X?"‚ñ∂Ô∏è Hero sekcija u viewportu - nastavljam rendering":"üõë Hero sekcija izvan viewporta - pauziran rendering")})},{threshold:0,rootMargin:"100px"});V.observe(e);const le=()=>{X&&(U+=(R-U)*.15,v.rotation.y+=U,u.render(y,g))};gsap.ticker.add(le),console.log("‚úÖ Hero rendering integriran sa GSAP ticker-om (sinkroniziran sa Lenis-om)");function se(){const s=m.offsetWidth,w=m.offsetHeight;g.aspect=s/w,g.updateProjectionMatrix(),u.setSize(s,w)}window.addEventListener("resize",se);let Y=!1;const Z=()=>{H||_||Y||(Y=!0,requestAnimationFrame(()=>{const s=window.pageYOffset||document.documentElement.scrollTop,w=Math.abs(s-te);ne=Math.min(w*8e-4,Ee),w>.5?(gsap.killTweensOf(v.rotation),R=q+ne):R=q,te=s,Y=!1}))};window.removeEventListener("scroll",Z),window.addEventListener("scroll",Z,{passive:!0}),window.addEventListener("barba:before-leave",()=>{console.log("üßπ ƒåistim Three.js resurse..."),gsap.ticker.remove(le),console.log("üõë Hero ticker callback uklonjen"),gsap.killTweensOf(v.rotation),V&&V.disconnect(),u.domElement.removeEventListener("mousedown",ie),window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",re),f.forEach(s=>{s.geometry&&s.geometry.dispose(),s.material&&(s.material.uniforms.uTexture.value&&s.material.uniforms.uTexture.value.dispose(),s.material.dispose())}),u.dispose(),window.removeEventListener("resize",se),window.removeEventListener("scroll",Z)}),console.log("‚úÖ 3D Cylinder Carousel spreman!")}window.initHero=we;document.querySelector(".hero-images-container")&&we();function Q(){console.log("‚ö†Ô∏è about-section.js PRIVREMENO ISKLJUƒåEN")}window.initAboutSection=Q;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Q):Q();function ve(){const e=document.querySelector(".section.highlights"),o=document.querySelector(".highlights-wrapper");if(!e||!o)return;gsap.registerPlugin(ScrollTrigger);const a=o.scrollWidth-e.offsetWidth;gsap.to(o,{x:-a,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:`+=${a}`,scrub:1,pin:!0,anticipatePin:1,invalidateOnRefresh:!0,id:"highlights-horizontal"}});const n=document.querySelectorAll(".highlights-card"),i=window.innerWidth<=767;gsap.set(n,{opacity:0,y:50}),gsap.to(n,{opacity:1,y:0,duration:.6,ease:"power1.inOut",stagger:.2,scrollTrigger:{trigger:".highlights-wrapper",start:"top 80%",toggleActions:"play none none none",id:"highlights-cards"}})}window.initHighlights=ve;ve();function ye(){const e=document.querySelectorAll(".categories-row");if(!document.querySelector(".section.categories")){console.warn("Element .section.categories nije pronaƒëen na stranici");return}e.forEach(a=>{a.addEventListener("mouseenter",()=>{gsap.to(e,{opacity:.1,duration:.3,ease:"power2.out"}),gsap.to(a,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(y=>{const g=y.querySelector(".categories-photo");y!==a&&gsap.to(g,{opacity:0,duration:.3,ease:"power2.out"})});const n=a.querySelector(".categories-photo");gsap.to(n,{opacity:1,height:300,duration:.3,ease:"power1.out"});const i=a.querySelector(".cta");gsap.to(i,{opacity:1,duration:.3,ease:"power1.out"});const r=a.querySelector(".title-l"),m=a.querySelector(".cta");r&&createShuffleEffect(r,!1)(),m&&createShuffleEffect(m,!1)()}),a.addEventListener("mouseleave",()=>{gsap.to(e,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(i=>{const r=i.querySelector(".categories-photo");gsap.to(r,{opacity:0,height:0,duration:.3,ease:"power1.out"})});const n=a.querySelector(".cta");gsap.to(n,{opacity:0,duration:.3,ease:"power1.out"})})})}window.initCategories=ye;ye();let F=!1;async function Re(){if(console.log("üîç initWork() POZVAN!"),F){console.log("‚ö†Ô∏è initWork() veƒá se izvr≈°ava, preskaƒçem");return}F=!0;const e=document.querySelectorAll(".photo-container");if(console.log("üîç Pronaƒëeno photo containers:",e.length),!e.length){console.log("‚ö†Ô∏è Nema photo containers - nije work page, izlazim"),F=!1;return}console.log("‚úÖ Inicijaliziram Work page grid!");try{let g=function(){const d=window.innerWidth;return d<768?y.mobile:d<992?y.tablet:y.desktop},S=function(){const d=g();let k=!0,f=1,v=null,L=null;window.shuffledPhotos.forEach((E,C)=>{const b=E.querySelector(".photo"),t=b.naturalWidth>b.naturalHeight,p=t?d.horizontalSpan:d.verticalSpan;C<3&&console.log(`üì∏ Foto ${C}: naturalWidth=${b.naturalWidth}, naturalHeight=${b.naturalHeight}, isHorizontal=${t}`);let c;if(d.columns===1)c=1;else if(k){do c=d.left[Math.floor(Math.random()*d.left.length)];while(c===v);v=c}else{do c=d.right[Math.floor(Math.random()*d.right.length)];while(c===L);L=c}E.style.display="block",E.style.gridColumnStart=c,E.style.gridColumnEnd=c+p,E.style.gridRowStart=f,k=!k,f++}),console.log(`üß™ setupGrid() ZAVR≈†EN - postavio ${window.shuffledPhotos.length} containera`)};var o=g,a=S;document.querySelectorAll(".photo").forEach(d=>{d.originalParent=d.parentElement});const i=30,r=Array.from(document.querySelectorAll(".photo-container"));console.log("üîç Ukupno photo containers:",r.length),r.forEach((d,k)=>{const f=d.querySelector(".photo");f&&(k<6?(f.setAttribute("loading","eager"),f.setAttribute("fetchpriority","high")):f.setAttribute("loading","lazy"),f.setAttribute("decoding","async"))}),r.forEach(d=>{d.style.display="",d.style.gridColumn="",d.style.gridColumnStart="",d.style.gridColumnEnd="",d.style.gridRowStart="",d.style.transform=""}),console.log("‚úÖ Reset svih photo containers");const m=r.slice(0,i);r.slice(i).forEach(d=>{d.style.display="none"}),console.log(`üì∏ Prikazujem prvih ${i} fotki, sakrivam ${r.length-i}`),console.log("üîÄ Shuffleam fotke (NOVI DOM elementi nakon Barba tranzicije)"),window.shuffledPhotos=m.sort(()=>Math.random()-.5),window.lastPath=window.location.pathname;const y={desktop:{columns:12,left:[2,3],right:[8,9],horizontalSpan:3,verticalSpan:2},tablet:{columns:8,left:[2,3],right:[5,6],horizontalSpan:3,verticalSpan:2},mobile:{columns:1,left:[1],right:[1],horizontalSpan:1,verticalSpan:1}},x=window.shuffledPhotos.map(d=>d.querySelector(".photo")).map(d=>d.complete&&d.naturalWidth>0?Promise.resolve():new Promise(k=>{d.onload=()=>k(),d.onerror=()=>k()}));await Promise.all(x),console.log("‚úÖ Sve slike uƒçitane, postavljam grid"),window.isSettingUpGrid||(window.isSettingUpGrid=!0,S(),window.isSettingUpGrid=!1);const P=window.shuffledPhotos[0],z=document.querySelector(".grid.work");console.log("üß™ TEST: Prvi container gridColumnStart =",P.style.gridColumnStart),console.log("üß™ TEST: Prvi container gridRowStart =",P.style.gridRowStart),console.log("üß™ TEST: Pri container display =",P.style.display),console.log("üß™ TEST: Parent grid element =",z),console.log("üß™ TEST: Parent display =",window.getComputedStyle(z).display),console.log("üß™ TEST: Parent grid-template-columns =",window.getComputedStyle(z).gridTemplateColumns),z.offsetHeight,gsap.fromTo(window.shuffledPhotos,{opacity:0,scale:.8,y:window.innerHeight/5},{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out",stagger:.1,onComplete:()=>{console.log("‚úÖ GSAP animacija ZAVR≈†ENA - grid bi trebao biti vidljiv")}})}finally{F=!1}}function Ie(){const e=document.querySelectorAll(".work-categories-title-wrapper, .work-categories-top-margin");e&&gsap.matchMedia().add("(max-width: 767px)",()=>{gsap.to(e,{scale:.7,opacity:0,scrollTrigger:{trigger:e,start:"top top",end:"+=200",scrub:.5,invalidateOnRefresh:!0}})})}window.initWork=Re;window.initCategoryTitleAnimation=Ie;console.log("üì¶ work.js module loaded - funkcije spremne na window objektu");console.log("üì¶ photo-modal.js uƒçitan");window.photoModalCleanup=null;function Se(){console.log("üñºÔ∏è Inicijaliziram Photo Modal"),window.photoModalCleanup&&(console.log("üßπ ƒåistim prethodnu Photo Modal instancu"),window.photoModalCleanup(),window.photoModalCleanup=null);const e=document.querySelector(".modal-photo");if(!e){console.log("‚ö†Ô∏è Modal element ne postoji, izlazim iz initPhotoModal");return}const o=e.querySelector(".modal-photo-container"),a=e.querySelector(".modal-title"),n=e.querySelector(".modal-exif"),i=e.querySelector(".modal-close"),r=e.querySelector('[data-photo-nav="previous"]'),m=e.querySelector('[data-photo-nav="next"]'),y=document.querySelectorAll(".photo");gsap.registerPlugin(Flip);let g=0,S=[],u=null,x=[];function P(t){const c=t.getBoundingClientRect(),l=window.scrollY||document.documentElement.scrollTop,h=c.top+l-100;window.scrollTo({top:h,behavior:"auto"})}y.forEach((t,p)=>{const c=window.shuffledPhotos.find(T=>T.querySelector(".photo")===t),l=window.shuffledPhotos.indexOf(c);S[l]={src:t.getAttribute("src"),title:t.getAttribute("data-title"),exif:t.getAttribute("data-exif"),category:t.getAttribute("data-category"),element:t,placeholder:null};const h=()=>{g=l,u=t,z(S[g])};t.addEventListener("click",h),x.push({element:t,handler:h})});function z(t){window.lenis&&window.lenis.stop(),document.body.style.overflow="hidden";const p=Flip.getState(t.element,{props:"all"}),c=t.element.originalParent,l=document.createElement("div");l.classList.add("photo-placeholder"),l.style.width=t.element.offsetWidth+"px",l.style.height=t.element.offsetHeight+"px",c.insertBefore(l,t.element),t.placeholder=l;const h=Array.from(document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title")).filter(T=>T!==t.element);gsap.to(h,{opacity:0,duration:.3,ease:"power2.inOut"}),o.appendChild(t.element),gsap.set(t.element,{opacity:1}),e.style.display="grid",e.classList.add("active"),e.style.backgroundColor="transparent",a.textContent=t.title,n.textContent=t.exif,gsap.set([a,n,i,r,m],{opacity:0,y:20}),Flip.from(p,{duration:.8,ease:"power2.inOut",absolute:!0,onComplete:()=>{e.classList.contains("active")&&gsap.to(e,{backgroundColor:"var(--_colors---off-white)",duration:.4,ease:"power2.out"}),gsap.to([a,n,i,r,m],{opacity:1,y:0,duration:.4,stagger:.1,ease:"power2.out"})}})}function d(){if(!u)return;window.lenis&&window.lenis.start(),document.body.style.overflow="";const t=S[g],p=t.element,c=document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title");gsap.set(e,{backgroundColor:"transparent"}),gsap.to([a,n,i,r,m],{opacity:0,y:20,duration:.3,ease:"power2.in"});const l=p.originalParent,h=l.getBoundingClientRect(),T=window.scrollY||document.documentElement.scrollTop,j=h.top+T-window.innerHeight/2+h.height/2;window.scrollTo({top:j,behavior:"auto"});const M=Flip.getState(p,{props:"all"});t.placeholder&&l&&(l.insertBefore(p,t.placeholder),t.placeholder.remove(),t.placeholder=null),Flip.from(M,{duration:.8,ease:"power2.inOut",onUpdate:function(){this.progress()>.7&&gsap.to(c,{opacity:1,duration:.3,ease:"power2.out"})},onComplete:()=>{e.classList.remove("active"),e.style.display="none",u=null}})}function k(){const t=document.querySelectorAll(".photo");gsap.killTweensOf(t);let p=g<S.length-1?g+1:0;const c=S[g],l=S[p];c.placeholder&&c.element.originalParent&&(gsap.set(c.element,{x:0,opacity:1,scale:1,rotation:0}),c.element.originalParent.insertBefore(c.element,c.placeholder),c.placeholder.remove(),c.placeholder=null);const h=Array.from(document.querySelectorAll(".photo")).filter(M=>M!==l.element);gsap.set(h,{opacity:0});const T=l.element.originalParent,j=document.createElement("div");j.classList.add("photo-placeholder"),j.style.width=l.element.offsetWidth+"px",j.style.height=l.element.offsetHeight+"px",T.insertBefore(j,l.element),l.placeholder=j,P(l.element),o.innerHTML="",o.appendChild(l.element),gsap.set(l.element,{opacity:1,x:"100%",scale:.95,rotation:3}),gsap.to(l.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),a.textContent=l.title,n.textContent=l.exif,u=l.element,g=p}function f(){const t=document.querySelectorAll(".photo");gsap.killTweensOf(t);let p=g>0?g-1:S.length-1;const c=S[g],l=S[p];c.placeholder&&c.element.originalParent&&(gsap.set(c.element,{x:0,opacity:1,scale:1,rotation:0}),c.element.originalParent.insertBefore(c.element,c.placeholder),c.placeholder.remove(),c.placeholder=null);const h=Array.from(document.querySelectorAll(".photo")).filter(M=>M!==l.element);gsap.set(h,{opacity:0});const T=l.element.originalParent,j=document.createElement("div");j.classList.add("photo-placeholder"),j.style.width=l.element.offsetWidth+"px",j.style.height=l.element.offsetHeight+"px",T.insertBefore(j,l.element),l.placeholder=j,P(l.element),o.innerHTML="",o.appendChild(l.element),gsap.set(l.element,{opacity:1,x:"-100%",scale:.95,rotation:-3}),gsap.to(l.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),a.textContent=l.title,n.textContent=l.exif,u=l.element,g=p}const v=t=>{e.classList.contains("active")&&(t.key==="Escape"&&d(),t.key==="ArrowRight"&&k(),t.key==="ArrowLeft"&&f())},L=t=>{t.target===e&&d()};document.addEventListener("keydown",v),e.addEventListener("click",L),i.addEventListener("click",d),r.addEventListener("click",f),m.addEventListener("click",k);const E=new Hammer(o);E.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});let C=!1,b=0;E.on("panstart",function(t){C=!0,b=t.center.x,gsap.killTweensOf(u)}),E.on("pan",function(t){if(!C||!u)return;const c=(t.center.x-b)/window.innerWidth*100,h=Math.min(Math.max(c*.5,-50),50),T=Math.abs(h),j=gsap.utils.mapRange(0,50,1,.3)(T),M=gsap.utils.mapRange(0,50,1,0)(T);gsap.set(u,{x:h+"%",rotation:h*.05,scale:j,opacity:M})}),E.on("panend",function(t){if(!C||!u)return;C=!1;const p=Math.abs(t.velocity),c=t.deltaX,l=window.innerWidth*.2;Math.abs(c)>l||p>.5?c<0?k():f():gsap.to(u,{x:"0%",rotation:0,scale:1,opacity:1,duration:.3,ease:"power2.out"})}),window.photoModalCleanup=()=>{console.log("üßπ Photo Modal cleanup"),x.forEach(({element:t,handler:p})=>{t.removeEventListener("click",p)}),document.removeEventListener("keydown",v),e.removeEventListener("click",L),i.removeEventListener("click",d),r.removeEventListener("click",f),m.removeEventListener("click",k),E&&E.destroy(),e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="none",window.lenis&&window.lenis.start(),document.body.style.overflow=""),console.log("‚úÖ Photo Modal cleanup zavr≈°en")},console.log("‚úÖ Photo Modal uspje≈°no inicijaliziran")}window.initPhotoModal=Se;console.log("üì¶ photo-modal.js module loaded - funkcija spremna na window objektu");typeof window.photoModalCleanup>"u"&&(window.photoModalCleanup=null);function ee(){console.log("üîç initAbout() POZVAN!"),console.log("üîç document.readyState:",document.readyState),console.log("üîç Tra≈æim .section.about-page...");const e=document.querySelector(".section.about-page");if(console.log("üîç .section.about-page pronaƒëen?",!!e),!e){console.log("‚ö†Ô∏è .section.about-page NE POSTOJI - izlazim iz initAbout()");return}console.log("‚úÖ üé® Inicijaliziram About Page animacije!"),gsap.registerPlugin(ScrollTrigger);const o=document.createElement("style");o.textContent=`
    .about-page-title {
      overflow: visible;
    }
    
    .about-page-title .line {
      display: block;
      opacity: 0;
    }
  `,document.head.appendChild(o);const a=document.querySelector(".about-page-mobile-img"),n=document.querySelector(".about-page-title");document.querySelector(".about-page-paragraph");const i=document.querySelector("#w-node-_5cfb6280-6a33-c948-6914-d1d14a02033e-e0820647"),r=document.querySelector("#w-node-_8ff28dca-4908-092a-a93e-64674276b761-e0820647"),m=document.querySelector("#w-node-d37b0f9a-3049-7721-1f0b-b2dfa6b25604-e0820647"),y=document.querySelector("#w-node-a792f731-c023-e6a4-a3a2-3b0f75706c28-e0820647"),g=document.querySelector("#w-node-_38752304-f930-7aec-55b4-e5bb69d7261b-e0820647"),S=document.querySelector("#w-node-af8686f0-0eff-8a7c-0ed7-beca4d3b4ae5-e0820647"),u=document.querySelector("#w-node-f5866f73-1277-b3c6-9637-905ed2896c1d-e0820647"),x=document.querySelector("#w-node-_26bcf290-3970-d3ae-4c5a-8a87562b3b8f-e0820647"),P=document.querySelector("#w-node-_959dd736-48e6-8ca1-a499-ecdb1597fdfc-e0820647"),z=document.querySelector("#w-node-_81d87156-36a4-f557-ac99-5a50eaa2aede-e0820647"),d=document.querySelectorAll(".divider"),k=[],f=gsap.timeline();a&&(gsap.set(a,{clipPath:"inset(0% 0% 100% 0%)"}),f.to(a,{clipPath:"inset(0% 0% 0% 0%)",duration:1.2,ease:"expo.inOut"},.2));let v=0,L=.8,E=0;if(n){const t=new SplitType(n,{types:"lines"});if(k.push(t),t.lines&&t.lines.length>0){const p=t.lines;gsap.set(p,{opacity:0,y:20}),p.forEach((l,h)=>{f.to(l,{opacity:1,y:0,duration:.4,ease:"power2.out"},L+h*.15)}),v=L+(p.length-1)*.15+.4;const c=v-L;E=L+c*.7-.15,f.call(()=>{},null,v)}}const C=[{divider:d[0],title:i,content:g},{divider:d[1],title:r,content:S},{divider:d[2],title:m,content:u},{divider:d[3],title:y,content:x},{divider:d[4],title:P,content:z}];let b=E;C.forEach((t,p)=>{if(!t.divider)return;if(gsap.set(t.divider,{width:0,opacity:0}),t.title&&gsap.set(t.title,{opacity:0,y:20}),t.content&&gsap.set(t.content,{opacity:0,y:20}),t.divider.getBoundingClientRect().top<window.innerHeight){f.to(t.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},b),t.title&&f.to(t.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},b+.15),t.content&&f.to(t.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},b+.25);const T=b+.25+.6-b;b=b+T*.7}else ScrollTrigger.create({trigger:t.divider,start:"top 92%",once:!0,onEnter:()=>{const h=gsap.timeline();h.to(t.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},0),t.title&&h.to(t.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},.15),t.content&&h.to(t.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},.25)}})}),typeof barba<"u"&&barba.hooks.beforeLeave(()=>{k.forEach(t=>{t&&t.revert&&t.revert()}),ScrollTrigger.getAll().forEach(t=>t.kill()),o&&o.parentNode&&o.parentNode.removeChild(o)})}window.initAbout=ee;console.log("üì¶ about-page.js loaded, document.readyState:",document.readyState);document.readyState==="loading"?(console.log("‚è≥ ƒåekam DOMContentLoaded..."),document.addEventListener("DOMContentLoaded",ee)):(console.log("‚ñ∂Ô∏è DOM veƒá loaded, pozivam initAbout() odmah"),ee());Me();window.initPhotoModal=Se;
