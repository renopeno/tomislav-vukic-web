function $e(){const e=document.querySelectorAll(".nav-link"),t=window.location.pathname;e.forEach(n=>{const i=n.getAttribute("href");t===i||t==="/"&&i==="/"?(n.setAttribute("aria-current","page"),n.classList.add("current","w--current")):(n.removeAttribute("aria-current"),n.classList.remove("current","w--current"))})}function De(e){e.startsWith("work")&&window.photoModalCleanup&&window.photoModalCleanup(),e.startsWith("work")&&window.cleanupWorkPage&&window.cleanupWorkPage(),ScrollTrigger.getAll().forEach(n=>{n.kill()}),document.querySelectorAll(".split-type").forEach(n=>{n.splitType&&n.splitType.revert()})}function ue(e){var t,n,i,o,c,p,C,r,m,s;switch(e){case"home":(t=window.initHero)==null||t.call(window),(n=window.initAboutSection)==null||n.call(window),(i=window.initAboutCarousel)==null||i.call(window),(o=window.initHighlights)==null||o.call(window),(c=window.initCategories)==null||c.call(window);break;case"work":case"work-abstract":case"work-nature":case"work-people":case"work-products":case"work-architecture":(p=window.initWork)==null||p.call(window),(C=window.initCategoryTitleAnimation)==null||C.call(window),(r=window.initWorkCategoriesReveal)==null||r.call(window),(m=window.initPhotoModal)==null||m.call(window);break;case"about":(s=window.initAbout)==null||s.call(window);break;default:console.warn(`‚ö†Ô∏è Nepoznati namespace: ${e}`)}}function je(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),barba.hooks.beforeEnter(()=>{localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"))}),barba.init({transitions:[{name:"fade",leave(e){return window.lenis&&window.lenis.stop(),$e(),De(e.current.namespace),localStorage.getItem("dark-mode")==="enabled"&&(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")),gsap.to(e.current.container,{opacity:0,duration:.15})},beforeEnter(e){var n,i,o,c;localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"));const t=(i=(n=e.next.container).querySelector)==null?void 0:i.call(n,".category-title");if(t){t.style.opacity="0",t.style.visibility="hidden";const p=(c=(o=e.next.container).querySelector)==null?void 0:c.call(o,".work-categories-wrapper");p&&(p.style.opacity="0",p.style.visibility="hidden")}window.lenis?window.lenis.scrollTo(0,{immediate:!0,force:!0}):window.scrollTo(0,0)},enter(e){return gsap.to(e.next.container,{opacity:1,duration:.15})},after(e){ue(e.next.namespace),requestAnimationFrame(()=>{window.lenis&&window.lenis.start(),ScrollTrigger.refresh(!0)})}}],views:[{namespace:"home"},{namespace:"work"},{namespace:"about"},{namespace:"work-abstract"},{namespace:"work-nature"},{namespace:"work-people"},{namespace:"work-products"},{namespace:"work-architecture"}]})}window.addEventListener("beforeunload",()=>{window.scrollTo(0,0)});je();var be;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{var t;const e=(t=document.querySelector('[data-barba="container"]'))==null?void 0:t.getAttribute("data-barba-namespace");e&&ue(e)});else{const e=(be=document.querySelector('[data-barba="container"]'))==null?void 0:be.getAttribute("data-barba-namespace");e&&ue(e)}function Se(){const e=new Lenis({lerp:.1,wheelMultiplier:1,smoothWheel:!0,smoothTouch:!1,infinite:!1});window.lenis=e,ScrollTrigger.scrollerProxy(document.body,{scrollTop(t){return arguments.length&&e.scrollTo(t,{immediate:!0}),e.scroll},getBoundingClientRect(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},pinType:document.body.style.transform?"transform":"fixed"}),e.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{e.raf(t*1e3)}),gsap.ticker.lagSmoothing(0)}window.initLenis=Se;Se();function Ee(){const e=document.body,t=document.querySelector(".nav-theme-switcher");localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode")),t&&t.addEventListener("click",()=>{e.classList.contains("ui-dark-mode")?(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode"),console.log("Removed .ui-dark-mode from html and body"),localStorage.setItem("dark-mode","disabled")):(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode"),console.log("Added .ui-dark-mode to html and body"),localStorage.setItem("dark-mode","enabled"))})}window.initDarkMode=Ee;Ee();function ke(){const e=document.querySelector(".section.footer"),t=e==null?void 0:e.previousElementSibling;gsap.registerPlugin(ScrollTrigger),t&&(gsap.to(t,{scrollTrigger:{trigger:t,start:"top top",end:()=>`+=${window.innerHeight*.5}`,pin:!1,scrub:!0,id:"footer-prev-section"}}),gsap.to(e,{scrollTrigger:{trigger:t,start:()=>`bottom+=${window.innerHeight*.5} bottom`,end:"bottom bottom",scrub:!0,id:"footer-main"}}),gsap.set(t,{zIndex:1}))}window.initFooter=ke;ke();function Te(e,t=!0){e.dataset.originalText||(e.dataset.originalText=e.textContent);const n=e.dataset.originalText;e.style.position="relative",e.style.zIndex="100000";let i;e.querySelector(".shuffle-text")?i=e.querySelector(".shuffle-text"):(i=document.createElement("span"),i.className="shuffle-text",i.textContent=n,e.textContent="",e.appendChild(i)),i.style.pointerEvents="none";let o=!1,c;const p=m=>{const s=m.split("");for(let w=s.length-1;w>0;w--){const k=Math.floor(Math.random()*(w+1));[s[w],s[k]]=[s[k],s[w]]}return s.join("")},C=()=>{c&&(clearInterval(c),c=null),i.textContent=n,o=!1},r=()=>{if("ontouchstart"in window||navigator.maxTouchPoints>0||o)return;o=!0;let m=0;c&&clearInterval(c),c=setInterval(()=>{m<3?(i.textContent=p(n),m++):(i.textContent=n,clearInterval(c),c=null,o=!1)},100)};return t&&("ontouchstart"in window||navigator.maxTouchPoints>0||e.addEventListener("mouseenter",r),e.addEventListener("click",function(s){C()})),r}function Ce(){document.querySelectorAll(".link, .cta").forEach(e=>{Te(e,!0)})}window.createShuffleEffect=Te;window.initLinksHover=Ce;Ce();function xe(){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i);return t&&n&&!e.match(/CriOS/i)&&!e.match(/FxiOS/i)}function _e(){if(!xe())return;document.body.addEventListener("click",function(i){const o=i.target.closest("a, button");o&&(o.style.transition="opacity 0.2s ease-out",o.style.opacity="0.5",setTimeout(()=>{o.style.opacity="1"},300))});function e(i){var o=i.tagName.toLowerCase(),c=i.dataset.bind,p=c&&c.indexOf("click")>-1||o=="a"||o=="button";return p}var t={touchend:function(i,o){o.dataset._clicked_="",o.dataset._mousemove_="0",o.dataset._timeOutId_=""},mouseover:function(i){i.preventDefault()},mousemove:function(i,o){i.preventDefault();var c=+(o.dataset._mousemove_||"0");if(c=c+1,console.log("mousemoves: "+c),o.dataset._mousemove_=c,c>1&&!o.dataset._timeOutId_){var p=setTimeout(function(){console.log("double mousemove click fired"),o.click()},80);o.dataset._timeOutId_=p}},click:function(i,o){if(o.dataset._clicked_){i.isTrusted&&(console.log("prevented doubleclick"),i.preventDefault());return}o.dataset._timeOutId_&&(console.log("cleared timeout"),clearTimeout(+o.dataset._timeOutId_)),o.dataset._clicked_="true"}};function n(i){var o=i.target;if(o&&o.click&&o.tagName&&o.dataset&&e(o)){var c=i.type;console.log(c,o),t[c]&&t[c](i,o)}}document.addEventListener("touchend",n,!0),document.addEventListener("mouseover",n,!0),document.addEventListener("mousemove",n,!0),document.addEventListener("click",n,!0)}function Ae(){xe()&&_e()}window.initIosSafariFix=Ae;Ae();const ce={enabled:!1,logs:[],lastScrollY:0,lastTimestamp:0,freezeThreshold:100,init(){this.enabled&&(console.log("üîç ScrollDebugger aktiviran"),window.lenis&&window.lenis.on("scroll",e=>{this.logScroll("LENIS",e)}),window.ScrollTrigger&&(ScrollTrigger.addEventListener("refresh",()=>{console.log("üîÑ ScrollTrigger REFRESH event")}),ScrollTrigger.addEventListener("scrollStart",()=>{console.log("‚ñ∂Ô∏è ScrollTrigger SCROLL START")}),ScrollTrigger.addEventListener("scrollEnd",()=>{console.log("‚è∏Ô∏è ScrollTrigger SCROLL END")})),this.startRAFMonitoring(),this.trackScrollDirection(),console.log("‚úÖ ScrollDebugger setup complete"))},logScroll(e,t){var p;const n=performance.now(),i=n-this.lastTimestamp,o=t.scroll-this.lastScrollY,c=o>0?"‚¨áÔ∏è DOWN":"‚¨ÜÔ∏è UP";i>this.freezeThreshold&&this.lastTimestamp>0&&console.warn(`üö® FREEZE DETECTED! ${i.toFixed(2)}ms gap`,{scrollPosition:t.scroll,direction:c,gap:`${i.toFixed(2)}ms`,scrollDelta:o}),Math.abs(o)>1&&console.log(`üìú ${e} ${c}`,{scroll:t.scroll.toFixed(2),velocity:((p=t.velocity)==null?void 0:p.toFixed(2))||"N/A",delta:o.toFixed(2),time:i.toFixed(2)+"ms"}),this.lastScrollY=t.scroll,this.lastTimestamp=n},startRAFMonitoring(){let e=performance.now(),t=0;const n=i=>{var c;const o=i-e;o>32&&console.warn(`‚è±Ô∏è SLOW FRAME: ${o.toFixed(2)}ms (${(1e3/o).toFixed(1)}fps)`,{framesSinceLastLog:t,scrollY:((c=window.lenis)==null?void 0:c.scroll)||window.scrollY}),t++,e=i,requestAnimationFrame(n)};requestAnimationFrame(n)},trackScrollDirection(){let e=null;const t=()=>{var o;const n=((o=window.lenis)==null?void 0:o.scroll)||window.scrollY,i=n>this.lastScrollY?"down":"up";i!==e&&e!==null&&console.log(`üîÑ DIRECTION CHANGE: ${e} ‚Üí ${i}`,{scrollY:n.toFixed(2),activeScrollTriggers:ScrollTrigger.getAll().length}),e=i,requestAnimationFrame(t)};requestAnimationFrame(t)},logScrollTriggers(){const e=ScrollTrigger.getAll();console.log(`üìä Active ScrollTriggers: ${e.length}`),e.forEach(t=>{console.log(`  - ${t.vars.id||"unnamed"}`,{start:t.start,end:t.end,progress:t.progress.toFixed(2),isActive:t.isActive})})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>ce.init()):ce.init();window.ScrollDebugger=ce;document.addEventListener("keydown",e=>{var t,n,i;(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(console.log("üîç === SCROLL DEBUG DUMP ==="),ce.logScrollTriggers(),console.log("Lenis state:",{scroll:(t=window.lenis)==null?void 0:t.scroll,velocity:(n=window.lenis)==null?void 0:n.velocity,direction:(i=window.lenis)==null?void 0:i.direction}),console.log("========================="))});function Fe(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){console.log("üñ±Ô∏è Touch device detektiran - custom cursor onemoguƒáen");return}const t=document.createElement("div");t.id="custom-cursor",t.style.cssText=`
    position: fixed;
    width: 56px;
    height: 32px;
    border-radius: 999px;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
    background-color: #ffffff;
    mix-blend-mode: difference;
    opacity: 0;
    display: none;
  `,document.body.appendChild(t);let n=window.innerWidth/2,i=window.innerHeight/2;const o=r=>{n=r.clientX,i=r.clientY,t.style.left=`${n}px`,t.style.top=`${i}px`},c=()=>{t.style.display="block",setTimeout(()=>{t.style.opacity="1"},10)},p=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},200)};window.addEventListener("hero:drag:start",c),window.addEventListener("hero:drag:end",p);const C=r=>{o(r)};return window.addEventListener("mousemove",C),()=>{t.remove(),window.removeEventListener("mousemove",C),window.removeEventListener("hero:drag:start",c),window.removeEventListener("hero:drag:end",p)}}function Le(){const e=document.querySelector(".section.hero"),t=document.querySelector(".hero-title"),n=document.querySelectorAll(".hero-footer");if(!e){console.error("‚ùå Hero sekcija nije pronaƒëena!");return}n.forEach(f=>{f.style.position="relative",f.style.zIndex="10",f.style.pointerEvents="auto",f.querySelectorAll('a, button, [role="button"]').forEach(q=>{q.style.position="relative",q.style.zIndex="11",q.style.pointerEvents="auto"})});const i=document.querySelector(".hero-images-wrapper");if(!i){console.warn("Hero wrapper nije pronaƒëen!");return}const o=Array.from(document.querySelectorAll(".hero-image")),c=o.length;if(c===0){console.warn("‚ö†Ô∏è Nema slika za prikaz!");return}const p=document.querySelector(".hero-images-container");if(typeof THREE>"u"){console.error("‚ùå Three.js nije uƒçitan! Provjerite Webflow Footer Code.");return}o.forEach(f=>{f.style.display="none"}),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.pointerEvents="auto",p.innerHTML="",p.style.position="relative",p.style.width="100%",p.style.height="100%",p.style.overflow="hidden",p.style.pointerEvents="auto";const C=new THREE.Scene,r=new THREE.PerspectiveCamera(40,p.offsetWidth/p.offsetHeight,.1,3e3);r.position.z=900;const m=window.innerWidth<=768;r.position.y=m?-50:0;const s=new THREE.WebGLRenderer({alpha:!0,antialias:!0});s.setSize(p.offsetWidth,p.offsetHeight),s.setPixelRatio(Math.min(window.devicePixelRatio,2)),s.setClearColor(0,0),s.domElement.style.position="absolute",s.domElement.style.top="0",s.domElement.style.left="0",s.domElement.style.width="100%",s.domElement.style.height="100%",s.domElement.style.zIndex="1",p.appendChild(s.domElement);const w=new THREE.AmbientLight(16777215,.6);C.add(w);const k=new THREE.DirectionalLight(16777215,.4);k.position.set(0,500,800),C.add(k);const x=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // ≈†alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,l=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    uniform vec2 uImageAspect;  // (width/height, 1.0)
    uniform vec2 uPlaneAspect;  // (width/height, 1.0)
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      // Background cover: scale to cover, maintain aspect ratio, crop center
      float imageAspect = uImageAspect.x;
      float planeAspect = uPlaneAspect.x;
      
      vec2 uv = vUv;
      
      if (imageAspect > planeAspect) {
        // Image is wider - crop left/right, zoom X
        float scale = imageAspect / planeAspect;
        uv.x = (uv.x - 0.5) / scale + 0.5;
      } else {
        // Image is taller - crop top/bottom, zoom Y
        float scale = planeAspect / imageAspect;
        uv.y = (uv.y - 0.5) / scale + 0.5;
      }
      
      vec4 texColor = texture2D(uTexture, uv);
      
      // Shadow na rubovima za nagla≈°avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `,H=new THREE.TextureLoader,g=[],d=new THREE.Group;C.add(d);const v=Math.random()*.4-.2,L=Math.random()*.4-.2;d.rotation.x=v,d.rotation.z=L;const R=280,A=165,a=220,b=2*Math.PI/c;let h=0;const u=new Array(c);o.forEach((f,T)=>{H.load(f.src,q=>{const oe=q.image?q.image.width:f.naturalWidth||f.width,Y=q.image?q.image.height:f.naturalHeight||f.height,Z=oe/Y,_=A/a,F=new THREE.PlaneGeometry(A,a,64,1),de=new THREE.ShaderMaterial({uniforms:{uTexture:{value:q},uBend:{value:.0015},uOpacity:{value:0},uImageAspect:{value:new THREE.Vector2(Z,1)},uPlaneAspect:{value:new THREE.Vector2(_,1)}},vertexShader:x,fragmentShader:l,transparent:!0,side:THREE.DoubleSide}),N=new THREE.Mesh(F,de),ne=-b*T+Math.PI,Oe=Math.sin(ne)*R,ze=Math.cos(ne)*R;N.position.set(Oe,30,ze),N.rotation.y=ne,N.material.uniforms.uOpacity.value=0,N.scale.set(.7,.7,.7),d.add(N),u[T]=N,h++,h===c&&(u.forEach(We=>g.push(We)),P())},void 0,q=>{console.error(`‚ùå Gre≈°ka pri uƒçitavanju slike ${T}:`,q)})});function y(f){if(f){const T=f.textContent.trim();f.innerHTML=T.split("").map(q=>`<span style="display: inline-block;">${q===" "?"&nbsp;":q}</span>`).join("")}}y(t);const S=t?t.querySelectorAll("span"):[];gsap.set(n,{y:20,opacity:0}),gsap.set(S,{y:200,opacity:0});function P(){const f=gsap.timeline();re(.008),g.forEach((Z,_)=>{const F=.2+_*.15;f.to(Z.material.uniforms.uOpacity,{value:1,duration:.6,ease:"power1.out"},F),f.to(Z.scale,{x:1,y:1,z:1,duration:.6,ease:"back.out(1.2)"},F)});const T=.2+(g.length-1)*.15+.6,q=T-1.2;f.to(S,{y:0,opacity:1,duration:.6,stagger:.04,ease:"power2.inOut"},q),f.to(n,{y:0,opacity:1,duration:.6,stagger:.12,ease:"power2.inOut"},q+.3);const oe=T,Y={value:.008};f.to(Y,{value:B,duration:2,ease:"power2.out",onUpdate:()=>{O=Y.value},onComplete:()=>{M()}},oe)}function M(){const f=d.rotation.x,T=d.rotation.z;gsap.to(d.rotation,{x:f+.03,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1}),gsap.to(d.rotation,{z:T+.025,duration:5.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}let B=.001,U=0,O=B,ae=.015;function re(f){O=f}let K=0,X=0,$=!1,z=0,J=0,G=0,j=!1,Q=0;const ee=f=>{$=!0,f.clientX,z=f.clientX,G=f.clientX,J=0,gsap.killTweensOf(d.rotation),Q=O,O=0,j=!0,window.dispatchEvent(new CustomEvent("hero:drag:start")),s.domElement.style.cursor="grabbing"},V=f=>{if(!$)return;f.preventDefault(),z=f.clientX;const T=z-G;d.rotation.y+=T*9e-4,J=T*9e-4,G=z},se=()=>{if(!$)return;$=!1,s.domElement.style.cursor="grab",window.dispatchEvent(new CustomEvent("hero:drag:end"));const f=J*80;gsap.to(d.rotation,{y:d.rotation.y+f,duration:3,ease:"power2.out"}),setTimeout(()=>{$||gsap.to({speed:0},{speed:Q,duration:1,ease:"power2.inOut",onUpdate:function(){O=this.targets()[0].speed},onComplete:()=>{O=Q,j=!1}})},2500)};s.domElement.addEventListener("mousedown",ee),window.addEventListener("mousemove",V),window.addEventListener("mouseup",se),s.domElement.style.cursor="grab",s.domElement.style.userSelect="none",s.domElement.style.webkitUserSelect="none",s.domElement.style.touchAction="auto";let le=!0;const te=new IntersectionObserver(f=>{f.forEach(T=>{le=T.isIntersecting})},{threshold:0,rootMargin:"100px"});te.observe(e);const E=()=>{le&&(U+=(O-U)*.15,d.rotation.y+=U,s.render(C,r))};gsap.ticker.add(E);function I(){const f=p.offsetWidth,T=p.offsetHeight;r.aspect=f/T,r.updateProjectionMatrix(),s.setSize(f,T)}window.addEventListener("resize",I);let D=!1;const W=()=>{$||j||D||(D=!0,requestAnimationFrame(()=>{const f=window.pageYOffset||document.documentElement.scrollTop,T=Math.abs(f-K);X=Math.min(T*8e-4,ae),T>.5?(gsap.killTweensOf(d.rotation),O=B+X):O=B,K=f,D=!1}))};window.removeEventListener("scroll",W),window.addEventListener("scroll",W,{passive:!0}),window.addEventListener("barba:before-leave",()=>{gsap.ticker.remove(E),gsap.killTweensOf(d.rotation),te&&te.disconnect(),s.domElement.removeEventListener("mousedown",ee),window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",se),g.forEach(f=>{f.geometry&&f.geometry.dispose(),f.material&&(f.material.uniforms.uTexture.value&&f.material.uniforms.uTexture.value.dispose(),f.material.dispose())}),s.dispose(),window.removeEventListener("resize",I),window.removeEventListener("scroll",W)})}window.initHero=Le;document.querySelector(".hero-images-container")&&Le();function pe(){if(!document.querySelector('[data-barba-namespace="home"]'))return;const t=document.querySelector(".section.about"),n=document.querySelector(".home-about-title"),i=document.querySelector(".about-scroll");if(!i||!t||!n){console.error("‚ùå About Section elementi nisu kompletni");return}gsap.registerPlugin(ScrollTrigger);const o=new SplitType(n,{types:"words,chars"}),c=new SplitType(i,{types:"words,chars"});o.words&&o.words.forEach(s=>{gsap.set(s,{display:"inline-block",whiteSpace:"nowrap"})}),c.words&&c.words.forEach(s=>{gsap.set(s,{display:"inline-block",whiteSpace:"nowrap"})}),o.chars.forEach(s=>{gsap.set(s,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),c.chars.forEach(s=>{gsap.set(s,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})});const p=s=>{s.forEach(w=>{const k=w.textContent,x=document.createElement("span");x.style.display="inline-block",x.textContent=k,w.textContent="",w.appendChild(x),gsap.set(x,{y:"100%",opacity:0})})};p(o.chars),p(c.chars);const C=window.innerWidth<=767;gsap.timeline({scrollTrigger:{trigger:t,start:C?"top 60%":"top 85%",end:"top 15%",scrub:1,id:"about-title-reveal"}}).to(o.chars.map(s=>s.querySelector("span")),{y:0,opacity:1,duration:1,stagger:.015,ease:"power2.out"}),gsap.timeline({scrollTrigger:{trigger:i,start:"top 95%",end:"top 25%",scrub:1,id:"about-scroll-reveal"}}).to(c.chars.map(s=>s.querySelector("span")),{y:0,opacity:1,duration:1,stagger:.015,ease:"power2.out"})}window.initAboutSection=pe;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",pe):pe();console.log("üì¶üì¶üì¶ about-carousel.js FILE SE UƒåITAVA!");function Pe(){if(console.log("üöÄ initAboutCarousel pozvan!"),!document.querySelector('[data-barba-namespace="home"]')){console.log("üîç About Carousel: Nema barba container");return}if(console.log("‚úÖ Barba container pronaƒëen"),typeof THREE>"u"){console.error("‚ùå Three.js nije uƒçitan! Provjerite Webflow Footer Code.");return}const t={portraits:".about-carousel-portraits",products:".about-carousel-products",moments:".about-carousel-moments"};Object.entries(t).forEach(([r,m])=>{const s=document.querySelector(m);s?(console.log(`‚úÖ Pronaƒëen collection: ${r}`),s.style.display="none"):console.warn(`‚ö†Ô∏è Collection nije pronaƒëen: ${m}`)});let n=document.querySelectorAll(".home-about-collection[data-about-collection]");if(console.log(`üîç Prvi poku≈°aj: Pronaƒëeno ${n.length} .home-about-collection spanova`),n.length===0){console.log("üîç Tra≈æim kroz SplitType strukturu...");const r=document.querySelectorAll("[data-about-collection]");console.log(`üîç Pronaƒëeno ${r.length} elemenata sa data-about-collection atributom`),r.forEach((m,s)=>{console.log(`  Element ${s+1}:`,m.tagName,m.className,"data:",m.getAttribute("data-about-collection"));let w=m.parentElement,k=0;for(;w&&k<5;){if(w.classList&&w.classList.contains("home-about-collection")){console.log(`    ‚úÖ Parent je .home-about-collection na depth ${k}`);break}w=w.parentElement,k++}}),n=r}if(console.log(`üîç About Carousel: Konaƒçno pronaƒëeno ${n.length} collection spanova`),n.forEach((r,m)=>{const s=r.getAttribute("data-about-collection");console.log(`  ${m+1}. Element:`,{tag:r.tagName,classes:r.className,data:s,element:r})}),n.length===0){console.warn("‚ö†Ô∏è Nema .home-about-collection elemenata!"),console.log("üîç Debug: Provjeravam DOM strukturu...");const r=document.querySelector(".home-about-title");r&&(console.log("  .home-about-title pronaƒëen:",r),console.log("  InnerHTML snippet:",r.innerHTML.substring(0,200)));return}const i=window.innerWidth<=767,o=new Map,c=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // ≈†alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,p=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    uniform vec2 uImageAspect;  // (width/height, 1.0)
    uniform vec2 uPlaneAspect;  // (width/height, 1.0)
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      // Background cover: scale to cover, maintain aspect ratio, crop center
      float imageAspect = uImageAspect.x;
      float planeAspect = uPlaneAspect.x;
      
      vec2 uv = vUv;
      
      if (imageAspect > planeAspect) {
        // Image is wider - crop left/right, zoom X
        float scale = imageAspect / planeAspect;
        uv.x = (uv.x - 0.5) / scale + 0.5;
      } else {
        // Image is taller - crop top/bottom, zoom Y
        float scale = planeAspect / imageAspect;
        uv.y = (uv.y - 0.5) / scale + 0.5;
      }
      
      vec4 texColor = texture2D(uTexture, uv);
      
      // Shadow na rubovima za nagla≈°avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `;function C(r,m){const s=t[r];if(!s)return console.warn(`‚ö†Ô∏è Nepoznat collection type: ${r}`),null;const w=document.querySelector(s);if(!w)return console.warn(`‚ö†Ô∏è Collection wrapper nije pronaƒëen: ${s}`),null;console.log(`‚úÖ Collection wrapper pronaƒëen za ${r}:`,w);const k=w.querySelector(".about-carousel-wrapper");if(!k)return console.warn(`‚ö†Ô∏è .about-carousel-wrapper nije pronaƒëen u ${r}`),null;const x=Array.from(k.querySelectorAll(".about-carousel-image"));if(console.log(`üì∏ Pronaƒëeno ${x.length} slika u collectionu ${r}`),x.length===0)return console.warn(`‚ö†Ô∏è Nema slika u collectionu: ${r}`),null;const l=document.createElement("div");l.className=`about-carousel-canvas-container about-carousel-canvas-${r}`;const H=160,g=3/4,d=H*g,v=H;l.style.position="fixed",l.style.pointerEvents="none",l.style.zIndex="10000",l.style.opacity="0",l.style.transform="scale(0.3)",l.style.transformOrigin="center bottom",l.style.willChange="transform, opacity",l.style.width=`${d}px`,l.style.height=`${v}px`,l.style.overflow="visible",l.style.visibility="visible",console.log(`üì¶ Canvas container kreiran za ${r}:`,{width:d,height:v,styles:l.style.cssText}),document.body.appendChild(l),console.log("‚úÖ Canvas container dodan u body");const L=new THREE.Scene,R=new THREE.PerspectiveCamera(40,d/v,.1,1e3);R.position.z=200,R.position.y=0;const A=new THREE.WebGLRenderer({alpha:!0,antialias:!0});A.setSize(d,v),A.setPixelRatio(Math.min(window.devicePixelRatio,2)),A.setClearColor(0,0),A.domElement.style.width="100%",A.domElement.style.height="100%",l.appendChild(A.domElement);const a=new THREE.AmbientLight(16777215,.6);L.add(a);const b=new THREE.DirectionalLight(16777215,.4);b.position.set(0,200,300),L.add(b);const h=new THREE.TextureLoader,u=[],y=new THREE.Group;L.add(y);const S=Math.random()*.2-.1,P=Math.random()*.2-.1;y.rotation.x=S,y.rotation.z=P;const M=60,B=40,U=50,O=2*Math.PI/x.length;let ae=0;const re=new Array(x.length);x.forEach((E,I)=>{const D=E.srcset?E.srcset.split(",")[0].trim().split(" ")[0]:E.src;if(!D){console.warn(`‚ö†Ô∏è Slika ${I} nema src ili srcset`);return}h.load(D,W=>{const f=W.image?W.image.width:E.naturalWidth||E.width,T=W.image?W.image.height:E.naturalHeight||E.height,q=f/T,oe=B/U,Y=new THREE.PlaneGeometry(B,U,32,1),Z=new THREE.ShaderMaterial({uniforms:{uTexture:{value:W},uBend:{value:.002},uOpacity:{value:1},uImageAspect:{value:new THREE.Vector2(q,1)},uPlaneAspect:{value:new THREE.Vector2(oe,1)}},vertexShader:c,fragmentShader:p,transparent:!0,side:THREE.DoubleSide}),_=new THREE.Mesh(Y,Z),F=-O*I+Math.PI,de=Math.sin(F)*M,N=Math.cos(F)*M;_.position.set(de,0,N),_.rotation.y=F,y.add(_),re[I]=_,ae++,ae===x.length&&(re.forEach(ne=>u.push(ne)),J())},void 0,W=>{console.error(`‚ùå Gre≈°ka pri uƒçitavanju slike ${I}:`,W)})});let K=.001,X=0,$=K,z=!1;function J(){$=K}const G=()=>{z&&(X+=($-X)*.15,y.rotation.y+=X,A.render(L,R))};let j=!1;function Q(){j||(gsap.ticker.add(G),j=!0)}function ee(){j&&(gsap.ticker.remove(G),j=!1)}function V(){const E=m.getBoundingClientRect(),I=E.left+E.width/2-d/2,D=E.top-v-10;l.style.left=`${I}px`,l.style.top=`${D}px`,console.log(`üìç Update pozicije za ${r}:`,{spanRect:{left:E.left,top:E.top,width:E.width,height:E.height},carouselPos:{left:I,top:D,width:d,height:v}})}function se(){console.log(`üé¨ showCarousel pozvan za ${r}`),z=!0,Q(),V(),console.log("üìç Pozicija carousela:",{left:l.style.left,top:l.style.top,width:l.style.width,height:l.style.height,opacity:l.style.opacity,transform:l.style.transform,zIndex:l.style.zIndex}),gsap.to(l,{opacity:1,scale:1,duration:.4,ease:"back.out(1.2)",onStart:()=>{console.log(`üé¨ GSAP animacija zapoƒçeta za ${r}`)},onComplete:()=>{console.log(`‚úÖ GSAP animacija zavr≈°ena za ${r}`),console.log("üìç Finalna pozicija:",{left:l.style.left,top:l.style.top,opacity:window.getComputedStyle(l).opacity,transform:window.getComputedStyle(l).transform,zIndex:window.getComputedStyle(l).zIndex,position:window.getComputedStyle(l).position})}});let E=null;const I=()=>{z&&E===null&&(E=requestAnimationFrame(()=>{z&&V(),E=null}))};window.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",I,{passive:!0}),l._scrollHandler=I}function le(){z=!1,ee(),gsap.to(l,{opacity:0,scale:.3,duration:.3,ease:"power2.in",onComplete:()=>{l._scrollHandler&&(window.removeEventListener("scroll",l._scrollHandler),window.removeEventListener("resize",l._scrollHandler))}})}function te(){z=!1,ee(),l._scrollHandler&&(window.removeEventListener("scroll",l._scrollHandler),window.removeEventListener("resize",l._scrollHandler)),u.forEach(E=>{E.geometry&&E.geometry.dispose(),E.material&&(E.material.uniforms.uTexture.value&&E.material.uniforms.uTexture.value.dispose(),E.material.dispose())}),A.dispose(),l.parentNode&&l.parentNode.removeChild(l)}return{show:se,hide:le,cleanup:te,updatePosition:V}}n.forEach(r=>{const m=r.getAttribute("data-about-collection");if(!m){console.warn("‚ö†Ô∏è Span nema data-about-collection atribut");return}console.log(`‚úÖ Postavljam event listenere za: ${m}`);let s=null,w=!1;function k(){return s||(console.log(`üé† Kreiranje carousela za: ${m}`),s=C(m,r),s?(o.set(m,s),console.log(`‚úÖ Carousel kreiran za: ${m}`)):console.error(`‚ùå Neuspje≈°no kreiranje carousela za: ${m}`)),s}r.style.cursor="pointer",i?(r.addEventListener("click",x=>{x.preventDefault(),x.stopPropagation(),console.log(`üì± Click na: ${m}`);const l=k();if(!l){console.warn(`‚ö†Ô∏è Nije moguƒáe kreirati carousel za: ${m}`);return}w?(w=!1,l.hide()):(o.forEach((H,g)=>{if(g!==m&&H){const d=Array.from(n).find(v=>v.getAttribute("data-about-collection")===g);d&&d._isActive&&(d._isActive=!1,H.hide())}}),w=!0,r._isActive=!0,l.show())}),document.addEventListener("click",x=>{if(!r.contains(x.target)&&w){const l=o.get(m);l&&(w=!1,r._isActive=!1,l.hide())}})):(console.log(`üìå Postavljam mouseenter listener za: ${m}`),console.log("  Span element:",r),console.log("  Span pozicija:",r.getBoundingClientRect()),r.addEventListener("mouseenter",x=>{console.log(`üñ±Ô∏è Hover na: ${m}`,x.target),console.log("  Span pozicija na hover:",r.getBoundingClientRect());const l=k();console.log("  Carousel instance:",l),l&&!w?(w=!0,console.log(`‚úÖ Prikazujem carousel za: ${m}`),l.show()):console.warn(`‚ö†Ô∏è Ne mogu prikazati carousel za: ${m}`,{carouselInstance:l,isActive:w,hasCarousel:!!l})}),r.addEventListener("mouseleave",()=>{console.log(`üñ±Ô∏è Mouseleave sa: ${m}`),s&&w&&(w=!1,s.hide())}))}),window.addEventListener("barba:before-leave",()=>{o.forEach(r=>{r&&r.cleanup&&r.cleanup()}),o.clear()})}window.initAboutCarousel=Pe;console.log("üì¶ about-carousel.js uƒçitan - poku≈°avam inicijalizirati");function me(){console.log("üîÑ ƒåekam SplitType i elemente...");const e=document.querySelector('[data-barba-namespace="home"]'),t=document.querySelectorAll("[data-about-collection]"),n=document.querySelector(".home-about-title"),i=n&&n.querySelector(".word");console.log("  Provjera:",{homeNamespace:!!e,testSpans:t.length,aboutTitle:!!n,hasWords:!!i}),e&&(t.length>0||i)?(console.log("‚úÖ Uslovi ispunjeni, pozivam initAboutCarousel"),Pe()):(console.log("‚è≥ ƒåekam..."),setTimeout(me,300))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(me,1500)}):setTimeout(me,1500);function qe(){const e=document.querySelector(".section.highlights"),t=document.querySelector(".highlights-wrapper");if(!e||!t)return;gsap.registerPlugin(ScrollTrigger);const n=t.scrollWidth-e.offsetWidth;gsap.to(t,{x:-n,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:`+=${n}`,scrub:1,pin:!0,anticipatePin:1,invalidateOnRefresh:!0,id:"highlights-horizontal"}});const i=document.querySelectorAll(".highlights-card"),o=window.innerWidth<=767;gsap.set(i,{opacity:0,y:50}),gsap.to(i,{opacity:1,y:0,duration:.6,ease:"power1.inOut",stagger:.2,delay:.1,scrollTrigger:{trigger:".highlights-wrapper",start:"top 80%",toggleActions:"play none none none",id:"highlights-cards"}})}window.initHighlights=qe;qe();function ge(){const e=document.querySelectorAll(".categories-row");if(!document.querySelector(".section.categories")){console.warn("Element .section.categories nije pronaƒëen na stranici");return}e.forEach(n=>{n.addEventListener("mouseenter",()=>{gsap.to(e,{opacity:.1,duration:.3,ease:"power2.out"}),gsap.to(n,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(C=>{const r=C.querySelector(".categories-photo");C!==n&&gsap.to(r,{opacity:0,duration:.3,ease:"power2.out"})});const i=n.querySelector(".categories-photo");gsap.to(i,{opacity:1,height:300,duration:.3,ease:"power1.out"});const o=n.querySelector(".cta");gsap.to(o,{opacity:1,duration:.3,ease:"power1.out"});const c=n.querySelector(".title-l"),p=n.querySelector(".cta");c&&createShuffleEffect(c,!1)(),p&&createShuffleEffect(p,!1)()}),n.addEventListener("mouseleave",()=>{gsap.to(e,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(o=>{const c=o.querySelector(".categories-photo");gsap.to(c,{opacity:0,height:0,duration:.3,ease:"power1.out"})});const i=n.querySelector(".cta");gsap.to(i,{opacity:0,duration:.3,ease:"power1.out"})})})}window.initCategories=ge;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.querySelector('[data-barba-namespace="home"]')&&ge()}):document.querySelector('[data-barba-namespace="home"]')&&ge();let ie=!1;function ye(){const e=document.querySelector(".category-title");if(e){e.style.opacity="0",e.style.visibility="hidden";const t=document.querySelector(".work-categories-wrapper");t&&(t.style.opacity="0",t.style.visibility="hidden")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ye):ye();async function He(){if(ie)return;if(ie=!0,!document.querySelectorAll(".photo-container").length){ie=!1;return}try{let m=function(){const g=window.innerWidth;return g<768?r.mobile:g<992?r.tablet:r.desktop},s=function(g=!1){const d=m();let v=!0,L=1,R=null,A=null;window.shuffledPhotos.forEach((a,b)=>{const h=a.querySelector(".photo");let u=!1,y=d.verticalSpan;h.naturalWidth>0&&h.naturalHeight>0?(u=h.naturalWidth>h.naturalHeight,y=u?d.horizontalSpan:d.verticalSpan):g&&(d.columns,y=d.verticalSpan);let S;if(d.columns===1)S=1;else if(v){do S=d.left[Math.floor(Math.random()*d.left.length)];while(S===R);R=S}else{do S=d.right[Math.floor(Math.random()*d.right.length)];while(S===A);A=S}if(a.style.display="block",a.style.gridColumnStart=S,a.style.gridColumnEnd=S+y,a.style.gridRowStart=L,d.columns===1&&g&&h.naturalHeight===0){const M=(a.offsetWidth||window.innerWidth)*1.33;a.style.minHeight=`${M}px`}v=!v,L++})};var t=m,n=s;const o=Array.from(document.querySelectorAll(".photo-container"));o.forEach(g=>{g.style.opacity="0"}),document.querySelectorAll(".photo").forEach(g=>{g.originalParent=g.parentElement}),o.forEach(g=>{g.style.display="",g.style.gridColumn="",g.style.gridColumnStart="",g.style.gridColumnEnd="",g.style.gridRowStart="",g.style.transform=""});const p=o.slice(0,30);o.slice(30).forEach(g=>{g.style.display="none"}),window.shuffledPhotos=p.sort(()=>Math.random()-.5),window.lastPath=window.location.pathname;const C=5;window.shuffledPhotos.forEach((g,d)=>{const v=g.querySelector(".photo");v&&(d<C?(v.setAttribute("loading","eager"),v.setAttribute("fetchpriority","high")):v.setAttribute("loading","lazy"),v.setAttribute("decoding","async"))});const r={desktop:{columns:12,left:[2,3],right:[8,9],horizontalSpan:3,verticalSpan:2},tablet:{columns:8,left:[2,3],right:[5,6],horizontalSpan:3,verticalSpan:2},mobile:{columns:1,left:[1],right:[1],horizontalSpan:1,verticalSpan:1}};window.isSettingUpGrid||(window.isSettingUpGrid=!0,s(!0),window.isSettingUpGrid=!1);const w=5,k=window.shuffledPhotos.slice(0,w),l=k.map(g=>g.querySelector(".photo")).map(g=>g.complete&&g.naturalWidth>0?Promise.resolve():new Promise(d=>{g.onload=()=>d(),g.onerror=()=>d()}));await Promise.all(l),window.isSettingUpGrid||(window.isSettingUpGrid=!0,s(!1),window.isSettingUpGrid=!1),m().columns===1&&k.forEach(g=>{const d=g.querySelector(".photo");d&&d.naturalHeight>0&&(g.style.minHeight="")});const H=window.shuffledPhotos.slice(w);if(gsap.fromTo(k,{opacity:0,scale:.9,y:50},{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out",stagger:.12,delay:.3}),H.length>0){const g={root:null,rootMargin:"0px",threshold:.2},d=new IntersectionObserver(v=>{v.forEach(L=>{L.isIntersecting&&(gsap.to(L.target,{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out"}),d.unobserve(L.target))})},g);H.forEach(v=>{gsap.set(v,{opacity:0,scale:.9,y:50}),d.observe(v)}),window.workPhotoObserver=d}}finally{ie=!1}setTimeout(()=>{we()},100)}let fe=!1;function we(){const e=document.querySelector(".category-title");if(!e||fe)return;fe=!0,gsap.registerPlugin(ScrollTrigger),gsap.set(e,{opacity:0,visibility:"hidden"});const t=new SplitType(e,{types:"chars"});t.chars.forEach(o=>{gsap.set(o,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),t.chars.forEach(o=>{const c=o.textContent,p=document.createElement("span");p.style.display="inline-block",p.textContent=c,o.textContent="",o.appendChild(p),gsap.set(p,{y:"100%",opacity:0})});const n=document.querySelector(".work-categories-wrapper");n&&gsap.set(n,{opacity:0,visibility:"hidden"}),gsap.to(e,{opacity:1,visibility:"visible",duration:0});const i=gsap.timeline();if(i.to(t.chars.map(o=>o.querySelector("span")),{y:0,opacity:1,duration:.8,stagger:.03,ease:"power2.out",delay:.3}),n){const o=Array.from(n.querySelectorAll(".category-link"));o.length>0?(o.forEach(c=>{gsap.set(c,{opacity:0,y:20})}),i.to(n,{opacity:1,visibility:"visible",duration:0},.4),i.fromTo(o,{opacity:0,y:20},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power2.out"},.4)):i.to(n,{opacity:1,visibility:"visible",duration:.6,ease:"power2.out"},.4)}}function Re(){const e=document.querySelectorAll(".work-categories-title-wrapper, .work-categories-top-margin");e&&gsap.matchMedia().add("(max-width: 767px)",()=>{gsap.to(e,{scale:.7,opacity:0,scrollTrigger:{trigger:e,start:"top top",end:"+=200",scrub:.5,invalidateOnRefresh:!0}})})}function Me(){const e=document.querySelector(".section.categories");if(!e)return;gsap.set(e,{opacity:0,y:60});const t=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&(gsap.to(e,{opacity:1,y:0,duration:1,ease:"power2.out"}),window.initCategories&&window.initCategories(),t.unobserve(i.target))})},{rootMargin:"-100px",threshold:.1});t.observe(e),window.workCategoriesObserver=t}function Ne(){window.workPhotoObserver&&(window.workPhotoObserver.disconnect(),window.workPhotoObserver=null),window.workCategoriesObserver&&(window.workCategoriesObserver.disconnect(),window.workCategoriesObserver=null),fe=!1}window.initWork=He;window.initCategoryTitleReveal=we;window.initCategoryTitleAnimation=Re;window.initWorkCategoriesReveal=Me;window.cleanupWorkPage=Ne;function ve(){if(document.querySelector('[data-barba-namespace^="work"]')&&document.querySelectorAll(".photo-container").length>0&&!ie){He(),we(),Re(),Me();const t=()=>{window.initPhotoModal?window.initPhotoModal():setTimeout(t,50)};setTimeout(t,100)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ve):ve();window.photoModalCleanup=null;function Ie(){window.photoModalCleanup&&(window.photoModalCleanup(),window.photoModalCleanup=null);const e=document.querySelector(".modal-photo");if(!e)return;const t=e.querySelector(".modal-photo-container"),n=e.querySelector(".modal-title"),i=e.querySelector(".modal-exif"),o=e.querySelector(".modal-close"),c=e.querySelector('[data-photo-nav="previous"]'),p=e.querySelector('[data-photo-nav="next"]'),C=document.querySelectorAll(".photo");gsap.registerPlugin(Flip);let r=0,m=[],s=null,w=[];function k(a){const h=a.getBoundingClientRect(),u=window.scrollY||document.documentElement.scrollTop,y=h.top+u-100;window.scrollTo({top:y,behavior:"auto"})}C.forEach((a,b)=>{const h=window.shuffledPhotos.find(S=>S.querySelector(".photo")===a),u=window.shuffledPhotos.indexOf(h);m[u]={src:a.getAttribute("src"),title:a.getAttribute("data-title"),exif:a.getAttribute("data-exif"),category:a.getAttribute("data-category"),element:a,placeholder:null};const y=()=>{r=u,s=a,x(m[r])};a.addEventListener("click",y),w.push({element:a,handler:y})});function x(a){window.lenis&&window.lenis.stop(),document.body.style.overflow="hidden";const b=Flip.getState(a.element,{props:"all"}),h=a.element.originalParent,u=document.createElement("div");u.classList.add("photo-placeholder"),u.style.width=a.element.offsetWidth+"px",u.style.height=a.element.offsetHeight+"px",h.insertBefore(u,a.element),a.placeholder=u;const y=Array.from(document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title")).filter(S=>S!==a.element);gsap.to(y,{opacity:0,duration:.3,ease:"power2.inOut"}),t.appendChild(a.element),gsap.set(a.element,{opacity:1}),e.style.display="grid",e.classList.add("active"),e.style.backgroundColor="transparent",n.textContent=a.title,i.textContent=a.exif,gsap.set([n,i,o,c,p],{opacity:0,y:20}),Flip.from(b,{duration:.8,ease:"power2.inOut",absolute:!0,onComplete:()=>{e.classList.contains("active")&&gsap.to(e,{backgroundColor:"var(--_colors---off-white)",duration:.4,ease:"power2.out"}),gsap.to([n,i,o,c,p],{opacity:1,y:0,duration:.4,stagger:.1,ease:"power2.out"})}})}function l(){if(!s)return;gsap.killTweensOf([e,n,i,o,c,p]),gsap.killTweensOf(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title"),window.lenis&&window.lenis.start(),document.body.style.overflow="";const a=m[r],b=a.element,h=document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title");gsap.set(e,{backgroundColor:"transparent"}),gsap.to([n,i,o,c,p],{opacity:0,y:20,duration:.3,ease:"power2.in"});const u=b.originalParent,y=u.getBoundingClientRect(),S=window.scrollY||document.documentElement.scrollTop,P=y.top+S-window.innerHeight/2+y.height/2;window.scrollTo({top:P,behavior:"auto"});const M=Flip.getState(b,{props:"all"});a.placeholder&&u&&(u.insertBefore(b,a.placeholder),a.placeholder.remove(),a.placeholder=null),Flip.from(M,{duration:.8,ease:"power2.inOut",onUpdate:function(){this.progress()>.7&&gsap.to(h,{opacity:1,duration:.3,ease:"power2.out"})},onComplete:()=>{e.classList.remove("active"),e.style.display="none",s=null}})}function H(){const a=document.querySelectorAll(".photo");gsap.killTweensOf(a);let b=r<m.length-1?r+1:0;const h=m[r],u=m[b];h.placeholder&&h.element.originalParent&&(gsap.set(h.element,{x:0,opacity:1,scale:1,rotation:0}),h.element.originalParent.insertBefore(h.element,h.placeholder),h.placeholder.remove(),h.placeholder=null);const y=Array.from(document.querySelectorAll(".photo")).filter(M=>M!==u.element);gsap.set(y,{opacity:0});const S=u.element.originalParent,P=document.createElement("div");P.classList.add("photo-placeholder"),P.style.width=u.element.offsetWidth+"px",P.style.height=u.element.offsetHeight+"px",S.insertBefore(P,u.element),u.placeholder=P,k(u.element),t.innerHTML="",t.appendChild(u.element),gsap.set(u.element,{opacity:1,x:"100%",scale:.95,rotation:3}),gsap.to(u.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),n.textContent=u.title,i.textContent=u.exif,s=u.element,r=b}function g(){const a=document.querySelectorAll(".photo");gsap.killTweensOf(a);let b=r>0?r-1:m.length-1;const h=m[r],u=m[b];h.placeholder&&h.element.originalParent&&(gsap.set(h.element,{x:0,opacity:1,scale:1,rotation:0}),h.element.originalParent.insertBefore(h.element,h.placeholder),h.placeholder.remove(),h.placeholder=null);const y=Array.from(document.querySelectorAll(".photo")).filter(M=>M!==u.element);gsap.set(y,{opacity:0});const S=u.element.originalParent,P=document.createElement("div");P.classList.add("photo-placeholder"),P.style.width=u.element.offsetWidth+"px",P.style.height=u.element.offsetHeight+"px",S.insertBefore(P,u.element),u.placeholder=P,k(u.element),t.innerHTML="",t.appendChild(u.element),gsap.set(u.element,{opacity:1,x:"-100%",scale:.95,rotation:-3}),gsap.to(u.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),n.textContent=u.title,i.textContent=u.exif,s=u.element,r=b}const d=a=>{e.classList.contains("active")&&(a.key==="Escape"&&l(),a.key==="ArrowRight"&&H(),a.key==="ArrowLeft"&&g())},v=a=>{a.target===e&&l()};document.addEventListener("keydown",d),e.addEventListener("click",v),o.addEventListener("click",l),c.addEventListener("click",g),p.addEventListener("click",H);const L=new Hammer(t);L.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});let R=!1,A=0;L.on("panstart",function(a){R=!0,A=a.center.x,gsap.killTweensOf(s)}),L.on("pan",function(a){if(!R||!s)return;const h=(a.center.x-A)/window.innerWidth*100,y=Math.min(Math.max(h*.5,-50),50),S=Math.abs(y),P=gsap.utils.mapRange(0,50,1,.3)(S),M=gsap.utils.mapRange(0,50,1,0)(S);gsap.set(s,{x:y+"%",rotation:y*.05,scale:P,opacity:M})}),L.on("panend",function(a){if(!R||!s)return;R=!1;const b=Math.abs(a.velocity),h=a.deltaX,u=window.innerWidth*.2;Math.abs(h)>u||b>.5?h<0?H():g():gsap.to(s,{x:"0%",rotation:0,scale:1,opacity:1,duration:.3,ease:"power2.out"})}),window.photoModalCleanup=()=>{w.forEach(({element:a,handler:b})=>{a.removeEventListener("click",b)}),document.removeEventListener("keydown",d),e.removeEventListener("click",v),o.removeEventListener("click",l),c.removeEventListener("click",g),p.removeEventListener("click",H),L&&L.destroy(),e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="none",window.lenis&&window.lenis.start(),document.body.style.overflow="")}}window.initPhotoModal=Ie;function he(){if(!document.querySelector(".section.about-page"))return;gsap.registerPlugin(ScrollTrigger);const t=document.createElement("style");t.textContent=`
    .about-page-title {
      overflow: visible;
    }
    
    .about-page-title .line {
      display: block;
      opacity: 0;
    }
  `,document.head.appendChild(t);const n=document.querySelector(".about-page-mobile-img"),i=document.querySelector(".about-page-title");document.querySelector(".about-page-paragraph");const o=document.querySelector("#w-node-_5cfb6280-6a33-c948-6914-d1d14a02033e-e0820647"),c=document.querySelector("#w-node-_8ff28dca-4908-092a-a93e-64674276b761-e0820647"),p=document.querySelector("#w-node-d37b0f9a-3049-7721-1f0b-b2dfa6b25604-e0820647"),C=document.querySelector("#w-node-a792f731-c023-e6a4-a3a2-3b0f75706c28-e0820647"),r=document.querySelector("#w-node-_38752304-f930-7aec-55b4-e5bb69d7261b-e0820647"),m=document.querySelector("#w-node-af8686f0-0eff-8a7c-0ed7-beca4d3b4ae5-e0820647"),s=document.querySelector("#w-node-f5866f73-1277-b3c6-9637-905ed2896c1d-e0820647"),w=document.querySelector("#w-node-_26bcf290-3970-d3ae-4c5a-8a87562b3b8f-e0820647"),k=document.querySelector("#w-node-_959dd736-48e6-8ca1-a499-ecdb1597fdfc-e0820647"),x=document.querySelector("#w-node-_81d87156-36a4-f557-ac99-5a50eaa2aede-e0820647"),l=document.querySelectorAll(".divider"),H=[],g=gsap.timeline();n&&(gsap.set(n,{clipPath:"inset(0% 0% 100% 0%)"}),g.to(n,{clipPath:"inset(0% 0% 0% 0%)",duration:1.2,ease:"expo.inOut"},0));let d=0,v=.6,L=0;if(i){const a=new SplitType(i,{types:"lines"});if(H.push(a),a.lines&&a.lines.length>0){const b=a.lines;gsap.set(b,{opacity:0,y:20}),b.forEach((u,y)=>{g.to(u,{opacity:1,y:0,duration:.4,ease:"power2.out"},v+y*.15)}),d=v+(b.length-1)*.15+.4;const h=d-v;L=v+h*.7-.15,g.call(()=>{},null,d)}}const R=[{divider:l[0],title:o,content:r},{divider:l[1],title:c,content:m},{divider:l[2],title:p,content:s},{divider:l[3],title:C,content:w},{divider:l[4],title:k,content:x}];let A=L;R.forEach((a,b)=>{if(!a.divider)return;if(gsap.set(a.divider,{width:0,opacity:0}),a.title&&gsap.set(a.title,{opacity:0,y:20}),a.content&&gsap.set(a.content,{opacity:0,y:20}),a.divider.getBoundingClientRect().top<window.innerHeight){g.to(a.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},A),a.title&&g.to(a.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},A+.15),a.content&&g.to(a.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},A+.25);const S=A+.25+.6-A;A=A+S*.7}else ScrollTrigger.create({trigger:a.divider,start:"top 92%",once:!0,onEnter:()=>{const y=gsap.timeline();y.to(a.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},0),a.title&&y.to(a.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},.15),a.content&&y.to(a.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},.25)}})}),typeof barba<"u"&&barba.hooks.beforeLeave(()=>{H.forEach(a=>{a&&a.revert&&a.revert()}),ScrollTrigger.getAll().forEach(a=>a.kill()),t&&t.parentNode&&t.parentNode.removeChild(t)})}window.initAbout=he;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",he):he();Fe();window.initPhotoModal=Ie;
