function Ae(){const e=document.querySelectorAll(".nav-link"),t=window.location.pathname;e.forEach(r=>{const o=r.getAttribute("href");t===o||t==="/"&&o==="/"?(r.setAttribute("aria-current","page"),r.classList.add("current","w--current")):(r.removeAttribute("aria-current"),r.classList.remove("current","w--current"))})}function qe(e){e.startsWith("work")&&window.photoModalCleanup&&window.photoModalCleanup(),e.startsWith("work")&&window.cleanupWorkPage&&window.cleanupWorkPage(),ScrollTrigger.getAll().forEach(r=>{r.kill()}),document.querySelectorAll(".split-type").forEach(r=>{r.splitType&&r.splitType.revert()})}function K(e){var t,r,o,n,a,u,f,p,y;switch(e){case"home":(t=window.initHero)==null||t.call(window),(r=window.initAboutSection)==null||r.call(window),(o=window.initHighlights)==null||o.call(window),(n=window.initCategories)==null||n.call(window);break;case"work":case"work-abstract":case"work-nature":case"work-people":case"work-products":case"work-architecture":(a=window.initWork)==null||a.call(window),(u=window.initCategoryTitleAnimation)==null||u.call(window),(f=window.initWorkCategoriesReveal)==null||f.call(window),(p=window.initPhotoModal)==null||p.call(window);break;case"about":(y=window.initAbout)==null||y.call(window);break;default:console.warn(`âš ï¸ Nepoznati namespace: ${e}`)}}function Me(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),barba.hooks.beforeEnter(()=>{localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"))}),barba.init({transitions:[{name:"fade",leave(e){return window.lenis&&window.lenis.stop(),Ae(),qe(e.current.namespace),localStorage.getItem("dark-mode")==="enabled"&&(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")),gsap.to(e.current.container,{opacity:0,duration:.15})},beforeEnter(e){localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode")),window.lenis?window.lenis.scrollTo(0,{immediate:!0,force:!0}):window.scrollTo(0,0)},enter(e){return gsap.to(e.next.container,{opacity:1,duration:.15})},after(e){K(e.next.namespace),requestAnimationFrame(()=>{window.lenis&&window.lenis.start(),ScrollTrigger.refresh(!0)})}}],views:[{namespace:"home"},{namespace:"work"},{namespace:"about"},{namespace:"work-abstract"},{namespace:"work-nature"},{namespace:"work-people"},{namespace:"work-products"},{namespace:"work-architecture"}]})}window.addEventListener("beforeunload",()=>{window.scrollTo(0,0)});Me();var de;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{var t;const e=(t=document.querySelector('[data-barba="container"]'))==null?void 0:t.getAttribute("data-barba-namespace");e&&K(e)});else{const e=(de=document.querySelector('[data-barba="container"]'))==null?void 0:de.getAttribute("data-barba-namespace");e&&K(e)}function ue(){const e=new Lenis({lerp:.1,wheelMultiplier:1,smoothWheel:!0,smoothTouch:!1,infinite:!1});window.lenis=e,e.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{e.raf(t*1e3)}),gsap.ticker.lagSmoothing(0)}window.initLenis=ue;ue();function pe(){const e=document.body,t=document.querySelector(".nav-theme-switcher");localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode")),t&&t.addEventListener("click",()=>{e.classList.contains("ui-dark-mode")?(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode"),console.log("Removed .ui-dark-mode from html and body"),localStorage.setItem("dark-mode","disabled")):(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode"),console.log("Added .ui-dark-mode to html and body"),localStorage.setItem("dark-mode","enabled"))})}window.initDarkMode=pe;pe();function me(){const e=document.querySelector(".section.footer"),t=e==null?void 0:e.previousElementSibling;gsap.registerPlugin(ScrollTrigger),t&&(gsap.to(t,{scrollTrigger:{trigger:t,start:"top top",end:()=>`+=${window.innerHeight*.5}`,pin:!1,scrub:!0,id:"footer-prev-section"}}),gsap.to(e,{scrollTrigger:{trigger:t,start:()=>`bottom+=${window.innerHeight*.5} bottom`,end:"bottom bottom",scrub:!0,id:"footer-main"}}),gsap.set(t,{zIndex:1}))}window.initFooter=me;me();function ge(e,t=!0){e.dataset.originalText||(e.dataset.originalText=e.textContent);const r=e.dataset.originalText;e.style.position="relative",e.style.zIndex="100000";let o;e.querySelector(".shuffle-text")?o=e.querySelector(".shuffle-text"):(o=document.createElement("span"),o.className="shuffle-text",o.textContent=r,e.textContent="",e.appendChild(o)),o.style.pointerEvents="none";let n=!1,a;const u=y=>{const c=y.split("");for(let L=c.length-1;L>0;L--){const C=Math.floor(Math.random()*(L+1));[c[L],c[C]]=[c[C],c[L]]}return c.join("")},f=()=>{a&&(clearInterval(a),a=null),o.textContent=r,n=!1},p=()=>{if("ontouchstart"in window||navigator.maxTouchPoints>0||n)return;n=!0;let y=0;a&&clearInterval(a),a=setInterval(()=>{y<3?(o.textContent=u(r),y++):(o.textContent=r,clearInterval(a),a=null,n=!1)},100)};return t&&("ontouchstart"in window||navigator.maxTouchPoints>0||e.addEventListener("mouseenter",p),e.addEventListener("click",function(c){f()})),p}function fe(){document.querySelectorAll(".link, .cta").forEach(e=>{ge(e,!0)})}window.createShuffleEffect=ge;window.initLinksHover=fe;fe();function he(){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)&&!e.match(/FxiOS/i)}function Oe(){if(!he())return;document.body.addEventListener("click",function(o){const n=o.target.closest("a, button");n&&(n.style.transition="opacity 0.2s ease-out",n.style.opacity="0.5",setTimeout(()=>{n.style.opacity="1"},300))});function e(o){var n=o.tagName.toLowerCase(),a=o.dataset.bind,u=a&&a.indexOf("click")>-1||n=="a"||n=="button";return u}var t={touchend:function(o,n){n.dataset._clicked_="",n.dataset._mousemove_="0",n.dataset._timeOutId_=""},mouseover:function(o){o.preventDefault()},mousemove:function(o,n){o.preventDefault();var a=+(n.dataset._mousemove_||"0");if(a=a+1,console.log("mousemoves: "+a),n.dataset._mousemove_=a,a>1&&!n.dataset._timeOutId_){var u=setTimeout(function(){console.log("double mousemove click fired"),n.click()},80);n.dataset._timeOutId_=u}},click:function(o,n){if(n.dataset._clicked_){o.isTrusted&&(console.log("prevented doubleclick"),o.preventDefault());return}n.dataset._timeOutId_&&(console.log("cleared timeout"),clearTimeout(+n.dataset._timeOutId_)),n.dataset._clicked_="true"}};function r(o){var n=o.target;if(n&&n.click&&n.tagName&&n.dataset&&e(n)){var a=o.type;console.log(a,n),t[a]&&t[a](o,n)}}document.addEventListener("touchend",r,!0),document.addEventListener("mouseover",r,!0),document.addEventListener("mousemove",r,!0),document.addEventListener("click",r,!0)}function we(){he()&&Oe()}window.initIosSafariFix=we;we();const z={enabled:!1,logs:[],lastScrollY:0,lastTimestamp:0,freezeThreshold:100,init(){this.enabled&&(console.log("ðŸ” ScrollDebugger aktiviran"),window.lenis&&window.lenis.on("scroll",e=>{this.logScroll("LENIS",e)}),window.ScrollTrigger&&(ScrollTrigger.addEventListener("refresh",()=>{console.log("ðŸ”„ ScrollTrigger REFRESH event")}),ScrollTrigger.addEventListener("scrollStart",()=>{console.log("â–¶ï¸ ScrollTrigger SCROLL START")}),ScrollTrigger.addEventListener("scrollEnd",()=>{console.log("â¸ï¸ ScrollTrigger SCROLL END")})),this.startRAFMonitoring(),this.trackScrollDirection(),console.log("âœ… ScrollDebugger setup complete"))},logScroll(e,t){var u;const r=performance.now(),o=r-this.lastTimestamp,n=t.scroll-this.lastScrollY,a=n>0?"â¬‡ï¸ DOWN":"â¬†ï¸ UP";o>this.freezeThreshold&&this.lastTimestamp>0&&console.warn(`ðŸš¨ FREEZE DETECTED! ${o.toFixed(2)}ms gap`,{scrollPosition:t.scroll,direction:a,gap:`${o.toFixed(2)}ms`,scrollDelta:n}),Math.abs(n)>1&&console.log(`ðŸ“œ ${e} ${a}`,{scroll:t.scroll.toFixed(2),velocity:((u=t.velocity)==null?void 0:u.toFixed(2))||"N/A",delta:n.toFixed(2),time:o.toFixed(2)+"ms"}),this.lastScrollY=t.scroll,this.lastTimestamp=r},startRAFMonitoring(){let e=performance.now(),t=0;const r=o=>{var a;const n=o-e;n>32&&console.warn(`â±ï¸ SLOW FRAME: ${n.toFixed(2)}ms (${(1e3/n).toFixed(1)}fps)`,{framesSinceLastLog:t,scrollY:((a=window.lenis)==null?void 0:a.scroll)||window.scrollY}),t++,e=o,requestAnimationFrame(r)};requestAnimationFrame(r)},trackScrollDirection(){let e=null;const t=()=>{var n;const r=((n=window.lenis)==null?void 0:n.scroll)||window.scrollY,o=r>this.lastScrollY?"down":"up";o!==e&&e!==null&&console.log(`ðŸ”„ DIRECTION CHANGE: ${e} â†’ ${o}`,{scrollY:r.toFixed(2),activeScrollTriggers:ScrollTrigger.getAll().length}),e=o,requestAnimationFrame(t)};requestAnimationFrame(t)},logScrollTriggers(){const e=ScrollTrigger.getAll();console.log(`ðŸ“Š Active ScrollTriggers: ${e.length}`),e.forEach(t=>{console.log(`  - ${t.vars.id||"unnamed"}`,{start:t.start,end:t.end,progress:t.progress.toFixed(2),isActive:t.isActive})})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>z.init()):z.init();window.ScrollDebugger=z;document.addEventListener("keydown",e=>{var t,r,o;(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(console.log("ðŸ” === SCROLL DEBUG DUMP ==="),z.logScrollTriggers(),console.log("Lenis state:",{scroll:(t=window.lenis)==null?void 0:t.scroll,velocity:(r=window.lenis)==null?void 0:r.velocity,direction:(o=window.lenis)==null?void 0:o.direction}),console.log("========================="))});function He(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){console.log("ðŸ–±ï¸ Touch device detektiran - custom cursor onemoguÄ‡en");return}const t=document.createElement("div");t.id="custom-cursor",t.style.cssText=`
    position: fixed;
    width: 56px;
    height: 32px;
    border-radius: 999px;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
    background-color: #ffffff;
    mix-blend-mode: difference;
    opacity: 0;
    display: none;
  `,document.body.appendChild(t);let r=window.innerWidth/2,o=window.innerHeight/2;const n=p=>{r=p.clientX,o=p.clientY,t.style.left=`${r}px`,t.style.top=`${o}px`},a=()=>{t.style.display="block",setTimeout(()=>{t.style.opacity="1"},10)},u=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},200)};window.addEventListener("hero:drag:start",a),window.addEventListener("hero:drag:end",u);const f=p=>{n(p)};return window.addEventListener("mousemove",f),()=>{t.remove(),window.removeEventListener("mousemove",f),window.removeEventListener("hero:drag:start",a),window.removeEventListener("hero:drag:end",u)}}function ye(){const e=document.querySelector(".section.hero"),t=document.querySelector(".hero-title"),r=document.querySelectorAll(".hero-footer");if(!e){console.error("âŒ Hero sekcija nije pronaÄ‘ena!");return}r.forEach(d=>{d.style.position="relative",d.style.zIndex="10",d.style.pointerEvents="auto",d.querySelectorAll('a, button, [role="button"]').forEach(P=>{P.style.position="relative",P.style.zIndex="11",P.style.pointerEvents="auto"})});const o=document.querySelector(".hero-images-wrapper");if(!o){console.warn("Hero wrapper nije pronaÄ‘en!");return}const n=Array.from(document.querySelectorAll(".hero-image")),a=n.length;if(a===0){console.warn("âš ï¸ Nema slika za prikaz!");return}const u=document.querySelector(".hero-images-container");if(typeof THREE>"u"){console.error("âŒ Three.js nije uÄitan! Provjerite Webflow Footer Code.");return}n.forEach(d=>{d.style.display="none"}),o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="auto",u.innerHTML="",u.style.position="relative",u.style.width="100%",u.style.height="100%",u.style.overflow="hidden",u.style.pointerEvents="auto";const f=new THREE.Scene,p=new THREE.PerspectiveCamera(40,u.offsetWidth/u.offsetHeight,.1,3e3);p.position.z=900;const y=window.innerWidth<=768;p.position.y=y?-50:0;const c=new THREE.WebGLRenderer({alpha:!0,antialias:!0});c.setSize(u.offsetWidth,u.offsetHeight),c.setPixelRatio(Math.min(window.devicePixelRatio,2)),c.setClearColor(0,0),c.domElement.style.position="absolute",c.domElement.style.top="0",c.domElement.style.left="0",c.domElement.style.width="100%",c.domElement.style.height="100%",c.domElement.style.zIndex="1",u.appendChild(c.domElement);const L=new THREE.AmbientLight(16777215,.6);f.add(L);const C=new THREE.DirectionalLight(16777215,.4);C.position.set(0,500,800),f.add(C);const R=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // Å alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,x=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vec4 texColor = texture2D(uTexture, vUv);
      
      // Shadow na rubovima za naglaÅ¡avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `,A=new THREE.TextureLoader,l=[],h=new THREE.Group;f.add(h);const v=Math.random()*.4-.2,b=Math.random()*.4-.2;h.rotation.x=v,h.rotation.z=b;const q=280,E=165,i=185,w=2*Math.PI/a;let m=0;const s=new Array(a);n.forEach((d,S)=>{A.load(d.src,P=>{const _=new THREE.PlaneGeometry(E,i,64,1),V=new THREE.ShaderMaterial({uniforms:{uTexture:{value:P},uBend:{value:.0015},uOpacity:{value:0}},vertexShader:R,fragmentShader:x,transparent:!0,side:THREE.DoubleSide}),H=new THREE.Mesh(_,V),Z=-w*S+Math.PI,Le=Math.sin(Z)*q,Ce=Math.cos(Z)*q;H.position.set(Le,30,Ce),H.rotation.y=Z,H.material.uniforms.uOpacity.value=0,H.scale.set(.7,.7,.7),h.add(H),s[S]=H,m++,m===a&&(s.forEach(Pe=>l.push(Pe)),T())},void 0,P=>{console.error(`âŒ GreÅ¡ka pri uÄitavanju slike ${S}:`,P)})});function g(d){if(d){const S=d.textContent.trim();d.innerHTML=S.split("").map(P=>`<span style="display: inline-block;">${P===" "?"&nbsp;":P}</span>`).join("")}}g(t);const k=t?t.querySelectorAll("span"):[];gsap.set(r,{y:20,opacity:0}),gsap.set(k,{y:200,opacity:0});function T(){const d=gsap.timeline();d.to(k,{y:0,opacity:1,duration:.3,stagger:.03,ease:"power3.out"},0),d.to(r,{y:0,opacity:1,duration:.4,stagger:.1,ease:"power3.out"},.2),xe(.008),l.forEach((_,V)=>{const H=.2+V*.15;d.to(_.material.uniforms.uOpacity,{value:1,duration:.6,ease:"power1.out"},H),d.to(_.scale,{x:1,y:1,z:1,duration:.6,ease:"back.out(1.2)"},H)});const S=.2+(l.length-1)*.15+.6,P={value:.008};d.to(P,{value:D,duration:2,ease:"power2.out",onUpdate:()=>{O=P.value},onComplete:()=>{M()}},S)}function M(){const d=h.rotation.x,S=h.rotation.z;gsap.to(h.rotation,{x:d+.03,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1}),gsap.to(h.rotation,{z:S+.025,duration:5.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}let D=.001,B=0,O=D,Te=.015;function xe(d){O=d}let te=0,oe=0,I=!1,F=0,X=0,N=0,$=!1,j=0;const ne=d=>{I=!0,d.clientX,F=d.clientX,N=d.clientX,X=0,gsap.killTweensOf(h.rotation),j=O,O=0,$=!0,window.dispatchEvent(new CustomEvent("hero:drag:start")),c.domElement.style.cursor="grabbing"},ie=d=>{if(!I)return;d.preventDefault(),F=d.clientX;const S=F-N;h.rotation.y+=S*9e-4,X=S*9e-4,N=F},re=()=>{if(!I)return;I=!1,c.domElement.style.cursor="grab",window.dispatchEvent(new CustomEvent("hero:drag:end"));const d=X*80;gsap.to(h.rotation,{y:h.rotation.y+d,duration:3,ease:"power2.out"}),setTimeout(()=>{I||gsap.to({speed:0},{speed:j,duration:1,ease:"power2.inOut",onUpdate:function(){O=this.targets()[0].speed},onComplete:()=>{O=j,$=!1}})},2500)};c.domElement.addEventListener("mousedown",ne),window.addEventListener("mousemove",ie),window.addEventListener("mouseup",re),c.domElement.style.cursor="grab",c.domElement.style.userSelect="none",c.domElement.style.webkitUserSelect="none",c.domElement.style.touchAction="auto";let ae=!0;const U=new IntersectionObserver(d=>{d.forEach(S=>{ae=S.isIntersecting})},{threshold:0,rootMargin:"100px"});U.observe(e);const se=()=>{ae&&(B+=(O-B)*.15,h.rotation.y+=B,c.render(f,p))};gsap.ticker.add(se);function le(){const d=u.offsetWidth,S=u.offsetHeight;p.aspect=d/S,p.updateProjectionMatrix(),c.setSize(d,S)}window.addEventListener("resize",le);let Y=!1;const G=()=>{I||$||Y||(Y=!0,requestAnimationFrame(()=>{const d=window.pageYOffset||document.documentElement.scrollTop,S=Math.abs(d-te);oe=Math.min(S*8e-4,Te),S>.5?(gsap.killTweensOf(h.rotation),O=D+oe):O=D,te=d,Y=!1}))};window.removeEventListener("scroll",G),window.addEventListener("scroll",G,{passive:!0}),window.addEventListener("barba:before-leave",()=>{gsap.ticker.remove(se),gsap.killTweensOf(h.rotation),U&&U.disconnect(),c.domElement.removeEventListener("mousedown",ne),window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",re),l.forEach(d=>{d.geometry&&d.geometry.dispose(),d.material&&(d.material.uniforms.uTexture.value&&d.material.uniforms.uTexture.value.dispose(),d.material.dispose())}),c.dispose(),window.removeEventListener("resize",le),window.removeEventListener("scroll",G)})}window.initHero=ye;document.querySelector(".hero-images-container")&&ye();function J(){if(!document.querySelector('[data-barba-namespace="home"]'))return;const t=document.querySelector(".section.about"),r=document.querySelector(".home-about-title"),o=document.querySelector(".about-scroll");if(!o||!t||!r){console.error("âŒ About Section elementi nisu kompletni");return}gsap.registerPlugin(ScrollTrigger);const n=new SplitType(r,{types:"words"}),a=new SplitType(o,{types:"words"});n.words.forEach(f=>{gsap.set(f,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),a.words.forEach(f=>{gsap.set(f,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})});const u=f=>{f.forEach(p=>{const y=p.textContent,c=document.createElement("span");c.style.display="inline-block",c.textContent=y,p.textContent="",p.appendChild(c),gsap.set(c,{y:"100%",opacity:0})})};u(n.words),u(a.words),n.words.slice(0,6).forEach(f=>{const p=f.querySelector("span");gsap.set(p,{y:0,opacity:1})}),gsap.to(n.words.slice(6).map(f=>f.querySelector("span")),{y:0,opacity:1,duration:.6,stagger:.015,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 60%",toggleActions:"play none none none",once:!0,id:"about-title-reveal"}}),gsap.to(a.words.map(f=>f.querySelector("span")),{y:0,opacity:1,duration:.6,stagger:.015,ease:"power2.out",scrollTrigger:{trigger:o,start:"top 80%",toggleActions:"play none none none",once:!0,id:"about-scroll-reveal"}})}window.initAboutSection=J;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J):J();function ve(){const e=document.querySelector(".section.highlights"),t=document.querySelector(".highlights-wrapper");if(!e||!t)return;gsap.registerPlugin(ScrollTrigger);const r=t.scrollWidth-e.offsetWidth;gsap.to(t,{x:-r,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:`+=${r}`,scrub:1,pin:!0,anticipatePin:1,invalidateOnRefresh:!0,id:"highlights-horizontal"}});const o=document.querySelectorAll(".highlights-card"),n=window.innerWidth<=767;gsap.set(o,{opacity:0,y:50}),gsap.to(o,{opacity:1,y:0,duration:.6,ease:"power1.inOut",stagger:.2,scrollTrigger:{trigger:".highlights-wrapper",start:"top 80%",toggleActions:"play none none none",id:"highlights-cards"}})}window.initHighlights=ve;ve();function Q(){const e=document.querySelectorAll(".categories-row");if(!document.querySelector(".section.categories")){console.warn("Element .section.categories nije pronaÄ‘en na stranici");return}e.forEach(r=>{r.addEventListener("mouseenter",()=>{gsap.to(e,{opacity:.1,duration:.3,ease:"power2.out"}),gsap.to(r,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(f=>{const p=f.querySelector(".categories-photo");f!==r&&gsap.to(p,{opacity:0,duration:.3,ease:"power2.out"})});const o=r.querySelector(".categories-photo");gsap.to(o,{opacity:1,height:300,duration:.3,ease:"power1.out"});const n=r.querySelector(".cta");gsap.to(n,{opacity:1,duration:.3,ease:"power1.out"});const a=r.querySelector(".title-l"),u=r.querySelector(".cta");a&&createShuffleEffect(a,!1)(),u&&createShuffleEffect(u,!1)()}),r.addEventListener("mouseleave",()=>{gsap.to(e,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(n=>{const a=n.querySelector(".categories-photo");gsap.to(a,{opacity:0,height:0,duration:.3,ease:"power1.out"})});const o=r.querySelector(".cta");gsap.to(o,{opacity:0,duration:.3,ease:"power1.out"})})})}window.initCategories=Q;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.querySelector('[data-barba-namespace="home"]')&&Q()}):document.querySelector('[data-barba-namespace="home"]')&&Q();let W=!1;async function Se(){if(W)return;if(W=!0,!document.querySelectorAll(".photo-container").length){W=!1;return}try{let p=function(){const l=window.innerWidth;return l<768?f.mobile:l<992?f.tablet:f.desktop},y=function(){const l=p();let h=!0,v=1,b=null,q=null;window.shuffledPhotos.forEach((E,i)=>{const w=E.querySelector(".photo"),s=w.naturalWidth>w.naturalHeight?l.horizontalSpan:l.verticalSpan;let g;if(l.columns===1)g=1;else if(h){do g=l.left[Math.floor(Math.random()*l.left.length)];while(g===b);b=g}else{do g=l.right[Math.floor(Math.random()*l.right.length)];while(g===q);q=g}E.style.display="block",E.style.gridColumnStart=g,E.style.gridColumnEnd=g+s,E.style.gridRowStart=v,h=!h,v++})};var t=p,r=y;const n=Array.from(document.querySelectorAll(".photo-container"));n.forEach(l=>{l.style.opacity="0"}),document.querySelectorAll(".photo").forEach(l=>{l.originalParent=l.parentElement}),n.forEach((l,h)=>{const v=l.querySelector(".photo");v&&(h<6?(v.setAttribute("loading","eager"),v.setAttribute("fetchpriority","high")):v.setAttribute("loading","lazy"),v.setAttribute("decoding","async"))}),n.forEach(l=>{l.style.display="",l.style.gridColumn="",l.style.gridColumnStart="",l.style.gridColumnEnd="",l.style.gridRowStart="",l.style.transform=""});const u=n.slice(0,30);n.slice(30).forEach(l=>{l.style.display="none"}),window.shuffledPhotos=u.sort(()=>Math.random()-.5),window.lastPath=window.location.pathname;const f={desktop:{columns:12,left:[2,3],right:[8,9],horizontalSpan:3,verticalSpan:2},tablet:{columns:8,left:[2,3],right:[5,6],horizontalSpan:3,verticalSpan:2},mobile:{columns:1,left:[1],right:[1],horizontalSpan:1,verticalSpan:1}},L=window.shuffledPhotos.map(l=>l.querySelector(".photo")).map(l=>l.complete&&l.naturalWidth>0?Promise.resolve():new Promise(h=>{l.onload=()=>h(),l.onerror=()=>h()}));await Promise.all(L),window.isSettingUpGrid||(window.isSettingUpGrid=!0,y(),window.isSettingUpGrid=!1);const C="ontouchstart"in window||navigator.maxTouchPoints>0,R=5,x=window.shuffledPhotos.slice(0,R),A=window.shuffledPhotos.slice(R);if(C?gsap.fromTo(x,{opacity:0,scale:.9},{opacity:1,scale:1,duration:.8,ease:"power3.out",stagger:.1}):gsap.fromTo(x,{opacity:0,scale:.9,y:50},{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out",stagger:.1}),A.length>0){const l={root:null,rootMargin:"100px",threshold:.1},h=new IntersectionObserver(v=>{v.forEach(b=>{b.isIntersecting&&(C?gsap.to(b.target,{opacity:1,scale:1,duration:.8,ease:"power3.out"}):gsap.to(b.target,{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out"}),h.unobserve(b.target))})},l);A.forEach(v=>{C?gsap.set(v,{opacity:0,scale:.9}):gsap.set(v,{opacity:0,scale:.9,y:50}),h.observe(v)}),window.workPhotoObserver=h}}finally{W=!1}}function be(){const e=document.querySelectorAll(".work-categories-title-wrapper, .work-categories-top-margin");e&&gsap.matchMedia().add("(max-width: 767px)",()=>{gsap.to(e,{scale:.7,opacity:0,scrollTrigger:{trigger:e,start:"top top",end:"+=200",scrub:.5,invalidateOnRefresh:!0}})})}function Ee(){const e=document.querySelector(".section.categories");if(!e)return;gsap.set(e,{opacity:0,y:60});const t=new IntersectionObserver(r=>{r.forEach(o=>{o.isIntersecting&&(gsap.to(e,{opacity:1,y:0,duration:1,ease:"power2.out"}),window.initCategories&&window.initCategories(),t.unobserve(o.target))})},{rootMargin:"-100px",threshold:.1});t.observe(e),window.workCategoriesObserver=t}function Re(){window.workPhotoObserver&&(window.workPhotoObserver.disconnect(),window.workPhotoObserver=null),window.workCategoriesObserver&&(window.workCategoriesObserver.disconnect(),window.workCategoriesObserver=null)}window.initWork=Se;window.initCategoryTitleAnimation=be;window.initWorkCategoriesReveal=Ee;window.cleanupWorkPage=Re;function ce(){if(document.querySelector('[data-barba-namespace^="work"]')&&document.querySelectorAll(".photo-container").length>0&&!W){Se(),be(),Ee();const t=()=>{window.initPhotoModal?window.initPhotoModal():setTimeout(t,50)};setTimeout(t,100)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ce):ce();window.photoModalCleanup=null;function ke(){window.photoModalCleanup&&(window.photoModalCleanup(),window.photoModalCleanup=null);const e=document.querySelector(".modal-photo");if(!e)return;const t=e.querySelector(".modal-photo-container"),r=e.querySelector(".modal-title"),o=e.querySelector(".modal-exif"),n=e.querySelector(".modal-close"),a=e.querySelector('[data-photo-nav="previous"]'),u=e.querySelector('[data-photo-nav="next"]'),f=document.querySelectorAll(".photo");gsap.registerPlugin(Flip);let p=0,y=[],c=null,L=[];function C(i){const m=i.getBoundingClientRect(),s=window.scrollY||document.documentElement.scrollTop,g=m.top+s-100;window.scrollTo({top:g,behavior:"auto"})}f.forEach((i,w)=>{const m=window.shuffledPhotos.find(k=>k.querySelector(".photo")===i),s=window.shuffledPhotos.indexOf(m);y[s]={src:i.getAttribute("src"),title:i.getAttribute("data-title"),exif:i.getAttribute("data-exif"),category:i.getAttribute("data-category"),element:i,placeholder:null};const g=()=>{p=s,c=i,R(y[p])};i.addEventListener("click",g),L.push({element:i,handler:g})});function R(i){window.lenis&&window.lenis.stop(),document.body.style.overflow="hidden";const w=Flip.getState(i.element,{props:"all"}),m=i.element.originalParent,s=document.createElement("div");s.classList.add("photo-placeholder"),s.style.width=i.element.offsetWidth+"px",s.style.height=i.element.offsetHeight+"px",m.insertBefore(s,i.element),i.placeholder=s;const g=Array.from(document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title")).filter(k=>k!==i.element);gsap.to(g,{opacity:0,duration:.3,ease:"power2.inOut"}),t.appendChild(i.element),gsap.set(i.element,{opacity:1}),e.style.display="grid",e.classList.add("active"),e.style.backgroundColor="transparent",r.textContent=i.title,o.textContent=i.exif,gsap.set([r,o,n,a,u],{opacity:0,y:20}),Flip.from(w,{duration:.8,ease:"power2.inOut",absolute:!0,onComplete:()=>{e.classList.contains("active")&&gsap.to(e,{backgroundColor:"var(--_colors---off-white)",duration:.4,ease:"power2.out"}),gsap.to([r,o,n,a,u],{opacity:1,y:0,duration:.4,stagger:.1,ease:"power2.out"})}})}function x(){if(!c)return;gsap.killTweensOf([e,r,o,n,a,u]),gsap.killTweensOf(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title"),window.lenis&&window.lenis.start(),document.body.style.overflow="";const i=y[p],w=i.element,m=document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title");gsap.set(e,{backgroundColor:"transparent"}),gsap.to([r,o,n,a,u],{opacity:0,y:20,duration:.3,ease:"power2.in"});const s=w.originalParent,g=s.getBoundingClientRect(),k=window.scrollY||document.documentElement.scrollTop,T=g.top+k-window.innerHeight/2+g.height/2;window.scrollTo({top:T,behavior:"auto"});const M=Flip.getState(w,{props:"all"});i.placeholder&&s&&(s.insertBefore(w,i.placeholder),i.placeholder.remove(),i.placeholder=null),Flip.from(M,{duration:.8,ease:"power2.inOut",onUpdate:function(){this.progress()>.7&&gsap.to(m,{opacity:1,duration:.3,ease:"power2.out"})},onComplete:()=>{e.classList.remove("active"),e.style.display="none",c=null}})}function A(){const i=document.querySelectorAll(".photo");gsap.killTweensOf(i);let w=p<y.length-1?p+1:0;const m=y[p],s=y[w];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const g=Array.from(document.querySelectorAll(".photo")).filter(M=>M!==s.element);gsap.set(g,{opacity:0});const k=s.element.originalParent,T=document.createElement("div");T.classList.add("photo-placeholder"),T.style.width=s.element.offsetWidth+"px",T.style.height=s.element.offsetHeight+"px",k.insertBefore(T,s.element),s.placeholder=T,C(s.element),t.innerHTML="",t.appendChild(s.element),gsap.set(s.element,{opacity:1,x:"100%",scale:.95,rotation:3}),gsap.to(s.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=s.title,o.textContent=s.exif,c=s.element,p=w}function l(){const i=document.querySelectorAll(".photo");gsap.killTweensOf(i);let w=p>0?p-1:y.length-1;const m=y[p],s=y[w];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const g=Array.from(document.querySelectorAll(".photo")).filter(M=>M!==s.element);gsap.set(g,{opacity:0});const k=s.element.originalParent,T=document.createElement("div");T.classList.add("photo-placeholder"),T.style.width=s.element.offsetWidth+"px",T.style.height=s.element.offsetHeight+"px",k.insertBefore(T,s.element),s.placeholder=T,C(s.element),t.innerHTML="",t.appendChild(s.element),gsap.set(s.element,{opacity:1,x:"-100%",scale:.95,rotation:-3}),gsap.to(s.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=s.title,o.textContent=s.exif,c=s.element,p=w}const h=i=>{e.classList.contains("active")&&(i.key==="Escape"&&x(),i.key==="ArrowRight"&&A(),i.key==="ArrowLeft"&&l())},v=i=>{i.target===e&&x()};document.addEventListener("keydown",h),e.addEventListener("click",v),n.addEventListener("click",x),a.addEventListener("click",l),u.addEventListener("click",A);const b=new Hammer(t);b.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});let q=!1,E=0;b.on("panstart",function(i){q=!0,E=i.center.x,gsap.killTweensOf(c)}),b.on("pan",function(i){if(!q||!c)return;const m=(i.center.x-E)/window.innerWidth*100,g=Math.min(Math.max(m*.5,-50),50),k=Math.abs(g),T=gsap.utils.mapRange(0,50,1,.3)(k),M=gsap.utils.mapRange(0,50,1,0)(k);gsap.set(c,{x:g+"%",rotation:g*.05,scale:T,opacity:M})}),b.on("panend",function(i){if(!q||!c)return;q=!1;const w=Math.abs(i.velocity),m=i.deltaX,s=window.innerWidth*.2;Math.abs(m)>s||w>.5?m<0?A():l():gsap.to(c,{x:"0%",rotation:0,scale:1,opacity:1,duration:.3,ease:"power2.out"})}),window.photoModalCleanup=()=>{L.forEach(({element:i,handler:w})=>{i.removeEventListener("click",w)}),document.removeEventListener("keydown",h),e.removeEventListener("click",v),n.removeEventListener("click",x),a.removeEventListener("click",l),u.removeEventListener("click",A),b&&b.destroy(),e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="none",window.lenis&&window.lenis.start(),document.body.style.overflow="")}}window.initPhotoModal=ke;function ee(){if(!document.querySelector(".section.about-page"))return;gsap.registerPlugin(ScrollTrigger);const t=document.createElement("style");t.textContent=`
    .about-page-title {
      overflow: visible;
    }
    
    .about-page-title .line {
      display: block;
      opacity: 0;
    }
  `,document.head.appendChild(t);const r=document.querySelector(".about-page-mobile-img"),o=document.querySelector(".about-page-title");document.querySelector(".about-page-paragraph");const n=document.querySelector("#w-node-_5cfb6280-6a33-c948-6914-d1d14a02033e-e0820647"),a=document.querySelector("#w-node-_8ff28dca-4908-092a-a93e-64674276b761-e0820647"),u=document.querySelector("#w-node-d37b0f9a-3049-7721-1f0b-b2dfa6b25604-e0820647"),f=document.querySelector("#w-node-a792f731-c023-e6a4-a3a2-3b0f75706c28-e0820647"),p=document.querySelector("#w-node-_38752304-f930-7aec-55b4-e5bb69d7261b-e0820647"),y=document.querySelector("#w-node-af8686f0-0eff-8a7c-0ed7-beca4d3b4ae5-e0820647"),c=document.querySelector("#w-node-f5866f73-1277-b3c6-9637-905ed2896c1d-e0820647"),L=document.querySelector("#w-node-_26bcf290-3970-d3ae-4c5a-8a87562b3b8f-e0820647"),C=document.querySelector("#w-node-_959dd736-48e6-8ca1-a499-ecdb1597fdfc-e0820647"),R=document.querySelector("#w-node-_81d87156-36a4-f557-ac99-5a50eaa2aede-e0820647"),x=document.querySelectorAll(".divider"),A=[],l=gsap.timeline();r&&(gsap.set(r,{clipPath:"inset(0% 0% 100% 0%)"}),l.to(r,{clipPath:"inset(0% 0% 0% 0%)",duration:1.2,ease:"expo.inOut"},0));let h=0,v=.6,b=0;if(o){const i=new SplitType(o,{types:"lines"});if(A.push(i),i.lines&&i.lines.length>0){const w=i.lines;gsap.set(w,{opacity:0,y:20}),w.forEach((s,g)=>{l.to(s,{opacity:1,y:0,duration:.4,ease:"power2.out"},v+g*.15)}),h=v+(w.length-1)*.15+.4;const m=h-v;b=v+m*.7-.15,l.call(()=>{},null,h)}}const q=[{divider:x[0],title:n,content:p},{divider:x[1],title:a,content:y},{divider:x[2],title:u,content:c},{divider:x[3],title:f,content:L},{divider:x[4],title:C,content:R}];let E=b;q.forEach((i,w)=>{if(!i.divider)return;if(gsap.set(i.divider,{width:0,opacity:0}),i.title&&gsap.set(i.title,{opacity:0,y:20}),i.content&&gsap.set(i.content,{opacity:0,y:20}),i.divider.getBoundingClientRect().top<window.innerHeight){l.to(i.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},E),i.title&&l.to(i.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},E+.15),i.content&&l.to(i.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},E+.25);const k=E+.25+.6-E;E=E+k*.7}else ScrollTrigger.create({trigger:i.divider,start:"top 92%",once:!0,onEnter:()=>{const g=gsap.timeline();g.to(i.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},0),i.title&&g.to(i.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},.15),i.content&&g.to(i.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},.25)}})}),typeof barba<"u"&&barba.hooks.beforeLeave(()=>{A.forEach(i=>{i&&i.revert&&i.revert()}),ScrollTrigger.getAll().forEach(i=>i.kill()),t&&t.parentNode&&t.parentNode.removeChild(t)})}window.initAbout=ee;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ee):ee();He();window.initPhotoModal=ke;
