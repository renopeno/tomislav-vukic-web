function xe(){const e=document.querySelectorAll(".nav-link"),o=window.location.pathname;e.forEach(r=>{const n=r.getAttribute("href");o===n||o==="/"&&n==="/"?(r.setAttribute("aria-current","page"),r.classList.add("current","w--current")):(r.removeAttribute("aria-current"),r.classList.remove("current","w--current"))})}function Le(e){e.startsWith("work")&&window.photoModalCleanup&&window.photoModalCleanup(),ScrollTrigger.getAll().forEach(r=>{r.kill()}),document.querySelectorAll(".split-type").forEach(r=>{r.splitType&&r.splitType.revert()})}function K(e){var o,r,n,i,a,d,g,p;switch(e){case"home":(o=window.initHero)==null||o.call(window),(r=window.initAboutSection)==null||r.call(window),(n=window.initHighlights)==null||n.call(window),(i=window.initCategories)==null||i.call(window);break;case"work":case"work-abstract":case"work-nature":case"work-people":case"work-products":case"work-architecture":(a=window.initWork)==null||a.call(window),(d=window.initCategoryTitleAnimation)==null||d.call(window),(g=window.initPhotoModal)==null||g.call(window);break;case"about":(p=window.initAbout)==null||p.call(window);break;default:console.warn(`‚ö†Ô∏è Nepoznati namespace: ${e}`)}}function Ce(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),barba.hooks.beforeEnter(()=>{localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"))}),barba.init({transitions:[{name:"fade",leave(e){return window.lenis&&window.lenis.stop(),xe(),Le(e.current.namespace),localStorage.getItem("dark-mode")==="enabled"&&(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")),gsap.to(e.current.container,{opacity:0,duration:.15})},beforeEnter(e){localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode")),window.lenis?window.lenis.scrollTo(0,{immediate:!0,force:!0}):window.scrollTo(0,0)},enter(e){return gsap.to(e.next.container,{opacity:1,duration:.15})},after(e){K(e.next.namespace),requestAnimationFrame(()=>{window.lenis&&window.lenis.start(),ScrollTrigger.refresh(!0)})}}],views:[{namespace:"home"},{namespace:"work"},{namespace:"about"},{namespace:"work-abstract"},{namespace:"work-nature"},{namespace:"work-people"},{namespace:"work-products"},{namespace:"work-architecture"}]})}window.addEventListener("beforeunload",()=>{window.scrollTo(0,0)});Ce();var le;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{var o;const e=(o=document.querySelector('[data-barba="container"]'))==null?void 0:o.getAttribute("data-barba-namespace");e&&K(e)});else{const e=(le=document.querySelector('[data-barba="container"]'))==null?void 0:le.getAttribute("data-barba-namespace");e&&K(e)}function ce(){const e=new Lenis({lerp:.1,wheelMultiplier:1,smoothWheel:!0,smoothTouch:!1,infinite:!1});window.lenis=e,e.on("scroll",ScrollTrigger.update),gsap.ticker.add(o=>{e.raf(o*1e3)}),gsap.ticker.lagSmoothing(0)}window.initLenis=ce;ce();function de(){const e=document.body,o=document.querySelector(".nav-theme-switcher");localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode")),o&&o.addEventListener("click",()=>{e.classList.contains("ui-dark-mode")?(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode"),console.log("Removed .ui-dark-mode from html and body"),localStorage.setItem("dark-mode","disabled")):(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode"),console.log("Added .ui-dark-mode to html and body"),localStorage.setItem("dark-mode","enabled"))})}window.initDarkMode=de;de();function ue(){const e=document.querySelector(".section.footer"),o=e==null?void 0:e.previousElementSibling;gsap.registerPlugin(ScrollTrigger),o&&(gsap.to(o,{scrollTrigger:{trigger:o,start:"top top",end:()=>`+=${window.innerHeight*.5}`,pin:!1,scrub:!0,id:"footer-prev-section"}}),gsap.to(e,{scrollTrigger:{trigger:o,start:()=>`bottom+=${window.innerHeight*.5} bottom`,end:"bottom bottom",scrub:!0,id:"footer-main"}}),gsap.set(o,{zIndex:1}))}window.initFooter=ue;ue();function pe(e,o=!0){e.dataset.originalText||(e.dataset.originalText=e.textContent);const r=e.dataset.originalText;e.style.position="relative",e.style.zIndex="100000";let n;e.querySelector(".shuffle-text")?n=e.querySelector(".shuffle-text"):(n=document.createElement("span"),n.className="shuffle-text",n.textContent=r,e.textContent="",e.appendChild(n)),n.style.pointerEvents="none";let i=!1,a;const d=y=>{const l=y.split("");for(let T=l.length-1;T>0;T--){const u=Math.floor(Math.random()*(T+1));[l[T],l[u]]=[l[u],l[T]]}return l.join("")},g=()=>{a&&(clearInterval(a),a=null),n.textContent=r,i=!1},p=()=>{if("ontouchstart"in window||navigator.maxTouchPoints>0||i)return;i=!0;let y=0;a&&clearInterval(a),a=setInterval(()=>{y<3?(n.textContent=d(r),y++):(n.textContent=r,clearInterval(a),a=null,i=!1)},100)};return o&&("ontouchstart"in window||navigator.maxTouchPoints>0||e.addEventListener("mouseenter",p),e.addEventListener("click",function(l){g()})),p}function me(){document.querySelectorAll(".link, .cta").forEach(e=>{pe(e,!0)})}window.createShuffleEffect=pe;window.initLinksHover=me;me();function ge(){const e=window.navigator.userAgent,o=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return o&&r&&!e.match(/CriOS/i)&&!e.match(/FxiOS/i)}function Ae(){if(!ge())return;document.body.addEventListener("click",function(n){const i=n.target.closest("a, button");i&&(i.style.transition="opacity 0.2s ease-out",i.style.opacity="0.5",setTimeout(()=>{i.style.opacity="1"},300))});function e(n){var i=n.tagName.toLowerCase(),a=n.dataset.bind,d=a&&a.indexOf("click")>-1||i=="a"||i=="button";return d}var o={touchend:function(n,i){i.dataset._clicked_="",i.dataset._mousemove_="0",i.dataset._timeOutId_=""},mouseover:function(n){n.preventDefault()},mousemove:function(n,i){n.preventDefault();var a=+(i.dataset._mousemove_||"0");if(a=a+1,console.log("mousemoves: "+a),i.dataset._mousemove_=a,a>1&&!i.dataset._timeOutId_){var d=setTimeout(function(){console.log("double mousemove click fired"),i.click()},80);i.dataset._timeOutId_=d}},click:function(n,i){if(i.dataset._clicked_){n.isTrusted&&(console.log("prevented doubleclick"),n.preventDefault());return}i.dataset._timeOutId_&&(console.log("cleared timeout"),clearTimeout(+i.dataset._timeOutId_)),i.dataset._clicked_="true"}};function r(n){var i=n.target;if(i&&i.click&&i.tagName&&i.dataset&&e(i)){var a=n.type;console.log(a,i),o[a]&&o[a](n,i)}}document.addEventListener("touchend",r,!0),document.addEventListener("mouseover",r,!0),document.addEventListener("mousemove",r,!0),document.addEventListener("click",r,!0)}function fe(){ge()&&Ae()}window.initIosSafariFix=fe;fe();const _={enabled:!1,logs:[],lastScrollY:0,lastTimestamp:0,freezeThreshold:100,init(){this.enabled&&(console.log("üîç ScrollDebugger aktiviran"),window.lenis&&window.lenis.on("scroll",e=>{this.logScroll("LENIS",e)}),window.ScrollTrigger&&(ScrollTrigger.addEventListener("refresh",()=>{console.log("üîÑ ScrollTrigger REFRESH event")}),ScrollTrigger.addEventListener("scrollStart",()=>{console.log("‚ñ∂Ô∏è ScrollTrigger SCROLL START")}),ScrollTrigger.addEventListener("scrollEnd",()=>{console.log("‚è∏Ô∏è ScrollTrigger SCROLL END")})),this.startRAFMonitoring(),this.trackScrollDirection(),console.log("‚úÖ ScrollDebugger setup complete"))},logScroll(e,o){var d;const r=performance.now(),n=r-this.lastTimestamp,i=o.scroll-this.lastScrollY,a=i>0?"‚¨áÔ∏è DOWN":"‚¨ÜÔ∏è UP";n>this.freezeThreshold&&this.lastTimestamp>0&&console.warn(`üö® FREEZE DETECTED! ${n.toFixed(2)}ms gap`,{scrollPosition:o.scroll,direction:a,gap:`${n.toFixed(2)}ms`,scrollDelta:i}),Math.abs(i)>1&&console.log(`üìú ${e} ${a}`,{scroll:o.scroll.toFixed(2),velocity:((d=o.velocity)==null?void 0:d.toFixed(2))||"N/A",delta:i.toFixed(2),time:n.toFixed(2)+"ms"}),this.lastScrollY=o.scroll,this.lastTimestamp=r},startRAFMonitoring(){let e=performance.now(),o=0;const r=n=>{var a;const i=n-e;i>32&&console.warn(`‚è±Ô∏è SLOW FRAME: ${i.toFixed(2)}ms (${(1e3/i).toFixed(1)}fps)`,{framesSinceLastLog:o,scrollY:((a=window.lenis)==null?void 0:a.scroll)||window.scrollY}),o++,e=n,requestAnimationFrame(r)};requestAnimationFrame(r)},trackScrollDirection(){let e=null;const o=()=>{var i;const r=((i=window.lenis)==null?void 0:i.scroll)||window.scrollY,n=r>this.lastScrollY?"down":"up";n!==e&&e!==null&&console.log(`üîÑ DIRECTION CHANGE: ${e} ‚Üí ${n}`,{scrollY:r.toFixed(2),activeScrollTriggers:ScrollTrigger.getAll().length}),e=n,requestAnimationFrame(o)};requestAnimationFrame(o)},logScrollTriggers(){const e=ScrollTrigger.getAll();console.log(`üìä Active ScrollTriggers: ${e.length}`),e.forEach(o=>{console.log(`  - ${o.vars.id||"unnamed"}`,{start:o.start,end:o.end,progress:o.progress.toFixed(2),isActive:o.isActive})})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>_.init()):_.init();window.ScrollDebugger=_;document.addEventListener("keydown",e=>{var o,r,n;(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(console.log("üîç === SCROLL DEBUG DUMP ==="),_.logScrollTriggers(),console.log("Lenis state:",{scroll:(o=window.lenis)==null?void 0:o.scroll,velocity:(r=window.lenis)==null?void 0:r.velocity,direction:(n=window.lenis)==null?void 0:n.direction}),console.log("========================="))});function Pe(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){console.log("üñ±Ô∏è Touch device detektiran - custom cursor onemoguƒáen");return}const o=document.createElement("div");o.id="custom-cursor",o.style.cssText=`
    position: fixed;
    width: 56px;
    height: 32px;
    border-radius: 999px;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
    background-color: #ffffff;
    mix-blend-mode: difference;
    opacity: 0;
    display: none;
  `,document.body.appendChild(o);let r=window.innerWidth/2,n=window.innerHeight/2;const i=p=>{r=p.clientX,n=p.clientY,o.style.left=`${r}px`,o.style.top=`${n}px`},a=()=>{o.style.display="block",setTimeout(()=>{o.style.opacity="1"},10)},d=()=>{o.style.opacity="0",setTimeout(()=>{o.style.display="none"},200)};window.addEventListener("hero:drag:start",a),window.addEventListener("hero:drag:end",d);const g=p=>{i(p)};return window.addEventListener("mousemove",g),()=>{o.remove(),window.removeEventListener("mousemove",g),window.removeEventListener("hero:drag:start",a),window.removeEventListener("hero:drag:end",d)}}function he(){const e=document.querySelector(".section.hero"),o=document.querySelector(".hero-title"),r=document.querySelectorAll(".hero-footer");if(!e){console.error("‚ùå Hero sekcija nije pronaƒëena!");return}r.forEach(c=>{c.style.position="relative",c.style.zIndex="10",c.style.pointerEvents="auto",c.querySelectorAll('a, button, [role="button"]').forEach(A=>{A.style.position="relative",A.style.zIndex="11",A.style.pointerEvents="auto"})});const n=document.querySelector(".hero-images-wrapper");if(!n){console.warn("Hero wrapper nije pronaƒëen!");return}const i=Array.from(document.querySelectorAll(".hero-image")),a=i.length;if(a===0){console.warn("‚ö†Ô∏è Nema slika za prikaz!");return}const d=document.querySelector(".hero-images-container");if(typeof THREE>"u"){console.error("‚ùå Three.js nije uƒçitan! Provjerite Webflow Footer Code.");return}i.forEach(c=>{c.style.display="none"}),n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.pointerEvents="auto",d.innerHTML="",d.style.position="relative",d.style.width="100%",d.style.height="100%",d.style.overflow="hidden",d.style.pointerEvents="auto";const g=new THREE.Scene,p=new THREE.PerspectiveCamera(40,d.offsetWidth/d.offsetHeight,.1,3e3);p.position.z=900;const y=window.innerWidth<=768;p.position.y=y?-50:0;const l=new THREE.WebGLRenderer({alpha:!0,antialias:!0});l.setSize(d.offsetWidth,d.offsetHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),l.setClearColor(0,0),l.domElement.style.position="absolute",l.domElement.style.top="0",l.domElement.style.left="0",l.domElement.style.width="100%",l.domElement.style.height="100%",l.domElement.style.zIndex="1",d.appendChild(l.domElement);const T=new THREE.AmbientLight(16777215,.6);g.add(T);const u=new THREE.DirectionalLight(16777215,.4);u.position.set(0,500,800),g.add(u);const x=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // ≈†alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,S=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vec4 texColor = texture2D(uTexture, vUv);
      
      // Shadow na rubovima za nagla≈°avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `,P=new THREE.TextureLoader,b=[],f=new THREE.Group;g.add(f);const q=Math.random()*.4-.2,L=Math.random()*.4-.2;f.rotation.x=q,f.rotation.z=L;const M=280,C=165,t=185,w=2*Math.PI/a;let m=0;const s=new Array(a);i.forEach((c,v)=>{P.load(c.src,A=>{const F=new THREE.PlaneGeometry(C,t,64,1),G=new THREE.ShaderMaterial({uniforms:{uTexture:{value:A},uBend:{value:.0015},uOpacity:{value:0}},vertexShader:x,fragmentShader:S,transparent:!0,side:THREE.DoubleSide}),R=new THREE.Mesh(F,G),Z=-w*v+Math.PI,Ee=Math.sin(Z)*M,ke=Math.cos(Z)*M;R.position.set(Ee,30,ke),R.rotation.y=Z,R.material.uniforms.uOpacity.value=0,R.scale.set(.7,.7,.7),f.add(R),s[v]=R,m++,m===a&&(s.forEach(Te=>b.push(Te)),k())},void 0,A=>{console.error(`‚ùå Gre≈°ka pri uƒçitavanju slike ${v}:`,A)})});function h(c){if(c){const v=c.textContent.trim();c.innerHTML=v.split("").map(A=>`<span style="display: inline-block;">${A===" "?"&nbsp;":A}</span>`).join("")}}h(o);const E=o?o.querySelectorAll("span"):[];gsap.set(r,{y:20,opacity:0}),gsap.set(E,{y:200,opacity:0});function k(){const c=gsap.timeline();c.to(E,{y:0,opacity:1,duration:.3,stagger:.03,ease:"power3.out"},0),c.to(r,{y:0,opacity:1,duration:.4,stagger:.1,ease:"power3.out"},.2),be(.008),b.forEach((F,G)=>{const R=.2+G*.15;c.to(F.material.uniforms.uOpacity,{value:1,duration:.6,ease:"power1.out"},R),c.to(F.scale,{x:1,y:1,z:1,duration:.6,ease:"back.out(1.2)"},R)});const v=.2+(b.length-1)*.15+.6,A={value:.008};c.to(A,{value:D,duration:2,ease:"power2.out",onUpdate:()=>{I=A.value},onComplete:()=>{H()}},v)}function H(){const c=f.rotation.x,v=f.rotation.z;gsap.to(f.rotation,{x:c+.03,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1}),gsap.to(f.rotation,{z:v+.025,duration:5.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}let D=.001,N=0,I=D,Se=.015;function be(c){I=c}let ee=0,te=0,O=!1,W=0,B=0,j=0,X=!1,$=0;const oe=c=>{O=!0,c.clientX,W=c.clientX,j=c.clientX,B=0,gsap.killTweensOf(f.rotation),$=I,I=0,X=!0,window.dispatchEvent(new CustomEvent("hero:drag:start")),l.domElement.style.cursor="grabbing"},ne=c=>{if(!O)return;c.preventDefault(),W=c.clientX;const v=W-j;f.rotation.y+=v*9e-4,B=v*9e-4,j=W},ie=()=>{if(!O)return;O=!1,l.domElement.style.cursor="grab",window.dispatchEvent(new CustomEvent("hero:drag:end"));const c=B*80;gsap.to(f.rotation,{y:f.rotation.y+c,duration:3,ease:"power2.out"}),setTimeout(()=>{O||gsap.to({speed:0},{speed:$,duration:1,ease:"power2.inOut",onUpdate:function(){I=this.targets()[0].speed},onComplete:()=>{I=$,X=!1}})},2500)};l.domElement.addEventListener("mousedown",oe),window.addEventListener("mousemove",ne),window.addEventListener("mouseup",ie),l.domElement.style.cursor="grab",l.domElement.style.userSelect="none",l.domElement.style.webkitUserSelect="none",l.domElement.style.touchAction="auto";let re=!0;const U=new IntersectionObserver(c=>{c.forEach(v=>{re=v.isIntersecting})},{threshold:0,rootMargin:"100px"});U.observe(e);const ae=()=>{re&&(N+=(I-N)*.15,f.rotation.y+=N,l.render(g,p))};gsap.ticker.add(ae);function se(){const c=d.offsetWidth,v=d.offsetHeight;p.aspect=c/v,p.updateProjectionMatrix(),l.setSize(c,v)}window.addEventListener("resize",se);let Y=!1;const V=()=>{O||X||Y||(Y=!0,requestAnimationFrame(()=>{const c=window.pageYOffset||document.documentElement.scrollTop,v=Math.abs(c-ee);te=Math.min(v*8e-4,Se),v>.5?(gsap.killTweensOf(f.rotation),I=D+te):I=D,ee=c,Y=!1}))};window.removeEventListener("scroll",V),window.addEventListener("scroll",V,{passive:!0}),window.addEventListener("barba:before-leave",()=>{gsap.ticker.remove(ae),gsap.killTweensOf(f.rotation),U&&U.disconnect(),l.domElement.removeEventListener("mousedown",oe),window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",ie),b.forEach(c=>{c.geometry&&c.geometry.dispose(),c.material&&(c.material.uniforms.uTexture.value&&c.material.uniforms.uTexture.value.dispose(),c.material.dispose())}),l.dispose(),window.removeEventListener("resize",se),window.removeEventListener("scroll",V)})}window.initHero=he;document.querySelector(".hero-images-container")&&he();function J(){if(!document.querySelector('[data-barba-namespace="home"]'))return;const o=document.querySelector(".section.about"),r=document.querySelector(".home-about-title"),n=document.querySelector(".about-scroll");if(!n||!o||!r){console.error("‚ùå About Section elementi nisu kompletni");return}gsap.registerPlugin(ScrollTrigger);const i=new SplitType(r,{types:"words"}),a=new SplitType(n,{types:"words"});i.words.forEach(g=>{gsap.set(g,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),a.words.forEach(g=>{gsap.set(g,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})});const d=g=>{g.forEach(p=>{const y=p.textContent,l=document.createElement("span");l.style.display="inline-block",l.textContent=y,p.textContent="",p.appendChild(l),gsap.set(l,{y:"100%",opacity:0})})};d(i.words),d(a.words),i.words.slice(0,6).forEach(g=>{const p=g.querySelector("span");gsap.set(p,{y:0,opacity:1})}),gsap.to(i.words.slice(6).map(g=>g.querySelector("span")),{y:0,opacity:1,duration:.6,stagger:.015,ease:"power2.out",scrollTrigger:{trigger:o,start:"top 60%",toggleActions:"play none none none",once:!0,id:"about-title-reveal"}}),gsap.to(a.words.map(g=>g.querySelector("span")),{y:0,opacity:1,duration:.6,stagger:.015,ease:"power2.out",scrollTrigger:{trigger:n,start:"top 80%",toggleActions:"play none none none",once:!0,id:"about-scroll-reveal"}})}window.initAboutSection=J;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J):J();function we(){const e=document.querySelector(".section.highlights"),o=document.querySelector(".highlights-wrapper");if(!e||!o)return;gsap.registerPlugin(ScrollTrigger);const r=o.scrollWidth-e.offsetWidth;gsap.to(o,{x:-r,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:`+=${r}`,scrub:1,pin:!0,anticipatePin:1,invalidateOnRefresh:!0,id:"highlights-horizontal"}});const n=document.querySelectorAll(".highlights-card"),i=window.innerWidth<=767;gsap.set(n,{opacity:0,y:50}),gsap.to(n,{opacity:1,y:0,duration:.6,ease:"power1.inOut",stagger:.2,scrollTrigger:{trigger:".highlights-wrapper",start:"top 80%",toggleActions:"play none none none",id:"highlights-cards"}})}window.initHighlights=we;we();function ye(){const e=document.querySelectorAll(".categories-row");if(!document.querySelector(".section.categories")){console.warn("Element .section.categories nije pronaƒëen na stranici");return}e.forEach(r=>{r.addEventListener("mouseenter",()=>{gsap.to(e,{opacity:.1,duration:.3,ease:"power2.out"}),gsap.to(r,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(g=>{const p=g.querySelector(".categories-photo");g!==r&&gsap.to(p,{opacity:0,duration:.3,ease:"power2.out"})});const n=r.querySelector(".categories-photo");gsap.to(n,{opacity:1,height:300,duration:.3,ease:"power1.out"});const i=r.querySelector(".cta");gsap.to(i,{opacity:1,duration:.3,ease:"power1.out"});const a=r.querySelector(".title-l"),d=r.querySelector(".cta");a&&createShuffleEffect(a,!1)(),d&&createShuffleEffect(d,!1)()}),r.addEventListener("mouseleave",()=>{gsap.to(e,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(i=>{const a=i.querySelector(".categories-photo");gsap.to(a,{opacity:0,height:0,duration:.3,ease:"power1.out"})});const n=r.querySelector(".cta");gsap.to(n,{opacity:0,duration:.3,ease:"power1.out"})})})}window.initCategories=ye;ye();let z=!1;async function qe(){if(z)return;if(z=!0,!document.querySelectorAll(".photo-container").length){z=!1;return}try{let p=function(){const u=window.innerWidth;return u<768?g.mobile:u<992?g.tablet:g.desktop},y=function(){const u=p();let x=!0,S=1,P=null,b=null;window.shuffledPhotos.forEach((f,q)=>{const L=f.querySelector(".photo"),C=L.naturalWidth>L.naturalHeight?u.horizontalSpan:u.verticalSpan;let t;if(u.columns===1)t=1;else if(x){do t=u.left[Math.floor(Math.random()*u.left.length)];while(t===P);P=t}else{do t=u.right[Math.floor(Math.random()*u.right.length)];while(t===b);b=t}f.style.display="block",f.style.gridColumnStart=t,f.style.gridColumnEnd=t+C,f.style.gridRowStart=S,x=!x,S++})};var o=p,r=y;document.querySelectorAll(".photo").forEach(u=>{u.originalParent=u.parentElement});const i=30,a=Array.from(document.querySelectorAll(".photo-container"));a.forEach((u,x)=>{const S=u.querySelector(".photo");S&&(x<6?(S.setAttribute("loading","eager"),S.setAttribute("fetchpriority","high")):S.setAttribute("loading","lazy"),S.setAttribute("decoding","async"))}),a.forEach(u=>{u.style.display="",u.style.gridColumn="",u.style.gridColumnStart="",u.style.gridColumnEnd="",u.style.gridRowStart="",u.style.transform=""});const d=a.slice(0,i);a.slice(i).forEach(u=>{u.style.display="none"}),window.shuffledPhotos=d.sort(()=>Math.random()-.5),window.lastPath=window.location.pathname;const g={desktop:{columns:12,left:[2,3],right:[8,9],horizontalSpan:3,verticalSpan:2},tablet:{columns:8,left:[2,3],right:[5,6],horizontalSpan:3,verticalSpan:2},mobile:{columns:1,left:[1],right:[1],horizontalSpan:1,verticalSpan:1}},T=window.shuffledPhotos.map(u=>u.querySelector(".photo")).map(u=>u.complete&&u.naturalWidth>0?Promise.resolve():new Promise(x=>{u.onload=()=>x(),u.onerror=()=>x()}));await Promise.all(T),window.isSettingUpGrid||(window.isSettingUpGrid=!0,y(),window.isSettingUpGrid=!1),gsap.fromTo(window.shuffledPhotos,{opacity:0,scale:.8,y:window.innerHeight/5},{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out",stagger:.1})}finally{z=!1}}function Me(){const e=document.querySelectorAll(".work-categories-title-wrapper, .work-categories-top-margin");e&&gsap.matchMedia().add("(max-width: 767px)",()=>{gsap.to(e,{scale:.7,opacity:0,scrollTrigger:{trigger:e,start:"top top",end:"+=200",scrub:.5,invalidateOnRefresh:!0}})})}window.initWork=qe;window.initCategoryTitleAnimation=Me;window.photoModalCleanup=null;function ve(){window.photoModalCleanup&&(window.photoModalCleanup(),window.photoModalCleanup=null);const e=document.querySelector(".modal-photo");if(!e)return;const o=e.querySelector(".modal-photo-container"),r=e.querySelector(".modal-title"),n=e.querySelector(".modal-exif"),i=e.querySelector(".modal-close"),a=e.querySelector('[data-photo-nav="previous"]'),d=e.querySelector('[data-photo-nav="next"]'),g=document.querySelectorAll(".photo");gsap.registerPlugin(Flip);let p=0,y=[],l=null,T=[];function u(t){const m=t.getBoundingClientRect(),s=window.scrollY||document.documentElement.scrollTop,h=m.top+s-100;window.scrollTo({top:h,behavior:"auto"})}g.forEach((t,w)=>{const m=window.shuffledPhotos.find(E=>E.querySelector(".photo")===t),s=window.shuffledPhotos.indexOf(m);y[s]={src:t.getAttribute("src"),title:t.getAttribute("data-title"),exif:t.getAttribute("data-exif"),category:t.getAttribute("data-category"),element:t,placeholder:null};const h=()=>{p=s,l=t,x(y[p])};t.addEventListener("click",h),T.push({element:t,handler:h})});function x(t){window.lenis&&window.lenis.stop(),document.body.style.overflow="hidden";const w=Flip.getState(t.element,{props:"all"}),m=t.element.originalParent,s=document.createElement("div");s.classList.add("photo-placeholder"),s.style.width=t.element.offsetWidth+"px",s.style.height=t.element.offsetHeight+"px",m.insertBefore(s,t.element),t.placeholder=s;const h=Array.from(document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title")).filter(E=>E!==t.element);gsap.to(h,{opacity:0,duration:.3,ease:"power2.inOut"}),o.appendChild(t.element),gsap.set(t.element,{opacity:1}),e.style.display="grid",e.classList.add("active"),e.style.backgroundColor="transparent",r.textContent=t.title,n.textContent=t.exif,gsap.set([r,n,i,a,d],{opacity:0,y:20}),Flip.from(w,{duration:.8,ease:"power2.inOut",absolute:!0,onComplete:()=>{e.classList.contains("active")&&gsap.to(e,{backgroundColor:"var(--_colors---off-white)",duration:.4,ease:"power2.out"}),gsap.to([r,n,i,a,d],{opacity:1,y:0,duration:.4,stagger:.1,ease:"power2.out"})}})}function S(){if(!l)return;window.lenis&&window.lenis.start(),document.body.style.overflow="";const t=y[p],w=t.element,m=document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title");gsap.set(e,{backgroundColor:"transparent"}),gsap.to([r,n,i,a,d],{opacity:0,y:20,duration:.3,ease:"power2.in"});const s=w.originalParent,h=s.getBoundingClientRect(),E=window.scrollY||document.documentElement.scrollTop,k=h.top+E-window.innerHeight/2+h.height/2;window.scrollTo({top:k,behavior:"auto"});const H=Flip.getState(w,{props:"all"});t.placeholder&&s&&(s.insertBefore(w,t.placeholder),t.placeholder.remove(),t.placeholder=null),Flip.from(H,{duration:.8,ease:"power2.inOut",onUpdate:function(){this.progress()>.7&&gsap.to(m,{opacity:1,duration:.3,ease:"power2.out"})},onComplete:()=>{e.classList.remove("active"),e.style.display="none",l=null}})}function P(){const t=document.querySelectorAll(".photo");gsap.killTweensOf(t);let w=p<y.length-1?p+1:0;const m=y[p],s=y[w];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const h=Array.from(document.querySelectorAll(".photo")).filter(H=>H!==s.element);gsap.set(h,{opacity:0});const E=s.element.originalParent,k=document.createElement("div");k.classList.add("photo-placeholder"),k.style.width=s.element.offsetWidth+"px",k.style.height=s.element.offsetHeight+"px",E.insertBefore(k,s.element),s.placeholder=k,u(s.element),o.innerHTML="",o.appendChild(s.element),gsap.set(s.element,{opacity:1,x:"100%",scale:.95,rotation:3}),gsap.to(s.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=s.title,n.textContent=s.exif,l=s.element,p=w}function b(){const t=document.querySelectorAll(".photo");gsap.killTweensOf(t);let w=p>0?p-1:y.length-1;const m=y[p],s=y[w];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const h=Array.from(document.querySelectorAll(".photo")).filter(H=>H!==s.element);gsap.set(h,{opacity:0});const E=s.element.originalParent,k=document.createElement("div");k.classList.add("photo-placeholder"),k.style.width=s.element.offsetWidth+"px",k.style.height=s.element.offsetHeight+"px",E.insertBefore(k,s.element),s.placeholder=k,u(s.element),o.innerHTML="",o.appendChild(s.element),gsap.set(s.element,{opacity:1,x:"-100%",scale:.95,rotation:-3}),gsap.to(s.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=s.title,n.textContent=s.exif,l=s.element,p=w}const f=t=>{e.classList.contains("active")&&(t.key==="Escape"&&S(),t.key==="ArrowRight"&&P(),t.key==="ArrowLeft"&&b())},q=t=>{t.target===e&&S()};document.addEventListener("keydown",f),e.addEventListener("click",q),i.addEventListener("click",S),a.addEventListener("click",b),d.addEventListener("click",P);const L=new Hammer(o);L.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});let M=!1,C=0;L.on("panstart",function(t){M=!0,C=t.center.x,gsap.killTweensOf(l)}),L.on("pan",function(t){if(!M||!l)return;const m=(t.center.x-C)/window.innerWidth*100,h=Math.min(Math.max(m*.5,-50),50),E=Math.abs(h),k=gsap.utils.mapRange(0,50,1,.3)(E),H=gsap.utils.mapRange(0,50,1,0)(E);gsap.set(l,{x:h+"%",rotation:h*.05,scale:k,opacity:H})}),L.on("panend",function(t){if(!M||!l)return;M=!1;const w=Math.abs(t.velocity),m=t.deltaX,s=window.innerWidth*.2;Math.abs(m)>s||w>.5?m<0?P():b():gsap.to(l,{x:"0%",rotation:0,scale:1,opacity:1,duration:.3,ease:"power2.out"})}),window.photoModalCleanup=()=>{T.forEach(({element:t,handler:w})=>{t.removeEventListener("click",w)}),document.removeEventListener("keydown",f),e.removeEventListener("click",q),i.removeEventListener("click",S),a.removeEventListener("click",b),d.removeEventListener("click",P),L&&L.destroy(),e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="none",window.lenis&&window.lenis.start(),document.body.style.overflow="")}}window.initPhotoModal=ve;function Q(){console.log("üîç initAbout() POZVAN!"),console.log("üîç document.readyState:",document.readyState),console.log("üîç Tra≈æim .section.about-page...");const e=document.querySelector(".section.about-page");if(console.log("üîç .section.about-page pronaƒëen?",!!e),!e){console.log("‚ö†Ô∏è .section.about-page NE POSTOJI - izlazim iz initAbout()");return}console.log("‚úÖ üé® Inicijaliziram About Page animacije!"),gsap.registerPlugin(ScrollTrigger);const o=document.createElement("style");o.textContent=`
    .about-page-title {
      overflow: visible;
    }
    
    .about-page-title .line {
      display: block;
      opacity: 0;
    }
  `,document.head.appendChild(o);const r=document.querySelector(".about-page-mobile-img"),n=document.querySelector(".about-page-title");document.querySelector(".about-page-paragraph");const i=document.querySelector("#w-node-_5cfb6280-6a33-c948-6914-d1d14a02033e-e0820647"),a=document.querySelector("#w-node-_8ff28dca-4908-092a-a93e-64674276b761-e0820647"),d=document.querySelector("#w-node-d37b0f9a-3049-7721-1f0b-b2dfa6b25604-e0820647"),g=document.querySelector("#w-node-a792f731-c023-e6a4-a3a2-3b0f75706c28-e0820647"),p=document.querySelector("#w-node-_38752304-f930-7aec-55b4-e5bb69d7261b-e0820647"),y=document.querySelector("#w-node-af8686f0-0eff-8a7c-0ed7-beca4d3b4ae5-e0820647"),l=document.querySelector("#w-node-f5866f73-1277-b3c6-9637-905ed2896c1d-e0820647"),T=document.querySelector("#w-node-_26bcf290-3970-d3ae-4c5a-8a87562b3b8f-e0820647"),u=document.querySelector("#w-node-_959dd736-48e6-8ca1-a499-ecdb1597fdfc-e0820647"),x=document.querySelector("#w-node-_81d87156-36a4-f557-ac99-5a50eaa2aede-e0820647"),S=document.querySelectorAll(".divider"),P=[],b=gsap.timeline();r&&(gsap.set(r,{clipPath:"inset(0% 0% 100% 0%)"}),b.to(r,{clipPath:"inset(0% 0% 0% 0%)",duration:1.2,ease:"expo.inOut"},.2));let f=0,q=.8,L=0;if(n){const t=new SplitType(n,{types:"lines"});if(P.push(t),t.lines&&t.lines.length>0){const w=t.lines;gsap.set(w,{opacity:0,y:20}),w.forEach((s,h)=>{b.to(s,{opacity:1,y:0,duration:.4,ease:"power2.out"},q+h*.15)}),f=q+(w.length-1)*.15+.4;const m=f-q;L=q+m*.7-.15,b.call(()=>{},null,f)}}const M=[{divider:S[0],title:i,content:p},{divider:S[1],title:a,content:y},{divider:S[2],title:d,content:l},{divider:S[3],title:g,content:T},{divider:S[4],title:u,content:x}];let C=L;M.forEach((t,w)=>{if(!t.divider)return;if(gsap.set(t.divider,{width:0,opacity:0}),t.title&&gsap.set(t.title,{opacity:0,y:20}),t.content&&gsap.set(t.content,{opacity:0,y:20}),t.divider.getBoundingClientRect().top<window.innerHeight){b.to(t.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},C),t.title&&b.to(t.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},C+.15),t.content&&b.to(t.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},C+.25);const E=C+.25+.6-C;C=C+E*.7}else ScrollTrigger.create({trigger:t.divider,start:"top 92%",once:!0,onEnter:()=>{const h=gsap.timeline();h.to(t.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},0),t.title&&h.to(t.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},.15),t.content&&h.to(t.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},.25)}})}),typeof barba<"u"&&barba.hooks.beforeLeave(()=>{P.forEach(t=>{t&&t.revert&&t.revert()}),ScrollTrigger.getAll().forEach(t=>t.kill()),o&&o.parentNode&&o.parentNode.removeChild(o)})}window.initAbout=Q;console.log("üì¶ about-page.js loaded, document.readyState:",document.readyState);document.readyState==="loading"?(console.log("‚è≥ ƒåekam DOMContentLoaded..."),document.addEventListener("DOMContentLoaded",Q)):(console.log("‚ñ∂Ô∏è DOM veƒá loaded, pozivam initAbout() odmah"),Q());Pe();window.initPhotoModal=ve;
