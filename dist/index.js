function Ae(){const e=document.querySelectorAll(".nav-link"),t=window.location.pathname;e.forEach(r=>{const o=r.getAttribute("href");t===o||t==="/"&&o==="/"?(r.setAttribute("aria-current","page"),r.classList.add("current","w--current")):(r.removeAttribute("aria-current"),r.classList.remove("current","w--current"))})}function qe(e){e.startsWith("work")&&window.photoModalCleanup&&window.photoModalCleanup(),e.startsWith("work")&&window.cleanupWorkPage&&window.cleanupWorkPage(),ScrollTrigger.getAll().forEach(r=>{r.kill()}),document.querySelectorAll(".split-type").forEach(r=>{r.splitType&&r.splitType.revert()})}function J(e){var t,r,o,i,s,d,f,p,w;switch(e){case"home":(t=window.initHero)==null||t.call(window),(r=window.initAboutSection)==null||r.call(window),(o=window.initHighlights)==null||o.call(window),(i=window.initCategories)==null||i.call(window);break;case"work":case"work-abstract":case"work-nature":case"work-people":case"work-products":case"work-architecture":(s=window.initWork)==null||s.call(window),(d=window.initCategoryTitleAnimation)==null||d.call(window),(f=window.initWorkCategoriesReveal)==null||f.call(window),(p=window.initPhotoModal)==null||p.call(window);break;case"about":(w=window.initAbout)==null||w.call(window);break;default:console.warn(`âš ï¸ Nepoznati namespace: ${e}`)}}function Oe(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),barba.hooks.beforeEnter(()=>{localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode"))}),barba.init({transitions:[{name:"fade",leave(e){return window.lenis&&window.lenis.stop(),Ae(),qe(e.current.namespace),localStorage.getItem("dark-mode")==="enabled"&&(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")),gsap.to(e.current.container,{opacity:0,duration:.15})},beforeEnter(e){localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),document.body.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),document.body.classList.remove("ui-dark-mode")),window.lenis?window.lenis.scrollTo(0,{immediate:!0,force:!0}):window.scrollTo(0,0)},enter(e){return gsap.to(e.next.container,{opacity:1,duration:.15})},after(e){J(e.next.namespace),requestAnimationFrame(()=>{window.lenis&&window.lenis.start(),ScrollTrigger.refresh(!0)})}}],views:[{namespace:"home"},{namespace:"work"},{namespace:"about"},{namespace:"work-abstract"},{namespace:"work-nature"},{namespace:"work-people"},{namespace:"work-products"},{namespace:"work-architecture"}]})}window.addEventListener("beforeunload",()=>{window.scrollTo(0,0)});Oe();var ue;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{var t;const e=(t=document.querySelector('[data-barba="container"]'))==null?void 0:t.getAttribute("data-barba-namespace");e&&J(e)});else{const e=(ue=document.querySelector('[data-barba="container"]'))==null?void 0:ue.getAttribute("data-barba-namespace");e&&J(e)}function pe(){const e=new Lenis({lerp:.1,wheelMultiplier:1,smoothWheel:!0,smoothTouch:!1,infinite:!1});window.lenis=e,e.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{e.raf(t*1e3)}),gsap.ticker.lagSmoothing(0)}window.initLenis=pe;pe();function me(){const e=document.body,t=document.querySelector(".nav-theme-switcher");localStorage.getItem("dark-mode")==="enabled"?(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode")):(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode")),t&&t.addEventListener("click",()=>{e.classList.contains("ui-dark-mode")?(document.documentElement.classList.remove("ui-dark-mode"),e.classList.remove("ui-dark-mode"),console.log("Removed .ui-dark-mode from html and body"),localStorage.setItem("dark-mode","disabled")):(document.documentElement.classList.add("ui-dark-mode"),e.classList.add("ui-dark-mode"),console.log("Added .ui-dark-mode to html and body"),localStorage.setItem("dark-mode","enabled"))})}window.initDarkMode=me;me();function ge(){const e=document.querySelector(".section.footer"),t=e==null?void 0:e.previousElementSibling;gsap.registerPlugin(ScrollTrigger),t&&(gsap.to(t,{scrollTrigger:{trigger:t,start:"top top",end:()=>`+=${window.innerHeight*.5}`,pin:!1,scrub:!0,id:"footer-prev-section"}}),gsap.to(e,{scrollTrigger:{trigger:t,start:()=>`bottom+=${window.innerHeight*.5} bottom`,end:"bottom bottom",scrub:!0,id:"footer-main"}}),gsap.set(t,{zIndex:1}))}window.initFooter=ge;ge();function fe(e,t=!0){e.dataset.originalText||(e.dataset.originalText=e.textContent);const r=e.dataset.originalText;e.style.position="relative",e.style.zIndex="100000";let o;e.querySelector(".shuffle-text")?o=e.querySelector(".shuffle-text"):(o=document.createElement("span"),o.className="shuffle-text",o.textContent=r,e.textContent="",e.appendChild(o)),o.style.pointerEvents="none";let i=!1,s;const d=w=>{const l=w.split("");for(let L=l.length-1;L>0;L--){const P=Math.floor(Math.random()*(L+1));[l[L],l[P]]=[l[P],l[L]]}return l.join("")},f=()=>{s&&(clearInterval(s),s=null),o.textContent=r,i=!1},p=()=>{if("ontouchstart"in window||navigator.maxTouchPoints>0||i)return;i=!0;let w=0;s&&clearInterval(s),s=setInterval(()=>{w<3?(o.textContent=d(r),w++):(o.textContent=r,clearInterval(s),s=null,i=!1)},100)};return t&&("ontouchstart"in window||navigator.maxTouchPoints>0||e.addEventListener("mouseenter",p),e.addEventListener("click",function(l){f()})),p}function he(){document.querySelectorAll(".link, .cta").forEach(e=>{fe(e,!0)})}window.createShuffleEffect=fe;window.initLinksHover=he;he();function we(){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)&&!e.match(/FxiOS/i)}function Me(){if(!we())return;document.body.addEventListener("click",function(o){const i=o.target.closest("a, button");i&&(i.style.transition="opacity 0.2s ease-out",i.style.opacity="0.5",setTimeout(()=>{i.style.opacity="1"},300))});function e(o){var i=o.tagName.toLowerCase(),s=o.dataset.bind,d=s&&s.indexOf("click")>-1||i=="a"||i=="button";return d}var t={touchend:function(o,i){i.dataset._clicked_="",i.dataset._mousemove_="0",i.dataset._timeOutId_=""},mouseover:function(o){o.preventDefault()},mousemove:function(o,i){o.preventDefault();var s=+(i.dataset._mousemove_||"0");if(s=s+1,console.log("mousemoves: "+s),i.dataset._mousemove_=s,s>1&&!i.dataset._timeOutId_){var d=setTimeout(function(){console.log("double mousemove click fired"),i.click()},80);i.dataset._timeOutId_=d}},click:function(o,i){if(i.dataset._clicked_){o.isTrusted&&(console.log("prevented doubleclick"),o.preventDefault());return}i.dataset._timeOutId_&&(console.log("cleared timeout"),clearTimeout(+i.dataset._timeOutId_)),i.dataset._clicked_="true"}};function r(o){var i=o.target;if(i&&i.click&&i.tagName&&i.dataset&&e(i)){var s=o.type;console.log(s,i),t[s]&&t[s](o,i)}}document.addEventListener("touchend",r,!0),document.addEventListener("mouseover",r,!0),document.addEventListener("mousemove",r,!0),document.addEventListener("click",r,!0)}function ye(){we()&&Me()}window.initIosSafariFix=ye;ye();const X={enabled:!1,logs:[],lastScrollY:0,lastTimestamp:0,freezeThreshold:100,init(){this.enabled&&(console.log("ðŸ” ScrollDebugger aktiviran"),window.lenis&&window.lenis.on("scroll",e=>{this.logScroll("LENIS",e)}),window.ScrollTrigger&&(ScrollTrigger.addEventListener("refresh",()=>{console.log("ðŸ”„ ScrollTrigger REFRESH event")}),ScrollTrigger.addEventListener("scrollStart",()=>{console.log("â–¶ï¸ ScrollTrigger SCROLL START")}),ScrollTrigger.addEventListener("scrollEnd",()=>{console.log("â¸ï¸ ScrollTrigger SCROLL END")})),this.startRAFMonitoring(),this.trackScrollDirection(),console.log("âœ… ScrollDebugger setup complete"))},logScroll(e,t){var d;const r=performance.now(),o=r-this.lastTimestamp,i=t.scroll-this.lastScrollY,s=i>0?"â¬‡ï¸ DOWN":"â¬†ï¸ UP";o>this.freezeThreshold&&this.lastTimestamp>0&&console.warn(`ðŸš¨ FREEZE DETECTED! ${o.toFixed(2)}ms gap`,{scrollPosition:t.scroll,direction:s,gap:`${o.toFixed(2)}ms`,scrollDelta:i}),Math.abs(i)>1&&console.log(`ðŸ“œ ${e} ${s}`,{scroll:t.scroll.toFixed(2),velocity:((d=t.velocity)==null?void 0:d.toFixed(2))||"N/A",delta:i.toFixed(2),time:o.toFixed(2)+"ms"}),this.lastScrollY=t.scroll,this.lastTimestamp=r},startRAFMonitoring(){let e=performance.now(),t=0;const r=o=>{var s;const i=o-e;i>32&&console.warn(`â±ï¸ SLOW FRAME: ${i.toFixed(2)}ms (${(1e3/i).toFixed(1)}fps)`,{framesSinceLastLog:t,scrollY:((s=window.lenis)==null?void 0:s.scroll)||window.scrollY}),t++,e=o,requestAnimationFrame(r)};requestAnimationFrame(r)},trackScrollDirection(){let e=null;const t=()=>{var i;const r=((i=window.lenis)==null?void 0:i.scroll)||window.scrollY,o=r>this.lastScrollY?"down":"up";o!==e&&e!==null&&console.log(`ðŸ”„ DIRECTION CHANGE: ${e} â†’ ${o}`,{scrollY:r.toFixed(2),activeScrollTriggers:ScrollTrigger.getAll().length}),e=o,requestAnimationFrame(t)};requestAnimationFrame(t)},logScrollTriggers(){const e=ScrollTrigger.getAll();console.log(`ðŸ“Š Active ScrollTriggers: ${e.length}`),e.forEach(t=>{console.log(`  - ${t.vars.id||"unnamed"}`,{start:t.start,end:t.end,progress:t.progress.toFixed(2),isActive:t.isActive})})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>X.init()):X.init();window.ScrollDebugger=X;document.addEventListener("keydown",e=>{var t,r,o;(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(console.log("ðŸ” === SCROLL DEBUG DUMP ==="),X.logScrollTriggers(),console.log("Lenis state:",{scroll:(t=window.lenis)==null?void 0:t.scroll,velocity:(r=window.lenis)==null?void 0:r.velocity,direction:(o=window.lenis)==null?void 0:o.direction}),console.log("========================="))});function He(){if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){console.log("ðŸ–±ï¸ Touch device detektiran - custom cursor onemoguÄ‡en");return}const t=document.createElement("div");t.id="custom-cursor",t.style.cssText=`
    position: fixed;
    width: 56px;
    height: 32px;
    border-radius: 999px;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
    background-color: #ffffff;
    mix-blend-mode: difference;
    opacity: 0;
    display: none;
  `,document.body.appendChild(t);let r=window.innerWidth/2,o=window.innerHeight/2;const i=p=>{r=p.clientX,o=p.clientY,t.style.left=`${r}px`,t.style.top=`${o}px`},s=()=>{t.style.display="block",setTimeout(()=>{t.style.opacity="1"},10)},d=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},200)};window.addEventListener("hero:drag:start",s),window.addEventListener("hero:drag:end",d);const f=p=>{i(p)};return window.addEventListener("mousemove",f),()=>{t.remove(),window.removeEventListener("mousemove",f),window.removeEventListener("hero:drag:start",s),window.removeEventListener("hero:drag:end",d)}}function ve(){const e=document.querySelector(".section.hero"),t=document.querySelector(".hero-title"),r=document.querySelectorAll(".hero-footer");if(!e){console.error("âŒ Hero sekcija nije pronaÄ‘ena!");return}r.forEach(c=>{c.style.position="relative",c.style.zIndex="10",c.style.pointerEvents="auto",c.querySelectorAll('a, button, [role="button"]').forEach(q=>{q.style.position="relative",q.style.zIndex="11",q.style.pointerEvents="auto"})});const o=document.querySelector(".hero-images-wrapper");if(!o){console.warn("Hero wrapper nije pronaÄ‘en!");return}const i=Array.from(document.querySelectorAll(".hero-image")),s=i.length;if(s===0){console.warn("âš ï¸ Nema slika za prikaz!");return}const d=document.querySelector(".hero-images-container");if(typeof THREE>"u"){console.error("âŒ Three.js nije uÄitan! Provjerite Webflow Footer Code.");return}i.forEach(c=>{c.style.display="none"}),o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="auto",d.innerHTML="",d.style.position="relative",d.style.width="100%",d.style.height="100%",d.style.overflow="hidden",d.style.pointerEvents="auto";const f=new THREE.Scene,p=new THREE.PerspectiveCamera(40,d.offsetWidth/d.offsetHeight,.1,3e3);p.position.z=900;const w=window.innerWidth<=768;p.position.y=w?-50:0;const l=new THREE.WebGLRenderer({alpha:!0,antialias:!0});l.setSize(d.offsetWidth,d.offsetHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),l.setClearColor(0,0),l.domElement.style.position="absolute",l.domElement.style.top="0",l.domElement.style.left="0",l.domElement.style.width="100%",l.domElement.style.height="100%",l.domElement.style.zIndex="1",d.appendChild(l.domElement);const L=new THREE.AmbientLight(16777215,.6);f.add(L);const P=new THREE.DirectionalLight(16777215,.4);P.position.set(0,500,800),f.add(P);const R=`
    uniform float uBend;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vUv = uv;
      vec3 pos = position;
      
      // Cylinder bend - zakrivljenje po X-osi
      float bend = pos.x * pos.x * uBend;
      pos.z -= bend;
      
      // Å alji bend amount u fragment shader za lighting
      vBendAmount = bend;
      
      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
  `,T=`
    uniform sampler2D uTexture;
    uniform float uOpacity;
    varying vec2 vUv;
    varying float vBendAmount;

    void main() {
      vec4 texColor = texture2D(uTexture, vUv);
      
      // Shadow na rubovima za naglaÅ¡avanje benda
      float edgeShadow = 1.0 - smoothstep(0.5, 1.0, abs(vUv.x - 0.5) * 2.0) * 0.25;
      
      // Vignette za dubinu
      vec2 center = vUv - 0.5;
      float vignette = 1.0 - smoothstep(0.3, 0.8, length(center)) * 0.1;
      
      vec3 finalColor = texColor.rgb * edgeShadow * vignette;
      
      gl_FragColor = vec4(finalColor, texColor.a * uOpacity);
    }
  `,u=new THREE.TextureLoader,h=[],g=new THREE.Group;f.add(g);const k=Math.random()*.4-.2,C=Math.random()*.4-.2;g.rotation.x=k,g.rotation.z=C;const x=280,A=165,n=185,y=2*Math.PI/s;let m=0;const a=new Array(s);i.forEach((c,S)=>{u.load(c.src,q=>{const K=new THREE.PlaneGeometry(A,n,64,1),z=new THREE.ShaderMaterial({uniforms:{uTexture:{value:q},uBend:{value:.0015},uOpacity:{value:0}},vertexShader:R,fragmentShader:T,transparent:!0,side:THREE.DoubleSide}),H=new THREE.Mesh(K,z),W=-y*S+Math.PI,B=Math.sin(W)*x,Ce=Math.cos(W)*x;H.position.set(B,30,Ce),H.rotation.y=W,H.material.uniforms.uOpacity.value=0,H.scale.set(.7,.7,.7),g.add(H),a[S]=H,m++,m===s&&(a.forEach(Pe=>h.push(Pe)),E())},void 0,q=>{console.error(`âŒ GreÅ¡ka pri uÄitavanju slike ${S}:`,q)})});function v(c){if(c){const S=c.textContent.trim();c.innerHTML=S.split("").map(q=>`<span style="display: inline-block;">${q===" "?"&nbsp;":q}</span>`).join("")}}v(t);const b=t?t.querySelectorAll("span"):[];gsap.set(r,{y:20,opacity:0}),gsap.set(b,{y:200,opacity:0});function E(){const c=gsap.timeline();Le(.008),h.forEach((H,W)=>{const B=.2+W*.15;c.to(H.material.uniforms.uOpacity,{value:1,duration:.6,ease:"power1.out"},B),c.to(H.scale,{x:1,y:1,z:1,duration:.6,ease:"back.out(1.2)"},B)});const S=.2+(h.length-1)*.15+.6,q=S-1.2;c.to(b,{y:0,opacity:1,duration:.6,stagger:.04,ease:"power2.inOut"},q),c.to(r,{y:0,opacity:1,duration:.6,stagger:.12,ease:"power2.inOut"},q+.3);const K=S,z={value:.008};c.to(z,{value:F,duration:2,ease:"power2.out",onUpdate:()=>{M=z.value},onComplete:()=>{O()}},K)}function O(){const c=g.rotation.x,S=g.rotation.z;gsap.to(g.rotation,{x:c+.03,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1}),gsap.to(g.rotation,{z:S+.025,duration:5.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}let F=.001,N=0,M=F,xe=.015;function Le(c){M=c}let oe=0,ne=0,I=!1,_=0,$=0,j=0,U=!1,Y=0;const ie=c=>{I=!0,c.clientX,_=c.clientX,j=c.clientX,$=0,gsap.killTweensOf(g.rotation),Y=M,M=0,U=!0,window.dispatchEvent(new CustomEvent("hero:drag:start")),l.domElement.style.cursor="grabbing"},re=c=>{if(!I)return;c.preventDefault(),_=c.clientX;const S=_-j;g.rotation.y+=S*9e-4,$=S*9e-4,j=_},ae=()=>{if(!I)return;I=!1,l.domElement.style.cursor="grab",window.dispatchEvent(new CustomEvent("hero:drag:end"));const c=$*80;gsap.to(g.rotation,{y:g.rotation.y+c,duration:3,ease:"power2.out"}),setTimeout(()=>{I||gsap.to({speed:0},{speed:Y,duration:1,ease:"power2.inOut",onUpdate:function(){M=this.targets()[0].speed},onComplete:()=>{M=Y,U=!1}})},2500)};l.domElement.addEventListener("mousedown",ie),window.addEventListener("mousemove",re),window.addEventListener("mouseup",ae),l.domElement.style.cursor="grab",l.domElement.style.userSelect="none",l.domElement.style.webkitUserSelect="none",l.domElement.style.touchAction="auto";let se=!0;const G=new IntersectionObserver(c=>{c.forEach(S=>{se=S.isIntersecting})},{threshold:0,rootMargin:"100px"});G.observe(e);const le=()=>{se&&(N+=(M-N)*.15,g.rotation.y+=N,l.render(f,p))};gsap.ticker.add(le);function ce(){const c=d.offsetWidth,S=d.offsetHeight;p.aspect=c/S,p.updateProjectionMatrix(),l.setSize(c,S)}window.addEventListener("resize",ce);let V=!1;const Z=()=>{I||U||V||(V=!0,requestAnimationFrame(()=>{const c=window.pageYOffset||document.documentElement.scrollTop,S=Math.abs(c-oe);ne=Math.min(S*8e-4,xe),S>.5?(gsap.killTweensOf(g.rotation),M=F+ne):M=F,oe=c,V=!1}))};window.removeEventListener("scroll",Z),window.addEventListener("scroll",Z,{passive:!0}),window.addEventListener("barba:before-leave",()=>{gsap.ticker.remove(le),gsap.killTweensOf(g.rotation),G&&G.disconnect(),l.domElement.removeEventListener("mousedown",ie),window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",ae),h.forEach(c=>{c.geometry&&c.geometry.dispose(),c.material&&(c.material.uniforms.uTexture.value&&c.material.uniforms.uTexture.value.dispose(),c.material.dispose())}),l.dispose(),window.removeEventListener("resize",ce),window.removeEventListener("scroll",Z)})}window.initHero=ve;document.querySelector(".hero-images-container")&&ve();function Q(){if(!document.querySelector('[data-barba-namespace="home"]'))return;const t=document.querySelector(".section.about"),r=document.querySelector(".home-about-title"),o=document.querySelector(".about-scroll");if(!o||!t||!r){console.error("âŒ About Section elementi nisu kompletni");return}gsap.registerPlugin(ScrollTrigger);const i=new SplitType(r,{types:"words"}),s=new SplitType(o,{types:"words"});i.words.forEach(f=>{gsap.set(f,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})}),s.words.forEach(f=>{gsap.set(f,{display:"inline-block",overflow:"hidden",verticalAlign:"top"})});const d=f=>{f.forEach(p=>{const w=p.textContent,l=document.createElement("span");l.style.display="inline-block",l.textContent=w,p.textContent="",p.appendChild(l),gsap.set(l,{y:"100%",opacity:0})})};d(i.words),d(s.words),i.words.slice(0,6).forEach(f=>{const p=f.querySelector("span");gsap.set(p,{y:0,opacity:1})}),gsap.to(i.words.slice(6).map(f=>f.querySelector("span")),{y:0,opacity:1,duration:.6,stagger:.015,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 60%",toggleActions:"play none none none",once:!0,id:"about-title-reveal"}}),gsap.to(s.words.map(f=>f.querySelector("span")),{y:0,opacity:1,duration:.6,stagger:.015,ease:"power2.out",scrollTrigger:{trigger:o,start:"top 80%",toggleActions:"play none none none",once:!0,id:"about-scroll-reveal"}})}window.initAboutSection=Q;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Q):Q();function Se(){const e=document.querySelector(".section.highlights"),t=document.querySelector(".highlights-wrapper");if(!e||!t)return;gsap.registerPlugin(ScrollTrigger);const r=t.scrollWidth-e.offsetWidth;gsap.to(t,{x:-r,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:`+=${r}`,scrub:1,pin:!0,anticipatePin:1,invalidateOnRefresh:!0,id:"highlights-horizontal"}});const o=document.querySelectorAll(".highlights-card"),i=window.innerWidth<=767;gsap.set(o,{opacity:0,y:50}),gsap.to(o,{opacity:1,y:0,duration:.6,ease:"power1.inOut",stagger:.2,scrollTrigger:{trigger:".highlights-wrapper",start:"top 80%",toggleActions:"play none none none",id:"highlights-cards"}})}window.initHighlights=Se;Se();function ee(){const e=document.querySelectorAll(".categories-row");if(!document.querySelector(".section.categories")){console.warn("Element .section.categories nije pronaÄ‘en na stranici");return}e.forEach(r=>{r.addEventListener("mouseenter",()=>{gsap.to(e,{opacity:.1,duration:.3,ease:"power2.out"}),gsap.to(r,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(f=>{const p=f.querySelector(".categories-photo");f!==r&&gsap.to(p,{opacity:0,duration:.3,ease:"power2.out"})});const o=r.querySelector(".categories-photo");gsap.to(o,{opacity:1,height:300,duration:.3,ease:"power1.out"});const i=r.querySelector(".cta");gsap.to(i,{opacity:1,duration:.3,ease:"power1.out"});const s=r.querySelector(".title-l"),d=r.querySelector(".cta");s&&createShuffleEffect(s,!1)(),d&&createShuffleEffect(d,!1)()}),r.addEventListener("mouseleave",()=>{gsap.to(e,{opacity:1,duration:.3,ease:"power1.out"}),e.forEach(i=>{const s=i.querySelector(".categories-photo");gsap.to(s,{opacity:0,height:0,duration:.3,ease:"power1.out"})});const o=r.querySelector(".cta");gsap.to(o,{opacity:0,duration:.3,ease:"power1.out"})})})}window.initCategories=ee;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.querySelector('[data-barba-namespace="home"]')&&ee()}):document.querySelector('[data-barba-namespace="home"]')&&ee();let D=!1;async function be(){if(D)return;if(D=!0,!document.querySelectorAll(".photo-container").length){D=!1;return}try{let p=function(){const u=window.innerWidth;return u<768?f.mobile:u<992?f.tablet:f.desktop},w=function(){const u=p();let h=!0,g=1,k=null,C=null;window.shuffledPhotos.forEach((x,A)=>{const n=x.querySelector(".photo"),m=n.naturalWidth>n.naturalHeight?u.horizontalSpan:u.verticalSpan;let a;if(u.columns===1)a=1;else if(h){do a=u.left[Math.floor(Math.random()*u.left.length)];while(a===k);k=a}else{do a=u.right[Math.floor(Math.random()*u.right.length)];while(a===C);C=a}x.style.display="block",x.style.gridColumnStart=a,x.style.gridColumnEnd=a+m,x.style.gridRowStart=g,h=!h,g++})};var t=p,r=w;const i=Array.from(document.querySelectorAll(".photo-container"));i.forEach(u=>{u.style.opacity="0"}),document.querySelectorAll(".photo").forEach(u=>{u.originalParent=u.parentElement}),i.forEach((u,h)=>{const g=u.querySelector(".photo");g&&(h<6?(g.setAttribute("loading","eager"),g.setAttribute("fetchpriority","high")):g.setAttribute("loading","lazy"),g.setAttribute("decoding","async"))}),i.forEach(u=>{u.style.display="",u.style.gridColumn="",u.style.gridColumnStart="",u.style.gridColumnEnd="",u.style.gridRowStart="",u.style.transform=""});const d=i.slice(0,30);i.slice(30).forEach(u=>{u.style.display="none"}),window.shuffledPhotos=d.sort(()=>Math.random()-.5),window.lastPath=window.location.pathname;const f={desktop:{columns:12,left:[2,3],right:[8,9],horizontalSpan:3,verticalSpan:2},tablet:{columns:8,left:[2,3],right:[5,6],horizontalSpan:3,verticalSpan:2},mobile:{columns:1,left:[1],right:[1],horizontalSpan:1,verticalSpan:1}},L=window.shuffledPhotos.map(u=>u.querySelector(".photo")).map(u=>u.complete&&u.naturalWidth>0?Promise.resolve():new Promise(h=>{u.onload=()=>h(),u.onerror=()=>h()}));await Promise.all(L),window.isSettingUpGrid||(window.isSettingUpGrid=!0,w(),window.isSettingUpGrid=!1);const P=5,R=window.shuffledPhotos.slice(0,P),T=window.shuffledPhotos.slice(P);if(gsap.fromTo(R,{opacity:0,scale:.9,y:50},{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out",stagger:.12,delay:.3}),T.length>0){const u={root:null,rootMargin:"0px",threshold:.2},h=new IntersectionObserver(g=>{g.forEach(k=>{k.isIntersecting&&(gsap.to(k.target,{opacity:1,scale:1,y:0,duration:.8,ease:"power3.out"}),h.unobserve(k.target))})},u);T.forEach(g=>{gsap.set(g,{opacity:0,scale:.9,y:50}),h.observe(g)}),window.workPhotoObserver=h}}finally{D=!1}}function Ee(){const e=document.querySelectorAll(".work-categories-title-wrapper, .work-categories-top-margin");e&&gsap.matchMedia().add("(max-width: 767px)",()=>{gsap.to(e,{scale:.7,opacity:0,scrollTrigger:{trigger:e,start:"top top",end:"+=200",scrub:.5,invalidateOnRefresh:!0}})})}function ke(){const e=document.querySelector(".section.categories");if(!e)return;gsap.set(e,{opacity:0,y:60});const t=new IntersectionObserver(r=>{r.forEach(o=>{o.isIntersecting&&(gsap.to(e,{opacity:1,y:0,duration:1,ease:"power2.out"}),window.initCategories&&window.initCategories(),t.unobserve(o.target))})},{rootMargin:"-100px",threshold:.1});t.observe(e),window.workCategoriesObserver=t}function Re(){window.workPhotoObserver&&(window.workPhotoObserver.disconnect(),window.workPhotoObserver=null),window.workCategoriesObserver&&(window.workCategoriesObserver.disconnect(),window.workCategoriesObserver=null)}window.initWork=be;window.initCategoryTitleAnimation=Ee;window.initWorkCategoriesReveal=ke;window.cleanupWorkPage=Re;function de(){if(document.querySelector('[data-barba-namespace^="work"]')&&document.querySelectorAll(".photo-container").length>0&&!D){be(),Ee(),ke();const t=()=>{window.initPhotoModal?window.initPhotoModal():setTimeout(t,50)};setTimeout(t,100)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",de):de();window.photoModalCleanup=null;function Te(){window.photoModalCleanup&&(window.photoModalCleanup(),window.photoModalCleanup=null);const e=document.querySelector(".modal-photo");if(!e)return;const t=e.querySelector(".modal-photo-container"),r=e.querySelector(".modal-title"),o=e.querySelector(".modal-exif"),i=e.querySelector(".modal-close"),s=e.querySelector('[data-photo-nav="previous"]'),d=e.querySelector('[data-photo-nav="next"]'),f=document.querySelectorAll(".photo");gsap.registerPlugin(Flip);let p=0,w=[],l=null,L=[];function P(n){const m=n.getBoundingClientRect(),a=window.scrollY||document.documentElement.scrollTop,v=m.top+a-100;window.scrollTo({top:v,behavior:"auto"})}f.forEach((n,y)=>{const m=window.shuffledPhotos.find(b=>b.querySelector(".photo")===n),a=window.shuffledPhotos.indexOf(m);w[a]={src:n.getAttribute("src"),title:n.getAttribute("data-title"),exif:n.getAttribute("data-exif"),category:n.getAttribute("data-category"),element:n,placeholder:null};const v=()=>{p=a,l=n,R(w[p])};n.addEventListener("click",v),L.push({element:n,handler:v})});function R(n){window.lenis&&window.lenis.stop(),document.body.style.overflow="hidden";const y=Flip.getState(n.element,{props:"all"}),m=n.element.originalParent,a=document.createElement("div");a.classList.add("photo-placeholder"),a.style.width=n.element.offsetWidth+"px",a.style.height=n.element.offsetHeight+"px",m.insertBefore(a,n.element),n.placeholder=a;const v=Array.from(document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title")).filter(b=>b!==n.element);gsap.to(v,{opacity:0,duration:.3,ease:"power2.inOut"}),t.appendChild(n.element),gsap.set(n.element,{opacity:1}),e.style.display="grid",e.classList.add("active"),e.style.backgroundColor="transparent",r.textContent=n.title,o.textContent=n.exif,gsap.set([r,o,i,s,d],{opacity:0,y:20}),Flip.from(y,{duration:.8,ease:"power2.inOut",absolute:!0,onComplete:()=>{e.classList.contains("active")&&gsap.to(e,{backgroundColor:"var(--_colors---off-white)",duration:.4,ease:"power2.out"}),gsap.to([r,o,i,s,d],{opacity:1,y:0,duration:.4,stagger:.1,ease:"power2.out"})}})}function T(){if(!l)return;gsap.killTweensOf([e,r,o,i,s,d]),gsap.killTweensOf(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title"),window.lenis&&window.lenis.start(),document.body.style.overflow="";const n=w[p],y=n.element,m=document.querySelectorAll(".photo, .navigation, .navbar, .work-categories-wrapper, .category-title");gsap.set(e,{backgroundColor:"transparent"}),gsap.to([r,o,i,s,d],{opacity:0,y:20,duration:.3,ease:"power2.in"});const a=y.originalParent,v=a.getBoundingClientRect(),b=window.scrollY||document.documentElement.scrollTop,E=v.top+b-window.innerHeight/2+v.height/2;window.scrollTo({top:E,behavior:"auto"});const O=Flip.getState(y,{props:"all"});n.placeholder&&a&&(a.insertBefore(y,n.placeholder),n.placeholder.remove(),n.placeholder=null),Flip.from(O,{duration:.8,ease:"power2.inOut",onUpdate:function(){this.progress()>.7&&gsap.to(m,{opacity:1,duration:.3,ease:"power2.out"})},onComplete:()=>{e.classList.remove("active"),e.style.display="none",l=null}})}function u(){const n=document.querySelectorAll(".photo");gsap.killTweensOf(n);let y=p<w.length-1?p+1:0;const m=w[p],a=w[y];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const v=Array.from(document.querySelectorAll(".photo")).filter(O=>O!==a.element);gsap.set(v,{opacity:0});const b=a.element.originalParent,E=document.createElement("div");E.classList.add("photo-placeholder"),E.style.width=a.element.offsetWidth+"px",E.style.height=a.element.offsetHeight+"px",b.insertBefore(E,a.element),a.placeholder=E,P(a.element),t.innerHTML="",t.appendChild(a.element),gsap.set(a.element,{opacity:1,x:"100%",scale:.95,rotation:3}),gsap.to(a.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=a.title,o.textContent=a.exif,l=a.element,p=y}function h(){const n=document.querySelectorAll(".photo");gsap.killTweensOf(n);let y=p>0?p-1:w.length-1;const m=w[p],a=w[y];m.placeholder&&m.element.originalParent&&(gsap.set(m.element,{x:0,opacity:1,scale:1,rotation:0}),m.element.originalParent.insertBefore(m.element,m.placeholder),m.placeholder.remove(),m.placeholder=null);const v=Array.from(document.querySelectorAll(".photo")).filter(O=>O!==a.element);gsap.set(v,{opacity:0});const b=a.element.originalParent,E=document.createElement("div");E.classList.add("photo-placeholder"),E.style.width=a.element.offsetWidth+"px",E.style.height=a.element.offsetHeight+"px",b.insertBefore(E,a.element),a.placeholder=E,P(a.element),t.innerHTML="",t.appendChild(a.element),gsap.set(a.element,{opacity:1,x:"-100%",scale:.95,rotation:-3}),gsap.to(a.element,{x:0,scale:1,rotation:0,duration:.5,ease:"power2.out"}),r.textContent=a.title,o.textContent=a.exif,l=a.element,p=y}const g=n=>{e.classList.contains("active")&&(n.key==="Escape"&&T(),n.key==="ArrowRight"&&u(),n.key==="ArrowLeft"&&h())},k=n=>{n.target===e&&T()};document.addEventListener("keydown",g),e.addEventListener("click",k),i.addEventListener("click",T),s.addEventListener("click",h),d.addEventListener("click",u);const C=new Hammer(t);C.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});let x=!1,A=0;C.on("panstart",function(n){x=!0,A=n.center.x,gsap.killTweensOf(l)}),C.on("pan",function(n){if(!x||!l)return;const m=(n.center.x-A)/window.innerWidth*100,v=Math.min(Math.max(m*.5,-50),50),b=Math.abs(v),E=gsap.utils.mapRange(0,50,1,.3)(b),O=gsap.utils.mapRange(0,50,1,0)(b);gsap.set(l,{x:v+"%",rotation:v*.05,scale:E,opacity:O})}),C.on("panend",function(n){if(!x||!l)return;x=!1;const y=Math.abs(n.velocity),m=n.deltaX,a=window.innerWidth*.2;Math.abs(m)>a||y>.5?m<0?u():h():gsap.to(l,{x:"0%",rotation:0,scale:1,opacity:1,duration:.3,ease:"power2.out"})}),window.photoModalCleanup=()=>{L.forEach(({element:n,handler:y})=>{n.removeEventListener("click",y)}),document.removeEventListener("keydown",g),e.removeEventListener("click",k),i.removeEventListener("click",T),s.removeEventListener("click",h),d.removeEventListener("click",u),C&&C.destroy(),e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="none",window.lenis&&window.lenis.start(),document.body.style.overflow="")}}window.initPhotoModal=Te;function te(){if(!document.querySelector(".section.about-page"))return;gsap.registerPlugin(ScrollTrigger);const t=document.createElement("style");t.textContent=`
    .about-page-title {
      overflow: visible;
    }
    
    .about-page-title .line {
      display: block;
      opacity: 0;
    }
  `,document.head.appendChild(t);const r=document.querySelector(".about-page-mobile-img"),o=document.querySelector(".about-page-title");document.querySelector(".about-page-paragraph");const i=document.querySelector("#w-node-_5cfb6280-6a33-c948-6914-d1d14a02033e-e0820647"),s=document.querySelector("#w-node-_8ff28dca-4908-092a-a93e-64674276b761-e0820647"),d=document.querySelector("#w-node-d37b0f9a-3049-7721-1f0b-b2dfa6b25604-e0820647"),f=document.querySelector("#w-node-a792f731-c023-e6a4-a3a2-3b0f75706c28-e0820647"),p=document.querySelector("#w-node-_38752304-f930-7aec-55b4-e5bb69d7261b-e0820647"),w=document.querySelector("#w-node-af8686f0-0eff-8a7c-0ed7-beca4d3b4ae5-e0820647"),l=document.querySelector("#w-node-f5866f73-1277-b3c6-9637-905ed2896c1d-e0820647"),L=document.querySelector("#w-node-_26bcf290-3970-d3ae-4c5a-8a87562b3b8f-e0820647"),P=document.querySelector("#w-node-_959dd736-48e6-8ca1-a499-ecdb1597fdfc-e0820647"),R=document.querySelector("#w-node-_81d87156-36a4-f557-ac99-5a50eaa2aede-e0820647"),T=document.querySelectorAll(".divider"),u=[],h=gsap.timeline();r&&(gsap.set(r,{clipPath:"inset(0% 0% 100% 0%)"}),h.to(r,{clipPath:"inset(0% 0% 0% 0%)",duration:1.2,ease:"expo.inOut"},0));let g=0,k=.6,C=0;if(o){const n=new SplitType(o,{types:"lines"});if(u.push(n),n.lines&&n.lines.length>0){const y=n.lines;gsap.set(y,{opacity:0,y:20}),y.forEach((a,v)=>{h.to(a,{opacity:1,y:0,duration:.4,ease:"power2.out"},k+v*.15)}),g=k+(y.length-1)*.15+.4;const m=g-k;C=k+m*.7-.15,h.call(()=>{},null,g)}}const x=[{divider:T[0],title:i,content:p},{divider:T[1],title:s,content:w},{divider:T[2],title:d,content:l},{divider:T[3],title:f,content:L},{divider:T[4],title:P,content:R}];let A=C;x.forEach((n,y)=>{if(!n.divider)return;if(gsap.set(n.divider,{width:0,opacity:0}),n.title&&gsap.set(n.title,{opacity:0,y:20}),n.content&&gsap.set(n.content,{opacity:0,y:20}),n.divider.getBoundingClientRect().top<window.innerHeight){h.to(n.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},A),n.title&&h.to(n.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},A+.15),n.content&&h.to(n.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},A+.25);const b=A+.25+.6-A;A=A+b*.7}else ScrollTrigger.create({trigger:n.divider,start:"top 92%",once:!0,onEnter:()=>{const v=gsap.timeline();v.to(n.divider,{opacity:1,width:"100%",duration:.6,ease:"power2.inOut"},0),n.title&&v.to(n.title,{opacity:1,y:0,duration:.6,ease:"power2.out"},.15),n.content&&v.to(n.content,{opacity:1,y:0,duration:.6,ease:"power2.out"},.25)}})}),typeof barba<"u"&&barba.hooks.beforeLeave(()=>{u.forEach(n=>{n&&n.revert&&n.revert()}),ScrollTrigger.getAll().forEach(n=>n.kill()),t&&t.parentNode&&t.parentNode.removeChild(t)})}window.initAbout=te;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",te):te();He();window.initPhotoModal=Te;
